{"layout":"tutorial_hands_on","subtopic":"datamanipulation","priority":5,"title":"Bulk matrix to ESet | Creating the bulk RNA-seq dataset for deconvolution","zenodo_link":"https://zenodo.org/record/7319173","questions":["Where can I find good quality RNA-seq datasets?","How can I reformat and manipulate these downloads to create the right format for MuSiC?"],"objectives":["You will retrieve raw data from the EMBL-EBI Expression Atlas.","You will manipulate the metadata and matrix files.","You will combine the metadata and matrix files into an ESet object for MuSiC deconvolution.","You will create multiple ESet objects - both combined and separated out by disease phenotype for your bulk dataset."],"time_estimation":"1H","key_points":["The EMBL-EBI Expression Atlas contains high quality datasets.","Metadata manipulation is key for generating the correctly formatted resource."],"contributions":{"authorship":["nomadscientist","mtekman"],"testing":["MarisaJL"]},"tags":["transcriptomics","data management"],"requirements":[{"type":"internal","topic_name":"single-cell","tutorials":["bulk-music","bulk-music-2-preparescref"]}],"follow_up_training":[{"type":"internal","topic_name":"single-cell","tutorials":["bulk-music-4-compare"]}],"js_requirements":{"mathjax":null,"mermaid":false},"short_id":"T00242","url":"/topics/single-cell/tutorials/bulk-music-3-preparebulk/tutorial.html","topic_name":"single-cell","tutorial_name":"bulk-music-3-preparebulk","dir":"topics/single-cell/tutorials/bulk-music-3-preparebulk","symlink":null,"id":"single-cell/bulk-music-3-preparebulk","ref_tutorials":["<p>After completing the <a href=\"https://xuranw.github.io/MuSiC/articles/MuSiC.html\">MuSiC deconvolution tutorial</a> (<span class=\"citation\"><a href=\"#wang2019bulk\">Wang <i>et al.</i> 2019</a></span>), you are hopefully excited to apply this analysis to data of your choice. Annoyingly, getting data in the right format is often what prevents us from being able to successfully apply analyses. This tutorial is all about reformatting a raw bulk RNA-seq dataset pulled from a public resource (the EMBL-EBI Expression atlas (<span class=\"citation\"><a href=\"#Moreno2021\">Moreno <i>et al.</i> 2021</a></span>).  Let’s get started!</p>\n\n<blockquote class=\"agenda\">\n  <agenda-title></agenda-title>\n\n  <p>In this tutorial, we will cover:</p>\n\n<ol id=\"markdown-toc\">\n  <li><a href=\"#metadata-manipulation\" id=\"markdown-toc-metadata-manipulation\">Metadata Manipulation</a>    <ol>\n      <li><a href=\"#find-the-data\" id=\"markdown-toc-find-the-data\">Find the data</a></li>\n    </ol>\n  </li>\n  <li><a href=\"#manipulate-the-expression-matrix\" id=\"markdown-toc-manipulate-the-expression-matrix\">Manipulate the expression matrix</a></li>\n  <li><a href=\"#construct-expression-set-objects\" id=\"markdown-toc-construct-expression-set-objects\">Construct Expression Set Objects</a></li>\n  <li><a href=\"#conclusion\" id=\"markdown-toc-conclusion\">Conclusion</a></li>\n</ol>\n\n</blockquote>\n\n<h1 id=\"metadata-manipulation\">Metadata Manipulation</h1>\n\n<p>Just as in our scRNA-dataset preparation tutorial, we will tackle the metadata first. We are roughly following the same concept as in the previous bulk deconvolution tutorial, by comparing human pancreas data across a disease variable (type II diabetes vs healthy), but using public datasets to do it.</p>\n\n<h2 id=\"find-the-data\">Find the data</h2>\n<p>We explored the <a href=\"https://www.ebi.ac.uk/gxa/experiments\">expression atlas</a>, browsing experiments in order to find the bulk RNA-seq pancreas dataset (<span class=\"citation\"><a href=\"#segerstolpe2016single\">Segerstolpe <i>et al.</i> 2016</a></span>). You can <a href=\"https://www.ebi.ac.uk/gxa/experiments/E-MTAB-5060/Results\">explore this dataset here</a> using their browser. These cells come from 7 healthy individuals and 4 individuals with Type II diabetes, so we will create reference Expression Set objects for the total as well as separating out by phenotype, as you may have reason to do this in your analysis (or you may not!). This dataset is from the same lab that we built our scRNA-seq reference from, so we should get quite accurate results given the same lab made both datasets!</p>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title> Data upload </hands-on-title>\n\n  <ol>\n    <li>Create a new history for this tutorial</li>\n    <li>\n      <p>Import the files from <a href=\"https://zenodo.org/record/7319173\">Zenodo</a> or from\nthe shared data library (<code class=\"language-plaintext highlighter-rouge\">GTN - Material</code> -&gt; <code class=\"language-plaintext highlighter-rouge\">single-cell</code>\n -&gt; <code class=\"language-plaintext highlighter-rouge\">Bulk matrix to ESet | Creating the bulk RNA-seq dataset for deconvolution</code>):</p>\n\n      <div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>https://zenodo.org/record/7319173/files/E-MTAB-5060-experiment-design.tsv\n</code></pre></div>      </div>\n      <!--SNIPPET-->\n      <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-importing-via-links\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-importing-via-links\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Importing via links</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <ul>   <li>Copy the link location</li>   <li>     <p>Click <i class=\"fas fa-upload\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-upload</span> <strong>Upload Data</strong> at the top of the tool panel</p>   </li>   <li>Select <i class=\"fa fa-edit\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-wf-edit</span> <strong>Paste/Fetch Data</strong></li>   <li>     <p>Paste the link(s) into the text field</p>   </li>   <li>     <p>Press <strong>Start</strong></p>   </li>   <li><strong>Close</strong> the window</li> </ul> </blockquote>\n      <p><!--END_SNIPPET--></p>\n    </li>\n    <li>\n      <p>Rename the datasets as needed</p>\n    </li>\n    <li>\n      <p>Check that the datatype is tabular</p>\n\n      <!--SNIPPET-->\n      <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-changing-the-datatype\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-changing-the-datatype\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Changing the datatype</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <ul>   <li>Click on the <i class=\"fas fa-pencil-alt\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-pencil</span> <strong>pencil icon</strong> for the dataset to edit its attributes</li>   <li>In the central panel, click <i class=\"fas fa-database\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-chart-select-data</span> <strong>Datatypes</strong> tab on the top</li>   <li>In the <i class=\"fas fa-database\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-chart-select-data</span> <strong>Assign Datatype</strong>, select <code class=\"language-plaintext highlighter-rouge\">tabular</code> from “<em>New type</em>” dropdown     <ul>       <li>Tip: you can start typing the datatype into the field to filter the dropdown menu</li>     </ul>   </li>   <li>Click the <strong>Save</strong> button</li> </ul> </blockquote>\n      <p><!--END_SNIPPET--></p>\n    </li>\n    <li>\n      <p>Add to <code class=\"language-plaintext highlighter-rouge\">experiment-design</code> the following tags <code class=\"language-plaintext highlighter-rouge\">#metadata #bulk #ebi</code></p>\n\n      <!--SNIPPET-->\n      <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-adding-a-tag\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-adding-a-tag\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Adding a tag</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <ol>   <li>Click on the dataset to expand it</li>   <li>Click on <strong>Add Tags</strong> <i class=\"fas fa-tags\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-tags</span></li>   <li>Add a tag  starting with <code class=\"language-plaintext highlighter-rouge\">#</code>     <ul>       <li>Tags starting with <code class=\"language-plaintext highlighter-rouge\">#</code> will be automatically propagated to the outputs of tools using this dataset.</li>     </ul>   </li>   <li>Press <kbd>Enter</kbd></li>   <li>Check that the tag appears below the dataset name</li> </ol> </blockquote>\n      <p><!--END_SNIPPET--></p>\n    </li>\n  </ol>\n\n</blockquote>\n\n<p>As before, the metadata object annoyingly has a bunch of unnecessary columns. You can examine this with the <i class=\"far fa-eye\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-eye</span> in the Galaxy history. Let’s remove them!</p>\n\n<p><img src=\"../../images/bulk-music/bulk-metadata-annoying.png\" alt=\"Columns in a table where some contain run info or Sample Characteristic[age] while others are empty.\" title=\"Ridiculous metadata columns and labels\" /></p>\n\n<!--SNIPPET-->\n<blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-using-tutorial-mode\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-using-tutorial-mode\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Using tutorial mode</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <p>Tools are frequently updated to new versions. Your Galaxy may have multiple versions of the same tool available. By default, you will be shown the latest version of the tool. This may NOT be the same tool used in the tutorial you are accessing. Furthermore, if you use a newer tool in one step, and try using an older tool in the next step… this may fail! To ensure you use the same tool versions of a given tutorial, use the <strong>Tutorial mode</strong> feature.</p>   <ul>   <li>Open your Galaxy server</li>   <li>Click on the <i class=\"fas fa-graduation-cap\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">curriculum</span> icon on the top menu, this will open the GTN inside Galaxy.</li>   <li>Navigate to your tutorial</li>   <li>Tool names in tutorials will be blue buttons that open the correct tool for you</li>   <li><strong>Note:</strong> this does not work for all tutorials (yet)   <img src=\"/training-material/topics/contributing/images/88277962-ddda4a80-cce1-11ea-92cd-41b1df063db0.gif\" alt=\"gif showing how GTN-in-Galaxy works\" /></li>   <li>You can click anywhere in the grey-ed out area outside of the tutorial box to return back to the Galaxy analytical interface</li> </ul>   <blockquote class=\"warning\">   <warning-title>Not all browsers work!</warning-title>   <ul>     <li>We’ve had some issues with Tutorial mode on Safari for Mac users.</li>     <li>Try a <strong>different browser</strong> if you aren’t seeing the button.</li>   </ul> </blockquote> </blockquote>\n<p><!--END_SNIPPET--></p>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title> Remove unnecessary columns </hands-on-title>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_cut_tool/1.1.0\" title=\"Advanced Cut tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>Advanced Cut</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 1.1.0)</span> with the following parameters:\n      <ul>\n        <li><i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> <em>“File to cut”</em>: <code class=\"language-plaintext highlighter-rouge\">output</code> (Input dataset)</li>\n        <li><em>“Operation”</em>: <code class=\"language-plaintext highlighter-rouge\">Discard</code></li>\n        <li><em>“Cut by”</em>: <code class=\"language-plaintext highlighter-rouge\">fields</code>\n          <ul>\n            <li><em>“List of Fields”</em>: <code class=\"language-plaintext highlighter-rouge\">3 5 7 8 9 10 11 12 13 15 16 17 18</code></li>\n          </ul>\n        </li>\n      </ul>\n\n      <blockquote class=\"comment\">\n        <comment-title></comment-title>\n\n        <p>Advanced cut works slightly differently in a workflow versus running the tool independently. Independently, there is a list and you can click through the list to note your columns, while in a workflow it appears as a text option and you put each column on a different line. The point is, each number above represents a column, so remove them!</p>\n      </blockquote>\n    </li>\n  </ol>\n\n</blockquote>\n\n<p>Now let’s take care of the excessively wordy header titles - and note that oftentimes various programmes struggle with titles or cells that have any spaces ` ` in them, so removing those now often saves hassle later.</p>\n\n<blockquote class=\"comment\">\n  <comment-title></comment-title>\n  <p>You might also remember in the MuSiC tutorial that we can analyse numeric parameters in the metadata (in that case, hbac1c content). Reformatting to ensure numerical values in these columns (i.e. taking the ` years` out of an age cell) is helpful then too.</p>\n</blockquote>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title> Fixing titles </hands-on-title>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/galaxyp/regex_find_replace/regex1/1.0.2\" title=\"Regex Find And Replace tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>Regex Find And Replace</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 1.0.2)</span> with the following parameters:\n      <ul>\n        <li><i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> <em>“Select lines from”</em>: <code class=\"language-plaintext highlighter-rouge\">output</code> (output of <strong>Advanced Cut</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span>)</li>\n        <li>In <em>“Check”</em>:\n          <ul>\n            <li><i class=\"far fa-plus-square\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-repeat</span> <em>“Insert Check”</em>\n              <ul>\n                <li><em>“Find Regex”</em>: <code class=\"language-plaintext highlighter-rouge\">Sample Characteristic\\[age\\]</code></li>\n                <li><em>“Replacement”</em>: <code class=\"language-plaintext highlighter-rouge\">Age</code></li>\n              </ul>\n            </li>\n            <li><i class=\"far fa-plus-square\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-repeat</span> <em>“Insert Check”</em>\n              <ul>\n                <li><em>“Find Regex”</em>: <code class=\"language-plaintext highlighter-rouge\">year</code></li>\n              </ul>\n            </li>\n            <li><i class=\"far fa-plus-square\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-repeat</span> <em>“Insert Check”</em>\n              <ul>\n                <li><em>“Find Regex”</em>: <code class=\"language-plaintext highlighter-rouge\">Sample Characteristic\\[body mass index\\]</code></li>\n                <li><em>“Replacement”</em>: <code class=\"language-plaintext highlighter-rouge\">BMI</code></li>\n              </ul>\n            </li>\n            <li><i class=\"far fa-plus-square\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-repeat</span> <em>“Insert Check”</em>\n              <ul>\n                <li><em>“Find Regex”</em>: <code class=\"language-plaintext highlighter-rouge\">Sample Characteristic\\[disease\\]</code></li>\n                <li><em>“Replacement”</em>: <code class=\"language-plaintext highlighter-rouge\">Disease</code></li>\n              </ul>\n            </li>\n            <li><i class=\"far fa-plus-square\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-repeat</span> <em>“Insert Check”</em>\n              <ul>\n                <li><em>“Find Regex”</em>: <code class=\"language-plaintext highlighter-rouge\">Sample Characteristic\\[individual\\]</code></li>\n                <li><em>“Replacement”</em>: <code class=\"language-plaintext highlighter-rouge\">Individual</code></li>\n              </ul>\n            </li>\n            <li><i class=\"far fa-plus-square\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-repeat</span> <em>“Insert Check”</em>\n              <ul>\n                <li><em>“Find Regex”</em>: <code class=\"language-plaintext highlighter-rouge\">Sample Characteristic\\[sex\\]</code></li>\n                <li><em>“Replacement”</em>: <code class=\"language-plaintext highlighter-rouge\">Sex</code></li>\n              </ul>\n            </li>\n          </ul>\n        </li>\n      </ul>\n    </li>\n    <li>\n      <p>Change the datatype to tabular</p>\n\n      <!--SNIPPET-->\n      <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-changing-the-datatype-1\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-changing-the-datatype-1\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Changing the datatype</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <ul>   <li>Click on the <i class=\"fas fa-pencil-alt\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-pencil</span> <strong>pencil icon</strong> for the dataset to edit its attributes</li>   <li>In the central panel, click <i class=\"fas fa-database\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-chart-select-data</span> <strong>Datatypes</strong> tab on the top</li>   <li>In the <i class=\"fas fa-database\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-chart-select-data</span> <strong>Assign Datatype</strong>, select <code class=\"language-plaintext highlighter-rouge\">tabular</code> from “<em>New type</em>” dropdown     <ul>       <li>Tip: you can start typing the datatype into the field to filter the dropdown menu</li>     </ul>   </li>   <li>Click the <strong>Save</strong> button</li> </ul> </blockquote>\n      <p><!--END_SNIPPET--></p>\n    </li>\n  </ol>\n</blockquote>\n\n<p>Now examine <i class=\"far fa-eye\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-eye</span> your resultant metadata file in the Galaxy history. Better, right?</p>\n\n<figure id=\"figure-1\" style=\"max-width: 90%;\"><img src=\"../../images/bulk-music/bulk-metadata-pretty.png\" alt=\"5 columns with numerical or string information on Run, Age, BMI, Disease and Sex. \" width=\"770\" height=\"366\" loading=\"lazy\" /><a target=\"_blank\" href=\"../../images/bulk-music/bulk-metadata-pretty.png\" rel=\"noopener noreferrer\"><small>Open image in new tab</small></a><br /><br /><figcaption><span class=\"figcaption-prefix\"><strong>Figure 1</strong>:</span> Look at the pretty metadata</figcaption></figure>\n\n<p>This is ready to go, so now we’ll reformat the matrix!</p>\n\n<h1 id=\"manipulate-the-expression-matrix\">Manipulate the expression matrix</h1>\n\n<p>Let’s upload the dataset.</p>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title> Data upload </hands-on-title>\n\n  <ol>\n    <li>\n      <p>Import the files from <a href=\"https://zenodo.org/record/7319173\">Zenodo</a> or from\nthe shared data library (<code class=\"language-plaintext highlighter-rouge\">GTN - Material</code> -&gt; <code class=\"language-plaintext highlighter-rouge\">single-cell</code>\n -&gt; <code class=\"language-plaintext highlighter-rouge\">Bulk matrix to ESet | Creating the bulk RNA-seq dataset for deconvolution</code>):</p>\n\n      <div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>https://zenodo.org/record/7319173/files/E-MTAB-5060-raw-counts.tsv\n</code></pre></div>      </div>\n      <!--SNIPPET-->\n      <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-importing-via-links-1\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-importing-via-links-1\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Importing via links</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <ul>   <li>Copy the link location</li>   <li>     <p>Click <i class=\"fas fa-upload\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-upload</span> <strong>Upload Data</strong> at the top of the tool panel</p>   </li>   <li>Select <i class=\"fa fa-edit\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-wf-edit</span> <strong>Paste/Fetch Data</strong></li>   <li>     <p>Paste the link(s) into the text field</p>   </li>   <li>     <p>Press <strong>Start</strong></p>   </li>   <li><strong>Close</strong> the window</li> </ul> </blockquote>\n      <p><!--END_SNIPPET--></p>\n    </li>\n    <li>Rename the dataset as needed</li>\n    <li>\n      <p>Check that the datatype is tabular</p>\n\n      <!--SNIPPET-->\n      <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-changing-the-datatype-2\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-changing-the-datatype-2\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Changing the datatype</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <ul>   <li>Click on the <i class=\"fas fa-pencil-alt\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-pencil</span> <strong>pencil icon</strong> for the dataset to edit its attributes</li>   <li>In the central panel, click <i class=\"fas fa-database\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-chart-select-data</span> <strong>Datatypes</strong> tab on the top</li>   <li>In the <i class=\"fas fa-database\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-chart-select-data</span> <strong>Assign Datatype</strong>, select <code class=\"language-plaintext highlighter-rouge\">tabular</code> from “<em>New type</em>” dropdown     <ul>       <li>Tip: you can start typing the datatype into the field to filter the dropdown menu</li>     </ul>   </li>   <li>Click the <strong>Save</strong> button</li> </ul> </blockquote>\n      <p><!--END_SNIPPET--></p>\n    </li>\n    <li>\n      <p>Add to <code class=\"language-plaintext highlighter-rouge\">raw-counts</code> the following tags <code class=\"language-plaintext highlighter-rouge\">#matrix #bulk #ebi</code></p>\n\n      <!--SNIPPET-->\n      <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-adding-a-tag-1\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-adding-a-tag-1\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Adding a tag</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <ol>   <li>Click on the dataset to expand it</li>   <li>Click on <strong>Add Tags</strong> <i class=\"fas fa-tags\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-tags</span></li>   <li>Add a tag  starting with <code class=\"language-plaintext highlighter-rouge\">#</code>     <ul>       <li>Tags starting with <code class=\"language-plaintext highlighter-rouge\">#</code> will be automatically propagated to the outputs of tools using this dataset.</li>     </ul>   </li>   <li>Press <kbd>Enter</kbd></li>   <li>Check that the tag appears below the dataset name</li> </ol> </blockquote>\n      <p><!--END_SNIPPET--></p>\n    </li>\n  </ol>\n\n</blockquote>\n\n<p>Now examine <i class=\"far fa-eye\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-eye</span> your raw counts file in the Galaxy history.</p>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <ol>\n    <li>Are samples in the rows or columns?</li>\n  </ol>\n\n  <blockquote class=\"solution\">\n    <div id=\"solution-1\" class=\"box-title\"><button type=\"button\" aria-controls=\"solution-1-contents\" aria-expanded=\"true\" aria-label=\"Toggle solution box: \"><i class=\"far fa-eye\" aria-hidden=\"true\"></i><span class=\"visually-hidden\"></span> Solution<span role=\"button\" class=\"fold-unfold fa fa-minus-square\"></span></button></div>\n\n    <figure id=\"figure-2\" style=\"max-width: 90%;\"><img src=\"../../images/bulk-music/raw-matrix.png\" alt=\"Column 1 contains Gene ID followed by many lines of ENSG####. Column 2 contains the gene names. The following columns contain numerous iterations of ERR#####. \" width=\"1802\" height=\"358\" loading=\"lazy\" /><a target=\"_blank\" href=\"../../images/bulk-music/raw-matrix.png\" rel=\"noopener noreferrer\"><small>Open image in new tab</small></a><br /><br /><figcaption><span class=\"figcaption-prefix\"><strong>Figure 2</strong>:</span> Gene info</figcaption></figure>\n\n    <ol>\n      <li>By examining the matrix, you can find that genes are the rows while samples are the columns.</li>\n    </ol>\n\n  </blockquote>\n</blockquote>\n\n<p>While it’s awesome that there’s a gene name column, unfortunately the gene names will be duplicated - different ENS IDs can refer to the same Gene Name. This going to be a problem later. So we need to get this in a format to collapse the ENS IDs, just as we did previously in the scRNA-seq data reference preparation. Sadly, we’ll start by removing the column of gene names to prepare for the ENS ID collapse.</p>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title> Remove gene names column </hands-on-title>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/iuc/column_remove_by_header/column_remove_by_header/1.0\" title=\"Remove columns tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>Remove columns</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 1.0)</span> with the following parameters:\n      <ul>\n        <li><i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> <em>“Tabular file”</em>: <code class=\"language-plaintext highlighter-rouge\">raw-counts</code> (Input dataset)</li>\n        <li>In <em>“Select Columns”</em>:\n          <ul>\n            <li><i class=\"far fa-plus-square\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-repeat</span> <em>“Insert Select Columns”</em>\n              <ul>\n                <li><em>“Header name”</em>: <code class=\"language-plaintext highlighter-rouge\">Gene Name</code></li>\n              </ul>\n            </li>\n          </ul>\n        </li>\n      </ul>\n    </li>\n  </ol>\n\n</blockquote>\n\n<p>Now that your data is in a format of having a rows of ENS IDs and samples as columns, you can apply the handy ENS ID collapsing workflow as we did in the scRNA-seq reference. If you have already imported this workflow during the first tutorial, then you can use it again now.</p>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title> Convert from Ensembl to GeneSymbol using workflow </hands-on-title>\n\n  <ol>\n    <li>\n      <p>Import this <a href=\"https://usegalaxy.eu/u/wendi.bacon.training/w/convert-from-ensembl-to-genesymbol-summing-duplicate-genes\">workflow</a>.</p>\n\n      <!--SNIPPET-->\n      <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-importing-a-workflow\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-importing-a-workflow\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Importing a workflow</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <ul>   <li>Click on <em>Workflow</em> on the top menu bar of Galaxy. You will see a list of all your workflows.</li>   <li>Click on <i class=\"fas fa-upload\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-upload</span> <strong>Import</strong> at the top-right of the screen</li>   <li>Provide your workflow     <ul>       <li>Option 1: Paste the URL of the workflow into the box labelled <em>“Archived Workflow URL”</em></li>       <li>Option 2: Upload the workflow file in the box labelled <em>“Archived Workflow File”</em></li>     </ul>   </li>   <li>Click the <strong>Import workflow</strong> button</li> </ul>   <p>Below is a short video demonstrating how to import a workflow from GitHub using this procedure:</p>   <figure> <iframe credentialless=\"\" allowfullscreen=\"\" referrerpolicy=\"no-referrer\" sandbox=\"allow-scripts allow-same-origin\" allow=\"accelerometer 'none'; ambient-light-sensor 'none'; autoplay 'none'; battery 'none'; bluetooth 'none'; browsing-topics 'none'; camera 'none'; ch-ua 'none'; display-capture 'none'; domain-agent 'none'; document-domain 'none'; encrypted-media 'none'; execution-while-not-rendered 'none'; execution-while-out-of-viewport 'none'; gamepad 'none'; geolocation 'none'; gyroscope 'none'; hid 'none'; identity-credentials-get 'none'; idle-detection 'none'; keyboard-map 'none'; local-fonts 'none'; magnetometer 'none'; microphone 'none'; midi 'none'; navigation-override 'none'; otp-credentials 'none'; payment 'none'; picture-in-picture 'none'; publickey-credentials-create 'none'; publickey-credentials-get 'none'; screen-wake-lock 'none'; serial 'none'; speaker-selection 'none'; sync-xhr 'none'; usb 'none'; web-share 'none'; window-management 'none'; xr-spatial-tracking 'none'\" csp=\"sandbox allow-scripts allow-same-origin;\" width=\"560\" height=\"315\" src=\"https://www.youtube-nocookie.com/embed/hoP36Te5wko\" title=\"Importing a workflow from URL\" frameborder=\"0\" loading=\"lazy\"></iframe> <figcaption>   <span class=\"figcaption-prefix\"><strong>Video</strong>:</span> Importing a workflow from URL</figcaption> </figure> </blockquote>\n      <p><!--END_SNIPPET--></p>\n    </li>\n    <li>\n      <p>Run the workflow on your sample with the following parameters:</p>\n      <ul>\n        <li><em>“Organism”</em>: <code class=\"language-plaintext highlighter-rouge\">Human</code></li>\n        <li><i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> <em>“Expression Matrix (Gene Rows)”</em>: <code class=\"language-plaintext highlighter-rouge\">output</code> (output of <strong>Remove columns</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span>)</li>\n      </ul>\n\n      <!--SNIPPET-->\n      <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-running-a-workflow\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-running-a-workflow\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Running a workflow</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <ul>   <li>Click on <em>Workflow</em> on the top menu bar of Galaxy. You will see a list of all your workflows.</li>   <li>Click on the <i class=\"fas fa-play\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">workflow-run</span> (<em>Run workflow</em>) button next to your workflow</li>   <li>Configure the workflow as needed</li>   <li>Click the <strong>Run Workflow</strong> button at the top-right of the screen</li>   <li>You may have to refresh your history to see the queued jobs</li> </ul> </blockquote>\n      <p><!--END_SNIPPET--></p>\n    </li>\n  </ol>\n\n</blockquote>\n\n<p>The output will likely be called <strong>Text transformation</strong> and will look like this:</p>\n\n<figure id=\"figure-3\" style=\"max-width: 90%;\"><img src=\"../../images/bulk-music/ensidcollapse_bulk.png\" alt=\"Alphabetised gene symbols appear in column one with integers in the following columns corresponding to samples. \" width=\"448\" height=\"288\" loading=\"lazy\" /><a target=\"_blank\" href=\"../../images/bulk-music/ensidcollapse_bulk.png\" rel=\"noopener noreferrer\"><small>Open image in new tab</small></a><br /><br /><figcaption><span class=\"figcaption-prefix\"><strong>Figure 3</strong>:</span> Output of the ENS ID collapsing workflow for bulk dataset</figcaption></figure>\n\n<p>Success! You’ve now prepared your metadata and your matrix. It’s time to put it together to create the Expression Set objects needed for MuSiC deconvolution.</p>\n\n<h1 id=\"construct-expression-set-objects\">Construct Expression Set Objects</h1>\n\n<p>We have three more tasks to do: first, we need to create the expression set object with all the phenotypes combined. Then, we will create the two objects we actually need - one for healthy and one for diseased.</p>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title> Creating the combined object </hands-on-title>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/bgruening/music_construct_eset/music_construct_eset/0.1.1+galaxy4\" title=\"Construct Expression Set Object tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>Construct Expression Set Object</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 0.1.1+galaxy4)</span> with the following parameters:\n      <ul>\n        <li><i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> <em>“Assay Data”</em>: <code class=\"language-plaintext highlighter-rouge\">out_file</code> #matrix (output of <strong>Text transformation</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span>)</li>\n        <li><i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> <em>“Phenotype Data”</em>: <code class=\"language-plaintext highlighter-rouge\">out_file1</code> #metadata (output of <strong>Regex Find And Replace</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span>)</li>\n      </ul>\n    </li>\n    <li>Remove the <code class=\"language-plaintext highlighter-rouge\">#metadata #matrix</code> tags from the output <strong>RData ESet Object</strong></li>\n  </ol>\n\n</blockquote>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <ol>\n    <li>How many genes are in your object?</li>\n    <li>How many samples?</li>\n    <li>What metadata categories are there?</li>\n  </ol>\n\n  <blockquote class=\"solution\">\n    <div id=\"solution-1\" class=\"box-title\"><button type=\"button\" aria-controls=\"solution-1-contents\" aria-expanded=\"true\" aria-label=\"Toggle solution box: \"><i class=\"far fa-eye\" aria-hidden=\"true\"></i><span class=\"visually-hidden\"></span> Solution<span role=\"button\" class=\"fold-unfold fa fa-minus-square\"></span></button></div>\n\n    <p>The trick with all of these questions is to examine <i class=\"far fa-eye\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-eye</span> the <code class=\"language-plaintext highlighter-rouge\">General info</code> output <i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> of the <strong>Construct Expression Set Object</strong> tool.</p>\n    <figure id=\"figure-4\" style=\"max-width: 90%;\"><img src=\"../../images/bulk-music/generalinfo.png\" alt=\"Lines showing ExpressionSet'; assayData: 34997 features, 7 samples; protocolData: none; phenoData; sampleNames: ERR### (7 total); varLabels: Age BMI Disease Sex; varMetadata: labelDescription; and 3 more useless lines . \" width=\"844\" height=\"312\" loading=\"lazy\" /><a target=\"_blank\" href=\"../../images/bulk-music/generalinfo.png\" rel=\"noopener noreferrer\"><small>Open image in new tab</small></a><br /><br /><figcaption><span class=\"figcaption-prefix\"><strong>Figure 4</strong>:</span> General info output</figcaption></figure>\n\n    <ol>\n      <li>There are <code class=\"language-plaintext highlighter-rouge\">34997</code> features, which are the genes.</li>\n      <li>There are <code class=\"language-plaintext highlighter-rouge\">7</code> samples.</li>\n      <li>The metadata categories are the same you prepared earlier, shown here in a category of phenoData: <code class=\"language-plaintext highlighter-rouge\">Age BMI Disease Sex</code></li>\n    </ol>\n\n  </blockquote>\n</blockquote>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title> Creating the disease-only object </hands-on-title>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/bgruening/music_manipulate_eset/music_manipulate_eset/0.1.1+galaxy4\" title=\"Manipulate Expression Set Object tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>Manipulate Expression Set Object</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 0.1.1+galaxy4)</span> with the following parameters:\n      <ul>\n        <li><i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> <em>“Expression Set Dataset”</em>: <code class=\"language-plaintext highlighter-rouge\">out_rds</code> (output of <strong>Construct Expression Set Object</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span>)</li>\n        <li><em>“Concatenate other Expression Set objects?”</em>: <code class=\"language-plaintext highlighter-rouge\">No</code></li>\n        <li><em>“Subset the dataset?”</em>: <code class=\"language-plaintext highlighter-rouge\">Yes</code>\n          <ul>\n            <li><em>“By”</em>: <code class=\"language-plaintext highlighter-rouge\">Filter Samples and Genes by Phenotype Values</code>\n              <ul>\n                <li>In <em>“Filter Samples by Condition”</em>:\n                  <ul>\n                    <li><i class=\"far fa-plus-square\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-repeat</span> <em>“Insert Filter Samples by Condition”</em>\n                      <ul>\n                        <li><em>“Name of phenotype column”</em>: <code class=\"language-plaintext highlighter-rouge\">Disease</code></li>\n                        <li><em>“List of values in this column to filter for, comma-delimited”</em>: <code class=\"language-plaintext highlighter-rouge\">type II diabetes mellitus</code></li>\n                      </ul>\n                    </li>\n                  </ul>\n                </li>\n              </ul>\n            </li>\n          </ul>\n        </li>\n      </ul>\n    </li>\n    <li>Add the tag <code class=\"language-plaintext highlighter-rouge\">#T2D</code> to the output <strong>RData ESet Object</strong></li>\n  </ol>\n\n</blockquote>\n\n<p>You can either re-run this tool or set it up again to create the healthy-only object.</p>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title> Creating the healthy-only object </hands-on-title>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/bgruening/music_manipulate_eset/music_manipulate_eset/0.1.1+galaxy4\" title=\"Manipulate Expression Set Object tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>Manipulate Expression Set Object</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 0.1.1+galaxy4)</span> with the following parameters:\n      <ul>\n        <li><i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> <em>“Expression Set Dataset”</em>: <code class=\"language-plaintext highlighter-rouge\">out_rds</code> (output of <strong>Construct Expression Set Object</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span>)</li>\n        <li><em>“Concatenate other Expression Set objects?”</em>: <code class=\"language-plaintext highlighter-rouge\">No</code></li>\n        <li><em>“Subset the dataset?”</em>: <code class=\"language-plaintext highlighter-rouge\">Yes</code>\n          <ul>\n            <li><em>“By”</em>: <code class=\"language-plaintext highlighter-rouge\">Filter Samples and Genes by Phenotype Values</code>\n              <ul>\n                <li>In <em>“Filter Samples by Condition”</em>:\n                  <ul>\n                    <li><i class=\"far fa-plus-square\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-repeat</span> <em>“Insert Filter Samples by Condition”</em>\n                      <ul>\n                        <li><em>“Name of phenotype column”</em>: <code class=\"language-plaintext highlighter-rouge\">Disease</code></li>\n                        <li><em>“List of values in this column to filter for, comma-delimited”</em>: <code class=\"language-plaintext highlighter-rouge\">normal</code></li>\n                      </ul>\n                    </li>\n                  </ul>\n                </li>\n              </ul>\n            </li>\n          </ul>\n        </li>\n      </ul>\n    </li>\n    <li>Add the tag <code class=\"language-plaintext highlighter-rouge\">#healthy</code> to the output <strong>RData ESet Object</strong></li>\n  </ol>\n\n</blockquote>\n\n<h1 id=\"conclusion\">Conclusion</h1>\n\n<p><i class=\"far fa-thumbs-up\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">congratulations</span> Congrats! You have successfully reformatted the RNA-seq samples into two ESet objects consisting of disease-only or healthy-only samples. You’re ready to take all this hard work and start comparing cell compositions in the next tutorial.</p>\n\n<p>You can find the <a href=\"https://usegalaxy.eu/u/wendi.bacon.training/w/music-deconvolution-data-generation--bulk--eset\">workflow for generating the ESet object</a> and the <a href=\"https://usegalaxy.eu/u/wendi.bacon.training/h/music-deconvolution-data-generation--bulk--eset\">answer key history</a>.</p>\n\n<figure id=\"figure-5\" style=\"max-width: 90%;\"><img src=\"../../images/bulk-music/workflow-bulk.png\" alt=\"7 boxes in the workflow editor and a subworkflow box for converting Ensembl to GeneSymbol. \" width=\"2302\" height=\"1292\" loading=\"lazy\" /><a target=\"_blank\" href=\"../../images/bulk-music/workflow-bulk.png\" rel=\"noopener noreferrer\"><small>Open image in new tab</small></a><br /><br /><figcaption><span class=\"figcaption-prefix\"><strong>Figure 5</strong>:</span> Workflow: Generating the bulk ESet Objects</figcaption></figure>\n\n<p>This tutorial is part of the <a href=\"https://singlecell.usegalaxy.eu\">https://singlecell.usegalaxy.eu</a> portal (<span class=\"citation\"><a href=\"#tekman2020single\">Tekman <i>et al.</i> 2020</a></span>).</p>\n\n<!--SNIPPET-->\n<blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-how-can-i-talk-with-other-users\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-how-can-i-talk-with-other-users\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: How can I talk with other users?</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <p><i class=\"far fa-comments\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">feedback</span> To discuss with like-minded scientists, join our <a href=\"http://gxy.io/gtn-slack\">Galaxy Training Network chatspace in Slack</a> and discuss with fellow users of Galaxy single cell analysis tools on <a href=\"https://gtnsmrgsbord.slack.com/archives/C06PBRR40D7\">#single-cell-users</a></p>   <p>We also post new tutorials / workflows there from time to time, as well as any other news.</p>   <p><i class=\"far fa-hand-point-right\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">point-right</span> If you’d like to contribute ideas, requests or feedback as part of the wider community building single-cell and spatial resources within Galaxy, you can also join our <a href=\"https://galaxyproject.org/community/sig/singlecell/\">Single cell &amp; sPatial Omics Community of Practice</a>.</p>   <p><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span> You can request tools here on our <a href=\"https://docs.google.com/spreadsheets/d/15hqgqA-RMDhXR-ylKhRF-Dab9Ij2arYSKiEVoPl2df4/edit?usp=sharing\">Single Cell and Spatial Omics Community Tool Request Spreadsheet</a></p> </blockquote>\n<p><!--END_SNIPPET--></p>\n"],"ref_slides":[],"hands_on":true,"slides":false,"mod_date":"2023-12-14 17:19:21 +0000","pub_date":"2023-01-20 10:58:39 +0000","version":27,"workflows":[{"workflow":"bulk_ESet.ga","tests":false,"url":"https://training.galaxyproject.org/training-material/topics/single-cell/tutorials/bulk-music-3-preparebulk/workflows/bulk_ESet.ga","path":"topics/single-cell/tutorials/bulk-music-3-preparebulk/workflows/bulk_ESet.ga","wfid":"single-cell-bulk-music-3-preparebulk","wfname":"bulk_eset","trs_endpoint":"https://training.galaxyproject.org/training-material/api/ga4gh/trs/v2/tools/single-cell-bulk-music-3-preparebulk/versions/bulk_eset","license":null,"creators":[{"class":"Person","identifier":"0000-0002-8170-8806","name":"Wendi Bacon"},{"class":"Person","identifier":"0000-0002-4181-2676","name":"Mehmet Tekman"}],"name":"MuSiC-Deconvolution: Data generation | bulk | ESet","title":"MuSiC-Deconvolution: Data generation | bulk | ESet","test_results":null,"modified":"2024-06-14 12:21:32 +0000","mermaid":"flowchart TD\n  0[\"Expression matrix\"];\n  1[\"Metadata\"];\n  2[\"annotateMyIDs\"];\n  0 -->|output_tabular| 2;\n  8415bac0-6beb-467d-a0fa-fb6465987ff7[\"Output\\nannotateMyIDs on input dataset(s): Annotated IDs\"];\n  2 --> 8415bac0-6beb-467d-a0fa-fb6465987ff7;\n  style 8415bac0-6beb-467d-a0fa-fb6465987ff7 stroke:#2c3143,stroke-width:4px;\n  3[\"Regex Find And Replace\"];\n  1 -->|output| 3;\n  4[\"🛠️ Subworkflow\\nCopy of Convert from Ensembl to GeneSymbol, summing duplicate genes\"];\n  style 4 fill:#edd,stroke:#900,stroke-width:4px;\n  2 -->|out_tab| 4;\n  0 -->|output_tabular| 4;\n  5[\"Construct Expression Set Object\"];\n  4 -->|Gene Symbol Count Matrix| 5;\n  3 -->|out_file1| 5;\n  6[\"Manipulate Expression Set Object\"];\n  5 -->|out_rds| 6;\n  88196d0b-7254-4794-b08a-5409f19c8323[\"Output\\nManipulate Expression Set Object on input dataset(s): ExpressionSet Object\"];\n  6 --> 88196d0b-7254-4794-b08a-5409f19c8323;\n  style 88196d0b-7254-4794-b08a-5409f19c8323 stroke:#2c3143,stroke-width:4px;\n  7[\"Manipulate Expression Set Object\"];\n  5 -->|out_rds| 7;"}],"api":"https://training.galaxyproject.org/training-material/api/topics/single-cell/tutorials/bulk-music-3-preparebulk/tutorial.json","tools":["sort1","toolshed.g2.bx.psu.edu/repos/bgruening/music_construct_eset/music_construct_eset/0.1.1+galaxy4","toolshed.g2.bx.psu.edu/repos/bgruening/music_manipulate_eset/music_manipulate_eset/0.1.1+galaxy4","toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_awk_tool/1.1.2","toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_cut_tool/1.1.0","toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_easyjoin_tool/1.1.2","toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_sed_tool/1.1.1","toolshed.g2.bx.psu.edu/repos/galaxyp/regex_find_replace/regex1/1.0.2","toolshed.g2.bx.psu.edu/repos/iuc/annotatemyids/annotatemyids/3.14.0+galaxy1","toolshed.g2.bx.psu.edu/repos/iuc/column_remove_by_header/column_remove_by_header/1.0","toolshed.g2.bx.psu.edu/repos/iuc/table_compute/table_compute/1.2.4+galaxy0"],"supported_servers":{"exact":[{"url":"https://usegalaxy.org.au","name":"UseGalaxy.org.au","usegalaxy":true}],"inexact":[{"url":"https://usegalaxy.cz/","name":"UseGalaxy.cz","usegalaxy":false}]},"topic_name_human":"Single Cell","admin_install":{"install_tool_dependencies":true,"install_repository_dependencies":true,"install_resolver_dependencies":true,"tools":[{"name":"music_construct_eset","owner":"bgruening","revisions":"282819d09a4f","tool_panel_section_label":"Single-cell","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"music_manipulate_eset","owner":"bgruening","revisions":"22232092be53","tool_panel_section_label":"Single-cell","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"text_processing","owner":"bgruening","revisions":"d698c222f354","tool_panel_section_label":"Text Manipulation","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"text_processing","owner":"bgruening","revisions":"d698c222f354","tool_panel_section_label":"Text Manipulation","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"text_processing","owner":"bgruening","revisions":"d698c222f354","tool_panel_section_label":"Text Manipulation","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"text_processing","owner":"bgruening","revisions":"d698c222f354","tool_panel_section_label":"Text Manipulation","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"regex_find_replace","owner":"galaxyp","revisions":"399da6b5ec21","tool_panel_section_label":"Text Manipulation","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"annotatemyids","owner":"iuc","revisions":"fe3ca740a485","tool_panel_section_label":"Annotation","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"column_remove_by_header","owner":"iuc","revisions":"2040e4c2750a","tool_panel_section_label":"Text Manipulation","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"table_compute","owner":"iuc","revisions":"3bf5661c0280","tool_panel_section_label":"Text Manipulation","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"}]},"admin_install_yaml":"---\ninstall_tool_dependencies: true\ninstall_repository_dependencies: true\ninstall_resolver_dependencies: true\ntools:\n- name: music_construct_eset\n  owner: bgruening\n  revisions: 282819d09a4f\n  tool_panel_section_label: Single-cell\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: music_manipulate_eset\n  owner: bgruening\n  revisions: 22232092be53\n  tool_panel_section_label: Single-cell\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: text_processing\n  owner: bgruening\n  revisions: d698c222f354\n  tool_panel_section_label: Text Manipulation\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: text_processing\n  owner: bgruening\n  revisions: d698c222f354\n  tool_panel_section_label: Text Manipulation\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: text_processing\n  owner: bgruening\n  revisions: d698c222f354\n  tool_panel_section_label: Text Manipulation\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: text_processing\n  owner: bgruening\n  revisions: d698c222f354\n  tool_panel_section_label: Text Manipulation\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: regex_find_replace\n  owner: galaxyp\n  revisions: 399da6b5ec21\n  tool_panel_section_label: Text Manipulation\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: annotatemyids\n  owner: iuc\n  revisions: fe3ca740a485\n  tool_panel_section_label: Annotation\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: column_remove_by_header\n  owner: iuc\n  revisions: 2040e4c2750a\n  tool_panel_section_label: Text Manipulation\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: table_compute\n  owner: iuc\n  revisions: 3bf5661c0280\n  tool_panel_section_label: Text Manipulation\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n","tours":false,"video":false,"slides_recordings":false,"translations":{"tutorial":[],"slides":[],"video":false},"license":"CC-BY-4.0","type":"tutorial","contributors":[{"name":"Wendi Bacon","email":"wendi.bacon@open.ac.uk","twitter":"WendiBacon1","matrix":"nomadscientist:matrix.org","joined":"2020-03","elixir_node":"uk","orcid":"0000-0002-8170-8806","bio":"Lecturer at The Open University","fediverse":"https://mstdn.science/@wendibacon1","fediverse_flavor":"mastodon","affiliations":["elixir-europe"],"id":"nomadscientist","url":"https://training.galaxyproject.org/training-material/api/contributors/nomadscientist.json","page":"https://training.galaxyproject.org/training-material/hall-of-fame/nomadscientist/"},{"name":"Mehmet Tekman","email":"mtekman89@gmail.com","joined":"2018-11","elixir_node":"de","affiliations":["uni-freiburg"],"former_affiliations":["elixir-europe"],"id":"mtekman","url":"https://training.galaxyproject.org/training-material/api/contributors/mtekman.json","page":"https://training.galaxyproject.org/training-material/hall-of-fame/mtekman/"},{"name":"Marisa Loach","orcid":"0000-0001-6979-6930","twitter":"Marisa_Loach","email":"marisa.loach@open.ac.uk","joined":"2022-10","id":"MarisaJL","url":"https://training.galaxyproject.org/training-material/api/contributors/MarisaJL.json","page":"https://training.galaxyproject.org/training-material/hall-of-fame/MarisaJL/"}]}