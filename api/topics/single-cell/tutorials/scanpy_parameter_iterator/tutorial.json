{"layout":"tutorial_hands_on","title":"Scanpy Parameter Iterator","zenodo_link":"https://zenodo.org/record/8011681","subtopic":"tricks","priority":3,"questions":["How can I run a tool with multiple parameter values?","Do I have to enter parameter values manually each time I want to check a new value?","What tools can take multiple values at once and iterate over them?"],"objectives":["Execute the Scanpy Parameter Iterator","Recognise what tools you can use Parameter Iterator with","Operate tools working on dataset collections","Compare plots resulting from different parameters values"],"requirements":[{"type":"internal","topic_name":"single-cell","tutorials":["scrna-case_alevin","scrna-case_alevin-combine-datasets","scrna-case_basic-pipeline"]}],"time_estimation":"2H","key_points":["Scanpy ParameterIterator can be used for k nearest neighbours (Scanpy ComputeGraph), perplexity (Scanpy RunTSNE) and resolution (Scanpy FindCluster).","You can enter the parameter values either as a list or as values to be iterated in step.","Parameter Iterator is a useful tool to quickly and easily compare the differences in the outputs caused by changing parameter values. Hence it allows us to choose the optimal parameter values."],"tags":null,"contributions":{"authorship":["wee-snufkin"],"testing":["nomadscientist"],"funding":["eosc-life"]},"js_requirements":{"mathjax":null,"mermaid":false},"short_id":"T00357","url":"/topics/single-cell/tutorials/scanpy_parameter_iterator/tutorial.html","topic_name":"single-cell","tutorial_name":"scanpy_parameter_iterator","dir":"topics/single-cell/tutorials/scanpy_parameter_iterator","symlink":null,"id":"single-cell/scanpy_parameter_iterator","ref_tutorials":["<p>The magic of bioinformatic analysis is that we use maths, statistics and complicated algorithms to deal with huge amounts of data to help us investigate biology. However, analysis is not always straightforward – each tool has various parameters to select. Eventually, we can end up with very different outcomes depending on the values we choose. With analysing scRNA-seq data, it’s almost like you need to know about 75% of your data, then make sure your analysis shows that, for you to then be able to identify the 25% new information.</p>\n\n<p>Given the vast array of values that we can specify in the tool parameters, how can we know if the values we choose are the most optimal ones - or at least good enough? Well, we can try different values in our workflow and then compare the outputs to see which is consistent with our understanding of the underlying biology. But can we do this efficiently, at scale, to test multiple values?</p>\n\n<p>And here the Parameter Iterator comes in – it allows us to test different variables quickly and easily. This tutorial will show you how to use Parameter Iterator to generate multiple outputs with different parameter values in one go.</p>\n\n<!--SNIPPET-->\n<blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-using-tutorial-mode\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-using-tutorial-mode\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Using tutorial mode</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <p>Tools are frequently updated to new versions. Your Galaxy may have multiple versions of the same tool available. By default, you will be shown the latest version of the tool. This may NOT be the same tool used in the tutorial you are accessing. Furthermore, if you use a newer tool in one step, and try using an older tool in the next step… this may fail! To ensure you use the same tool versions of a given tutorial, use the <strong>Tutorial mode</strong> feature.</p>   <ul>   <li>Open your Galaxy server</li>   <li>Click on the <i class=\"fas fa-graduation-cap\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">curriculum</span> icon on the top menu, this will open the GTN inside Galaxy.</li>   <li>Navigate to your tutorial</li>   <li>Tool names in tutorials will be blue buttons that open the correct tool for you</li>   <li><strong>Note:</strong> this does not work for all tutorials (yet)   <img src=\"/training-material/topics/contributing/images/88277962-ddda4a80-cce1-11ea-92cd-41b1df063db0.gif\" alt=\"gif showing how GTN-in-Galaxy works\" /></li>   <li>You can click anywhere in the grey-ed out area outside of the tutorial box to return back to the Galaxy analytical interface</li> </ul>   <blockquote class=\"warning\">   <warning-title>Not all browsers work!</warning-title>   <ul>     <li>We’ve had some issues with Tutorial mode on Safari for Mac users.</li>     <li>Try a <strong>different browser</strong> if you aren’t seeing the button.</li>   </ul> </blockquote> </blockquote>\n<p><!--END_SNIPPET--></p>\n\n<blockquote class=\"agenda\">\n  <agenda-title></agenda-title>\n\n  <p>In this tutorial, we will cover:</p>\n\n<ol id=\"markdown-toc\">\n  <li><a href=\"#get-data\" id=\"markdown-toc-get-data\">Get Data</a></li>\n  <li><a href=\"#workflow\" id=\"markdown-toc-workflow\">Workflow</a></li>\n  <li><a href=\"#inputs\" id=\"markdown-toc-inputs\">Inputs</a></li>\n  <li><a href=\"#number-of-neighbours-to-derive-knn-graph-for-scanpy-computegraph-tool\" id=\"markdown-toc-number-of-neighbours-to-derive-knn-graph-for-scanpy-computegraph-tool\">Number of neighbours to derive kNN graph (for <strong>Scanpy ComputeGraph</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span>)</a></li>\n  <li><a href=\"#perplexity-for-scanpy-runtsne-tool\" id=\"markdown-toc-perplexity-for-scanpy-runtsne-tool\">Perplexity (for <strong>Scanpy RunTSNE</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span>)</a></li>\n  <li><a href=\"#resolution-for-scanpy-findcluster-tool\" id=\"markdown-toc-resolution-for-scanpy-findcluster-tool\">Resolution (for <strong>Scanpy FindCluster</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span>)</a></li>\n  <li><a href=\"#additional-steps\" id=\"markdown-toc-additional-steps\">Additional steps</a></li>\n  <li><a href=\"#conclusion\" id=\"markdown-toc-conclusion\">Conclusion</a></li>\n</ol>\n\n</blockquote>\n\n<h1 id=\"get-data\">Get Data</h1>\n<p>The data used in this tutorial is from a mouse dataset of fetal growth restriction (<span class=\"citation\"><a href=\"#Bacon2018\">Bacon <i>et al.</i> 2018</a></span>). You can download the dataset below or import the history with the starting data.</p>\n\n<p>Here are several ways of getting our toy dataset – choose whichever you like!</p>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title>Option 1: Data upload - Import history</hands-on-title>\n\n  <ol>\n    <li>\n      <p>Import history from: <a href=\"https://usegalaxy.eu/u/j.jakiela/h/scanpy-parameter-iterator-1\">example input history</a></p>\n\n      <!--SNIPPET-->\n      <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-importing-a-history\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-importing-a-history\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Importing a history</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <ol>   <li>Open the link to the shared history</li>   <li>Click on the <i class=\"fas fa-plus\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">new-history</span> <em>Import history</em> button on the top right</li>   <li>Enter a title for the new history</li>   <li>Click on <strong>Import</strong></li> </ol> </blockquote>\n      <p><!--END_SNIPPET--></p>\n    </li>\n    <li>\n      <p><strong>Rename</strong> <i class=\"fas fa-pencil-alt\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-pencil</span> the the history to your name of choice.</p>\n    </li>\n  </ol>\n\n</blockquote>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title>Option 2: Data upload - Add to history</hands-on-title>\n\n  <ol>\n    <li>\n      <p>Create a new history for this tutorial</p>\n    </li>\n    <li>\n      <p>Import the files from <a href=\"https://zenodo.org/record/8011681\">Zenodo</a></p>\n\n      <div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>https://zenodo.org/record/8011681/files/Scanpy_RunPCA_AnnData_object.h5ad\n</code></pre></div>      </div>\n\n      <!--SNIPPET-->\n      <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-importing-via-links\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-importing-via-links\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Importing via links</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <ul>   <li>Copy the link location</li>   <li>     <p>Click <i class=\"fas fa-upload\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-upload</span> <strong>Upload Data</strong> at the top of the tool panel</p>   </li>   <li>Select <i class=\"fa fa-edit\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-wf-edit</span> <strong>Paste/Fetch Data</strong></li>   <li>     <p>Paste the link(s) into the text field</p>   </li>   <li>     <p>Press <strong>Start</strong></p>   </li>   <li><strong>Close</strong> the window</li> </ul> </blockquote>\n      <p><!--END_SNIPPET--></p>\n    </li>\n    <li>\n      <p>Rename the dataset if you wish: <code class=\"language-plaintext highlighter-rouge\">Scanpy RunPCA: AnnData object</code></p>\n\n      <!--SNIPPET-->\n      <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-renaming-a-dataset\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-renaming-a-dataset\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Renaming a dataset</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <ul>   <li>Click on the <i class=\"fas fa-pencil-alt\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-pencil</span> <strong>pencil icon</strong> for the dataset to edit its attributes</li>   <li>In the central panel, change the <strong>Name</strong> field</li>   <li>Click the <strong>Save</strong> button</li> </ul> </blockquote>\n      <p><!--END_SNIPPET--></p>\n    </li>\n    <li>\n      <p>Check that the datatype is <code class=\"language-plaintext highlighter-rouge\">h5ad</code></p>\n\n      <!--SNIPPET-->\n      <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-changing-the-datatype\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-changing-the-datatype\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Changing the datatype</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <ul>   <li>Click on the <i class=\"fas fa-pencil-alt\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-pencil</span> <strong>pencil icon</strong> for the dataset to edit its attributes</li>   <li>In the central panel, click <i class=\"fas fa-database\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-chart-select-data</span> <strong>Datatypes</strong> tab on the top</li>   <li>In the <i class=\"fas fa-database\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-chart-select-data</span> <strong>Assign Datatype</strong>, select <code class=\"language-plaintext highlighter-rouge\">datatypes</code> from “<em>New type</em>” dropdown     <ul>       <li>Tip: you can start typing the datatype into the field to filter the dropdown menu</li>     </ul>   </li>   <li>Click the <strong>Save</strong> button</li> </ul> </blockquote>\n      <p><!--END_SNIPPET--></p>\n    </li>\n  </ol>\n\n</blockquote>\n\n<h1 id=\"workflow\">Workflow</h1>\n\n<p>This tutorial is an extension of the full analysis shown in <a href=\"/training-material/topics/single-cell/tutorials/scrna-case_basic-pipeline/tutorial.html\">Filter, Plot and Explore Single-cell RNA-seq Data</a> tutorial in the Single-cell RNA-seq: Case Study series. So if you’ve been working through it, you can use your dataset from that tutorial here. If you haven’t completed it but you’re interested in how we get to this point, feel free to have a look at the mentioned tutorial.</p>\n\n<p>Our starting data will be the output of <strong>Scanpy RunPCA</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span>. It is part of the full analysis tutorial, but we will only focus on a smaller and shortened bit of the <a href=\"https://usegalaxy.eu/u/j.jakiela/w/copy-of-filter-plot-and-explore-single-cell-rna-seq-data-imported-from-uploaded-file-3\">full workflow</a> to show the application of the Parameter Iterator. Our workflow consists of the following steps:</p>\n\n<figure id=\"figure-1\" style=\"max-width: 90%;\"><img src=\"../../images/scrna-casestudy_parameter-iterator/workflow.png\" alt=\"Workflow that we are going to use in this tutorial: Scanpy RunPCA, Scanpy ComputeGraph, Scanpy RunTSNE, Scanpy RunUMAP, Scanpy FindCluster, Scanpy PlotEmbed. \" width=\"3360\" height=\"804\" loading=\"lazy\" /><a target=\"_blank\" href=\"../../images/scrna-casestudy_parameter-iterator/workflow.png\" rel=\"noopener noreferrer\"><small>Open image in new tab</small></a><br /><br /><figcaption><span class=\"figcaption-prefix\"><strong>Figure 1</strong>:</span> Shortened workflow that we are going to use in this tutorial.</figcaption></figure>\n\n<p><br />\nFor the detailed explanation of the tools presented above, check out <a href=\"/training-material/topics/single-cell/tutorials/scrna-case_basic-pipeline/tutorial.html\">this tutorial</a>.</p>\n\n<h1 id=\"inputs\">Inputs</h1>\n<p>Scanpy ParameterIterator tool currently works only for the following parameters:</p>\n<ol>\n  <li>Number of neighbours to derive kNN graph (for <strong>Scanpy ComputeGraph</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span>)</li>\n  <li>Perplexity (for <strong>Scanpy RunTSNE</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span>)</li>\n  <li>Resolution (for <strong>Scanpy FindCluster</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span>)</li>\n</ol>\n\n<p>There are two formats of the input values:</p>\n<ol>\n  <li>List of all parameter values to be iterated</li>\n  <li>Step increase values to be iterated</li>\n</ol>\n\n<h1 id=\"number-of-neighbours-to-derive-knn-graph-for-scanpy-computegraph-tool\">Number of neighbours to derive kNN graph (for <strong>Scanpy ComputeGraph</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span>)</h1>\n\n<p>We will now use <strong>Scanpy ComputeGraph</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span> to derive the k-nearest neighbour (kNN) graph from our PCA values. We can use the Parameter Iterator to check how the different k values of nearest neighbours will affect the final outcome. It is important that <strong>k neighbours is an integer</strong>.</p>\n\n<blockquote class=\"warning\">\n  <warning-title>Float vs integer</warning-title>\n  <p>Using ‘Step increase values to be iterated’ as the format of the input values automatically generates float values instead of integers. Float, or floating point numbers, are values with a ‘floating’ decimal point. To avoid float values, you must use ‘List of all parameter values to be iterated’ as your chosen values.</p>\n</blockquote>\n\n<p>The kNN graph will be needed for plotting a UMAP. According to the <a href=\"https://github.com/lmcinnes/umap\">UMAP developers</a>: “Larger neighbor values will result in more global structure being preserved at the loss of detailed local structure. In general this parameter should often be in the range 5 to 50, with a choice of 10 to 15 being a sensible default”. Therefore, let’s pick some values bigger and smaller than 15 to check how it changes the final UMAP. This is where the Parameter Iterator comes in!</p>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title> Set your values in Parameter Iterator </hands-on-title>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/ebi-gxa/scanpy_parameter_iterator/scanpy_parameter_iterator/0.0.1+galaxy9\" title=\"Scanpy ParameterIterator tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>Scanpy ParameterIterator</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 0.0.1+galaxy9)</span> with the following parameters:\n      <ul>\n        <li><em>“Parameter type”</em>: <code class=\"language-plaintext highlighter-rouge\">n-neighbours</code></li>\n        <li><em>“Choose the format of the input values”</em>: <code class=\"language-plaintext highlighter-rouge\">List of all parameter values to be iterated</code></li>\n        <li><em>“User input values”</em>: <code class=\"language-plaintext highlighter-rouge\">5,10,15,20,25,30,35,40</code></li>\n      </ul>\n    </li>\n    <li>\n      <p><strong>Rename</strong> <i class=\"fas fa-pencil-alt\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-pencil</span> the resulting list of datasets: <code class=\"language-plaintext highlighter-rouge\">Parameter iterated - n-neighbours</code> (you have to first click on the collection so that you see the datasets, and then rename it)</p>\n    </li>\n    <li><strong>Tag</strong> <i class=\"fas fa-tags\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-tags</span> each dataset with its corresponding value:\n      <ul>\n        <li>navigate to <em>Show hidden</em> (<i class=\"fas fa-eye-slash\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-show-hidden</span> icon)</li>\n        <li>add tags accordingly - <em>n-neighbours_10</em>: <code class=\"language-plaintext highlighter-rouge\">#n-neighbours_10</code> etc.</li>\n        <li>If you want to refresh your memory on how to add tags to datasets, have a look here:</li>\n      </ul>\n\n      <!--SNIPPET-->\n      <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-adding-a-tag\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-adding-a-tag\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Adding a tag</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <ol>   <li>Click on the dataset to expand it</li>   <li>Click on <strong>Add Tags</strong> <i class=\"fas fa-tags\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-tags</span></li>   <li>Add a tag  starting with <code class=\"language-plaintext highlighter-rouge\">#</code>     <ul>       <li>Tags starting with <code class=\"language-plaintext highlighter-rouge\">#</code> will be automatically propagated to the outputs of tools using this dataset.</li>     </ul>   </li>   <li>Press <kbd>Enter</kbd></li>   <li>Check that the tag appears below the dataset name</li> </ol> </blockquote>\n      <p><!--END_SNIPPET--></p>\n    </li>\n  </ol>\n\n</blockquote>\n\n<p>The output of the Parameter Iterator is the list of datasets. We will be working on dataset collections quite a lot, so if you want to gain more understanding of collection operations, visit the <a href=\"/training-material/topics/galaxy-interface/tutorials/collections/tutorial.html\">corresponding tutorial</a>.</p>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title> Derive kNN graph with iterated parameter </hands-on-title>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/ebi-gxa/scanpy_compute_graph/scanpy_compute_graph/1.8.1+galaxy9\" title=\"Scanpy ComputeGraph tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>Scanpy ComputeGraph</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 1.8.1+galaxy9)</span> with the following parameters:\n      <ul>\n        <li><i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> <em>“Input object in AnnData/Loom format”</em>: <code class=\"language-plaintext highlighter-rouge\">Scanpy RunPCA: AnnData object</code></li>\n        <li><em>“Use programme defaults”</em>: <i class=\"fas fa-toggle-on\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-toggle</span> <code class=\"language-plaintext highlighter-rouge\">No</code></li>\n        <li><em>“File with n_neighbours, use with parameter iterator. Overrides the n_neighbors setting”</em>:\n          <ul>\n            <li>Click on <i class=\"far fa-folder\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-collection</span> (<em>Dataset collection</em>)</li>\n            <li>Choose <code class=\"language-plaintext highlighter-rouge\">Parameter iterated - n-neighbours</code></li>\n          </ul>\n        </li>\n        <li><em>“Use the indicated representation”</em>: <code class=\"language-plaintext highlighter-rouge\">X_pca</code></li>\n        <li><em>“Number of PCs to use”</em>: <code class=\"language-plaintext highlighter-rouge\">20</code></li>\n      </ul>\n    </li>\n    <li><strong>Rename</strong> <i class=\"fas fa-pencil-alt\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-pencil</span> the resulting list of datasets: <code class=\"language-plaintext highlighter-rouge\">Scanpy ComputeGraph on collection X: Graph object AnnData (n-neighbours)</code> (you have to first click on the collection so that you see the datasets, and then rename it)</li>\n  </ol>\n\n</blockquote>\n\n<p>You should now see the output is also a collection. If you click on that, you will see Anndata files, differing only by the n-neighbour value.</p>\n\n<p>Now you have two options, either:</p>\n<ul>\n  <li>pick one of the generated output files and proceed to the next tool with another parameter iteration; or</li>\n  <li>continue with the current collection of datasets.</li>\n</ul>\n\n<p>We choose the second option as only then you will be able to see the effect of using different nearest neighbour values. However, the disadvantage of this option is that you have to select only one value for the subsequent parameters in the workflow in order to see the changes in the final plots.</p>\n\n<blockquote class=\"comment\">\n  <comment-title>Why only one Parameter Iteration at a time?</comment-title>\n  <p>Iterating the parameters within one tool will give you a list with X datasets: each dataset is the output with the given parameter value. However, if you want to use Parameter Iterator again within another tool, specifying Y parameter values, you <strong>will not</strong> get X x Y datasets as you might expect. Therefore you have to choose <strong>just one</strong> output file to be passed on to the next tool which will use Parameter Iterator again. Alternatively, you can use Parameter Iterator once and run the rest of the tools on dataset collection with just one parameter value.</p>\n</blockquote>\n\n<p>Where are we now in our workflow?</p>\n<figure id=\"figure-2\" style=\"max-width: 90%;\"><img src=\"../../images/scrna-casestudy_parameter-iterator/workflow_n-neighbours.png\" alt=\"Image showing the step we are at: after Scanpy RunPCA, already run Scanpy ComputeGraph, and before Scanpy RunTSNE, Scanpy RunUMAP, Scanpy FindCluster, Scanpy PlotEmbed. \" width=\"3360\" height=\"804\" loading=\"lazy\" /><a target=\"_blank\" href=\"../../images/scrna-casestudy_parameter-iterator/workflow_n-neighbours.png\" rel=\"noopener noreferrer\"><small>Open image in new tab</small></a><br /><br /><figcaption><span class=\"figcaption-prefix\"><strong>Figure 2</strong>:</span> We used the Parameter Iterator for the k nearest neighbours to derive the kNN graph. Now we’ll complete our small workflow to see the differences at the end.</figcaption></figure>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title> Complete the workflow </hands-on-title>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/ebi-gxa/scanpy_run_tsne/scanpy_run_tsne/1.8.1+galaxy9\" title=\"Scanpy RunTSNE tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>Scanpy RunTSNE</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 1.8.1+galaxy9)</span> with the following parameters:\n      <ul>\n        <li><i class=\"far fa-folder\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-collection</span> <em>“Input object in AnnData/Loom format”</em> (make sure you choose <em>Dataset collection</em>): <code class=\"language-plaintext highlighter-rouge\">Scanpy ComputeGraph on collection X: Graph object AnnData (n-neighbours)</code></li>\n        <li><em>“Use the indicated representation”</em>: <code class=\"language-plaintext highlighter-rouge\">X_pca</code></li>\n        <li><em>“Use programme defaults”</em>: <i class=\"fas fa-toggle-on\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-toggle</span> <code class=\"language-plaintext highlighter-rouge\">No</code></li>\n        <li><em>“The perplexity is related to the number of nearest neighbours, select a value between 5 and 50”</em>: <code class=\"language-plaintext highlighter-rouge\">30</code></li>\n      </ul>\n    </li>\n  </ol>\n\n  <p>1A. <strong>Rename</strong> <i class=\"fas fa-pencil-alt\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-pencil</span> the Anndata object collection output: <code class=\"language-plaintext highlighter-rouge\">Scanpy RunTSNE on collection X: tSNE object AnnData (n-neighbours)</code> (you have to first click on the collection so that you see the datasets, and then rename it)</p>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/ebi-gxa/scanpy_run_umap/scanpy_run_umap/1.8.1+galaxy9\" title=\"Scanpy RunUMAP tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>Scanpy RunUMAP</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 1.8.1+galaxy9)</span> with the following parameters:\n      <ul>\n        <li><i class=\"far fa-folder\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-collection</span> <em>“Input object in AnnData/Loom format”</em> (make sure you choose <em>Dataset collection</em>): <code class=\"language-plaintext highlighter-rouge\">Scanpy RunTSNE on collection X: tSNE object AnnData (n-neighbours)</code></li>\n        <li><em>“Use programme defaults”</em>: <i class=\"fas fa-toggle-on\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-toggle</span> <code class=\"language-plaintext highlighter-rouge\">Yes</code></li>\n      </ul>\n    </li>\n  </ol>\n\n  <p>2A. <strong>Rename</strong> <i class=\"fas fa-pencil-alt\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-pencil</span> the Anndata object collection output: <code class=\"language-plaintext highlighter-rouge\">Scanpy RunUMAP on collection X: UMAP object AnnData (n-neighbours)</code> (you have to first click on the collection so that you see the datasets, and then rename it)</p>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/ebi-gxa/scanpy_find_cluster/scanpy_find_cluster/1.8.1+galaxy9\" title=\"Scanpy FindCluster tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>Scanpy FindCluster</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 1.8.1+galaxy9)</span> with the following parameters:\n      <ul>\n        <li><i class=\"far fa-folder\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-collection</span> <em>“Input object in AnnData/Loom format”</em> (make sure you choose <em>Dataset collection</em>): <code class=\"language-plaintext highlighter-rouge\">Scanpy RunUMAP on collection X: UMAP object AnnData</code></li>\n        <li><em>“Use programme defaults”</em>: <i class=\"fas fa-toggle-on\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-toggle</span> <code class=\"language-plaintext highlighter-rouge\">No</code></li>\n        <li><em>“Resolution, high value for more and smaller clusters”</em>: <code class=\"language-plaintext highlighter-rouge\">0.6</code></li>\n      </ul>\n    </li>\n  </ol>\n\n  <p>3A. <strong>Rename</strong> <i class=\"fas fa-pencil-alt\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-pencil</span> the Anndata object collection output: <code class=\"language-plaintext highlighter-rouge\">Scanpy FindCluster on collection X: Clusters AnnData (n-neighbours)</code> (you have to first click on the collection so that you see the datasets, and then rename it)</p>\n\n</blockquote>\n\n<p>The differences will only appear in the UMAP embedding, so we’ll plot only them. However, when you run your own analysis, you might want to check if there are changes in other embeddings as well.</p>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title> Plot UMAP embedding </hands-on-title>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/ebi-gxa/scanpy_plot_embed/scanpy_plot_embed/1.8.1+galaxy9\" title=\"Scanpy PlotEmbed tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>Scanpy PlotEmbed</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 1.8.1+galaxy9)</span> with the following parameters:\n      <ul>\n        <li><i class=\"far fa-folder\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-collection</span> <em>“Input object in AnnData/Loom format”</em> (make sure you choose <em>Dataset collection</em>): <code class=\"language-plaintext highlighter-rouge\">Scanpy FindCluster on collection X: Clusters AnnData (n-neighbours)</code></li>\n        <li><em>“name of the embedding to plot”</em>: <code class=\"language-plaintext highlighter-rouge\">umap</code></li>\n        <li><em>“color by attributes, comma separated texts”</em>: <code class=\"language-plaintext highlighter-rouge\">louvain</code></li>\n        <li><em>“Use raw attributes if present”</em>: <code class=\"language-plaintext highlighter-rouge\">No</code></li>\n      </ul>\n    </li>\n  </ol>\n\n</blockquote>\n\n<p>If you click on the resulting collection you will see several plots. Click on <i class=\"far fa-eye\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-eye</span> to see how they differ. Galaxy’s <i class=\"fas fa-th\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-scratchbook</span> Window Manager, which you can enable (and disable again) from the menu bar can be very helpful for comparing multiple datasets.</p>\n\n<figure id=\"figure-3\" style=\"max-width: 90%;\"><img src=\"../../images/scrna-casestudy_parameter-iterator/n_neighbours.png\" alt=\"Eight graphs showing the differences between UMAP embeddings caused by different values of k nearest neighbours.\" width=\"2348\" height=\"1164\" loading=\"lazy\" /><a target=\"_blank\" href=\"../../images/scrna-casestudy_parameter-iterator/n_neighbours.png\" rel=\"noopener noreferrer\"><small>Open image in new tab</small></a><br /><br /><figcaption><span class=\"figcaption-prefix\"><strong>Figure 3</strong>:</span> Comparison of UMAP embedding with different values of k nearest neighbours, perplexity set to 30 and resolution to 0.6.</figcaption></figure>\n\n<p>If you compare the UMAP graphs, you can see the differences that were caused by changing the value of k nearestneighbours. Relying on your biological knowledge, you can now choose which parameter value works best and use it for further analysis.</p>\n\n<p>We will go forward with k value equal to 15. But hang on, we’ve been working on a collection and not a single dataset! How can we access that one dataset with the n-neighbour = 15?</p>\n\n<p>Here is the answer: The datasets that are included in the collections can be accessed separately if you go to your history and click on <em>Show hidden</em> (<i class=\"fas fa-eye-slash\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-show-hidden</span> icon). You can bring each individual dataset to the visible and active datasets by clicking <em>Unhide</em>.</p>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title> Unhide the dataset of interest </hands-on-title>\n  <ol>\n    <li>In <em>Show hidden</em> find the dataset <code class=\"language-plaintext highlighter-rouge\">Scanpy ComputeGraph on data X and data Y: Graph object AnnData</code> with the tag <code class=\"language-plaintext highlighter-rouge\">#n-neighbours_15</code> (or any value that you want to go forward with).</li>\n    <li>Click on <em>Unhide</em></li>\n    <li>Your chosen dataset is now visible amongst the active datasets in your history!</li>\n  </ol>\n\n</blockquote>\n\n<h1 id=\"perplexity-for-scanpy-runtsne-tool\">Perplexity (for <strong>Scanpy RunTSNE</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span>)</h1>\n\n<p>Let’s have another look at our wee workflow.</p>\n<figure id=\"figure-4\" style=\"max-width: 90%;\"><img src=\"../../images/scrna-casestudy_parameter-iterator/workflow_perplexity.png\" alt=\"Image showing the step we are at: after Scanpy RunPCA and Scanpy ComputeGraph from which we will take one dataset to pass on to Scanpy RunTSNE with Parameter Iterator.\" width=\"3360\" height=\"804\" loading=\"lazy\" /><a target=\"_blank\" href=\"../../images/scrna-casestudy_parameter-iterator/workflow_perplexity.png\" rel=\"noopener noreferrer\"><small>Open image in new tab</small></a><br /><br /><figcaption><span class=\"figcaption-prefix\"><strong>Figure 4</strong>:</span> We will take one dataset from the Scanpy ComputeGraph as the input to Scanpy RunTSNE and use the Parameter Iterator with the perplexity parameter.</figcaption></figure>\n\n<p>The next tool in our workflow is Scanpy RunTSNE, which contains the perplexity parameter. Although the tool description says that this value should be an integer, we tested it with float values and it works. Therefore, you can use ‘Step increase values to be iterated’. Keep in mind that perplexity should take values between 5 and 50. Let’s run the Parameter Iterator again.</p>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title> Set your values in Parameter Iterator </hands-on-title>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/ebi-gxa/scanpy_parameter_iterator/scanpy_parameter_iterator/0.0.1+galaxy9\" title=\"Scanpy ParameterIterator tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>Scanpy ParameterIterator</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 0.0.1+galaxy9)</span> with the following parameters:\n      <ul>\n        <li><em>“Parameter type”</em>: <code class=\"language-plaintext highlighter-rouge\">perplexity</code></li>\n        <li><em>“Choose the format of the input values”</em>: <code class=\"language-plaintext highlighter-rouge\">Step increase values to be iterated</code></li>\n        <li><em>“Starting value”</em>: <code class=\"language-plaintext highlighter-rouge\">15</code></li>\n        <li><em>“Step”</em>: <code class=\"language-plaintext highlighter-rouge\">5</code></li>\n        <li><em>“Ending value”</em>: <code class=\"language-plaintext highlighter-rouge\">45</code></li>\n      </ul>\n    </li>\n    <li>\n      <p><strong>Rename</strong> <i class=\"fas fa-pencil-alt\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-pencil</span> the resulting list of datasets: <code class=\"language-plaintext highlighter-rouge\">Parameter iterated - perplexity</code> (you have to first click on the collection so that you see the datasets, and then rename it)</p>\n    </li>\n    <li><strong>Tag</strong> <i class=\"fas fa-tags\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-tags</span> each dataset with its corresponding value:\n      <ul>\n        <li>navigate to <em>Show hidden</em> (<i class=\"fas fa-eye-slash\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-show-hidden</span> icon)</li>\n        <li>add tags accordingly - <em>perplexity_15</em>: <code class=\"language-plaintext highlighter-rouge\">#perplexity_15</code> etc.</li>\n        <li>If you want to refresh your memory on how to add tags to datasets, have a look here:</li>\n      </ul>\n\n      <!--SNIPPET-->\n      <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-adding-a-tag-1\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-adding-a-tag-1\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Adding a tag</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <ol>   <li>Click on the dataset to expand it</li>   <li>Click on <strong>Add Tags</strong> <i class=\"fas fa-tags\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-tags</span></li>   <li>Add a tag  starting with <code class=\"language-plaintext highlighter-rouge\">#</code>     <ul>       <li>Tags starting with <code class=\"language-plaintext highlighter-rouge\">#</code> will be automatically propagated to the outputs of tools using this dataset.</li>     </ul>   </li>   <li>Press <kbd>Enter</kbd></li>   <li>Check that the tag appears below the dataset name</li> </ol> </blockquote>\n      <p><!--END_SNIPPET--></p>\n    </li>\n  </ol>\n\n</blockquote>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title> RunTSNE with iterated parameter </hands-on-title>\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/ebi-gxa/scanpy_run_tsne/scanpy_run_tsne/1.8.1+galaxy9\" title=\"Scanpy RunTSNE tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>Scanpy RunTSNE</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 1.8.1+galaxy9)</span> with the following parameters:\n      <ul>\n        <li><i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> <em>“Input object in AnnData/Loom format”</em>: <code class=\"language-plaintext highlighter-rouge\">Scanpy ComputeGraph on data X and data Y: Graph object AnnData</code> with the tag <code class=\"language-plaintext highlighter-rouge\">#n-neighbours_15</code></li>\n        <li><em>“Use the indicated representation”</em>: <code class=\"language-plaintext highlighter-rouge\">X_pca</code></li>\n        <li><em>“Use programme defaults”</em>: <i class=\"fas fa-toggle-on\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-toggle</span> <code class=\"language-plaintext highlighter-rouge\">No</code></li>\n        <li><em>“The perplexity is related to the number of nearest neighbours”</em>:\n          <ul>\n            <li>Click on <i class=\"far fa-folder\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-collection</span> (<em>Dataset collection</em>)</li>\n            <li>Choose <code class=\"language-plaintext highlighter-rouge\">Parameter iterated - perplexity</code></li>\n          </ul>\n        </li>\n      </ul>\n    </li>\n    <li><strong>Rename</strong> <i class=\"fas fa-pencil-alt\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-pencil</span> the Anndata object collection output: <code class=\"language-plaintext highlighter-rouge\">Scanpy RunTSNE on collection X: tSNE object AnnData (perplexity)</code> (you have to first click on the collection so that you see the datasets, and then rename it)</li>\n  </ol>\n\n</blockquote>\n\n<p>Changing the value of perplexity will only affect the tSNE graphs, so we can complete the workflow and compare the tSNE plots to choose the best value for further analysis.</p>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title> Complete the workflow </hands-on-title>\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/ebi-gxa/scanpy_run_umap/scanpy_run_umap/1.8.1+galaxy9\" title=\"Scanpy RunUMAP tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>Scanpy RunUMAP</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 1.8.1+galaxy9)</span> with the following parameters:\n      <ul>\n        <li><i class=\"far fa-folder\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-collection</span> <em>“Input object in AnnData/Loom format”</em> (make sure you choose <em>Dataset collection</em>): <code class=\"language-plaintext highlighter-rouge\">Scanpy RunTSNE on collection X: tSNE object AnnData (perplexity)</code></li>\n        <li><em>“Use programme defaults”</em>: <i class=\"fas fa-toggle-on\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-toggle</span> <code class=\"language-plaintext highlighter-rouge\">Yes</code></li>\n      </ul>\n    </li>\n  </ol>\n\n  <p>1A. <strong>Rename</strong> <i class=\"fas fa-pencil-alt\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-pencil</span> the Anndata object collection output: <code class=\"language-plaintext highlighter-rouge\">Scanpy RunUMAP on collection X: UMAP object AnnData (perplexity)</code> (you have to first click on the collection so that you see the datasets, and then rename it)</p>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/ebi-gxa/scanpy_find_cluster/scanpy_find_cluster/1.8.1+galaxy9\" title=\"Scanpy FindCluster tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>Scanpy FindCluster</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 1.8.1+galaxy9)</span> with the following parameters:\n      <ul>\n        <li><i class=\"far fa-folder\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-collection</span> <em>“Input object in AnnData/Loom format”</em> (make sure you choose <em>Dataset collection</em>): <code class=\"language-plaintext highlighter-rouge\">Scanpy RunUMAP on collection X: UMAP object AnnData (perplexity)</code></li>\n        <li><em>“Use programme defaults”</em>: <i class=\"fas fa-toggle-on\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-toggle</span> <code class=\"language-plaintext highlighter-rouge\">No</code></li>\n        <li><em>“Resolution, high value for more and smaller clusters”</em>: <code class=\"language-plaintext highlighter-rouge\">0.6</code></li>\n      </ul>\n    </li>\n  </ol>\n\n  <p>3A. <strong>Rename</strong> <i class=\"fas fa-pencil-alt\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-pencil</span> the Anndata object collection output: <code class=\"language-plaintext highlighter-rouge\">Scanpy FindCluster on collection X: Clusters AnnData (perplexity)</code> (you have to first click on the collection so that you see the datasets, and then rename it)</p>\n\n</blockquote>\n\n<blockquote class=\"warning\">\n  <warning-title></warning-title>\n  <p>In <em>Use programme defaults</em> you can specify <em>Additional suffix to the name of the slot to save the embedding</em> – if it’s included, PERPLEXITY will be substituted with the value of the perplexity setting. However, in that case you will get an error when using <strong>Scanpy PlotEmbed</strong>: due to the value included in the entry name, the tool will not recognise the correct embedding. Therefore, we leave that box unfilled even though it would make it easier to differentiate between datasets.</p>\n</blockquote>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title> Plot tSNE embedding </hands-on-title>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/ebi-gxa/scanpy_plot_embed/scanpy_plot_embed/1.8.1+galaxy9\" title=\"Scanpy PlotEmbed tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>Scanpy PlotEmbed</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 1.8.1+galaxy9)</span> with the following parameters:\n      <ul>\n        <li><i class=\"far fa-folder\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-collection</span> <em>“Input object in AnnData/Loom format”</em> (make sure you choose <em>Dataset collection</em>): <code class=\"language-plaintext highlighter-rouge\">Scanpy FindCluster on collection X: Clusters AnnData (perplexity)</code></li>\n        <li><em>“name of the embedding to plot”</em>: <code class=\"language-plaintext highlighter-rouge\">tsne</code></li>\n        <li><em>“color by attributes, comma separated texts”</em>: <code class=\"language-plaintext highlighter-rouge\">louvain</code></li>\n        <li><em>“Use raw attributes if present”</em>: <code class=\"language-plaintext highlighter-rouge\">No</code></li>\n      </ul>\n    </li>\n  </ol>\n\n</blockquote>\n\n<p>Can you see those differences?</p>\n<figure id=\"figure-5\" style=\"max-width: 90%;\"><img src=\"../../images/scrna-casestudy_parameter-iterator/perplexity.png\" alt=\"Graphs showing the differences between tSNE embeddings caused by different values of perplexity.\" width=\"2338\" height=\"1170\" loading=\"lazy\" /><a target=\"_blank\" href=\"../../images/scrna-casestudy_parameter-iterator/perplexity.png\" rel=\"noopener noreferrer\"><small>Open image in new tab</small></a><br /><br /><figcaption><span class=\"figcaption-prefix\"><strong>Figure 5</strong>:</span> Comparison of tSNE  embedding with different values of perplexity, k nearest neighbours set to 15 and resolution to 0.6.</figcaption></figure>\n\n<p>What do you think about those plots? Which value would you choose? Perplexity is probably the least intuitive or consistently functioning parameter, so feel free to learn more from <a href=\"https://apiumhub.com/tech-blog-barcelona/dimensionality-reduction-tsne/#:~:text=.tensorflow.org%2F-,Perplexity,are%20between%205%20and%2050.\">this nifty blog post</a>. We will go forward with a perplexity value equal to 30.</p>\n\n<h1 id=\"resolution-for-scanpy-findcluster-tool\">Resolution (for <strong>Scanpy FindCluster</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span>)</h1>\n\n<p>Where is <strong>Scanpy FindCluster</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span> in our workflow?</p>\n<figure id=\"figure-6\" style=\"max-width: 90%;\"><img src=\"../../images/scrna-casestudy_parameter-iterator/workflow_resolution.png\" alt=\"Image showing the step we are at: we have chosen values for Scanpy ComputeGraph and Scanpy RunTSNE, then proceeded to Scanpy RunUMAP to get to Scanpy FindCluster.\" width=\"3360\" height=\"804\" loading=\"lazy\" /><a target=\"_blank\" href=\"../../images/scrna-casestudy_parameter-iterator/workflow_resolution.png\" rel=\"noopener noreferrer\"><small>Open image in new tab</small></a><br /><br /><figcaption><span class=\"figcaption-prefix\"><strong>Figure 6</strong>:</span> We have chosen values for Scanpy ComputeGraph and Scanpy RunTSNE, then proceeded to Scanpy RunUMAP to get to Scanpy FindCluster where we can iterate the resolution parameter.</figcaption></figure>\n\n<p>The input data for the <strong>Scanpy FindCluster</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span> is the output of <strong>Scanpy RunUMAP</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span>, so let’s get this single dataset with the parameter values (from previous tools) of our choice, that is n-neighbours=15 and perplexity=30.</p>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title> Unhide the dataset of interest </hands-on-title>\n  <ol>\n    <li>In <em>Show hidden</em> find the dataset <code class=\"language-plaintext highlighter-rouge\">Scanpy RunUMAP on data X: UMAP object AnnData</code> with the tags <code class=\"language-plaintext highlighter-rouge\">#n-neighbours_15</code> and <code class=\"language-plaintext highlighter-rouge\">#perplexity_30</code> (or any value that you want to go forward with).</li>\n    <li>Click on <em>Unhide</em></li>\n    <li>Your chosen dataset is now visible amongst the active datasets in your history!</li>\n  </ol>\n\n</blockquote>\n\n<p>The last tool that we can use Parameter Iterator for is <strong>Scanpy FindCluster</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span>. We will iterate over the resolution values. In this case, those values can be floats, so you can use either ‘List of all parameter values to be iterated’ or ‘Step increase values to be iterated’. Keep in mind that when it comes to the resolution, a high value means more and smaller clusters.</p>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title> Set your values in Parameter Iterator </hands-on-title>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/ebi-gxa/scanpy_parameter_iterator/scanpy_parameter_iterator/0.0.1+galaxy9\" title=\"Scanpy ParameterIterator tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>Scanpy ParameterIterator</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 0.0.1+galaxy9)</span> with the following parameters:\n      <ul>\n        <li><em>“Parameter type”</em>: <code class=\"language-plaintext highlighter-rouge\">resolution</code></li>\n        <li><em>“Choose the format of the input values”</em>: <code class=\"language-plaintext highlighter-rouge\">Step increase values to be iterated</code></li>\n        <li><em>“Starting value”</em>: <code class=\"language-plaintext highlighter-rouge\">0.2</code></li>\n        <li><em>“Step”</em>: <code class=\"language-plaintext highlighter-rouge\">0.2</code></li>\n        <li><em>“Ending value”</em>: <code class=\"language-plaintext highlighter-rouge\">1.4</code></li>\n      </ul>\n    </li>\n    <li>\n      <p><strong>Rename</strong> <i class=\"fas fa-pencil-alt\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-pencil</span> the resulting list of datasets: <code class=\"language-plaintext highlighter-rouge\">Parameter iterated - resolution</code> (you have to first click on the collection so that you see the datasets, and then rename it)</p>\n    </li>\n    <li><strong>Tag</strong> <i class=\"fas fa-tags\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-tags</span> each dataset with its corresponding value:\n      <ul>\n        <li>navigate to <em>Show hidden</em> (<i class=\"fas fa-eye-slash\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-show-hidden</span> icon)</li>\n        <li>add tags accordingly - <em>resolution_0.2</em>: <code class=\"language-plaintext highlighter-rouge\">#resolution_0.2</code> etc.</li>\n        <li>If you want to refresh your memory on how to add tags to datasets, have a look here:</li>\n      </ul>\n\n      <!--SNIPPET-->\n      <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-adding-a-tag-2\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-adding-a-tag-2\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Adding a tag</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <ol>   <li>Click on the dataset to expand it</li>   <li>Click on <strong>Add Tags</strong> <i class=\"fas fa-tags\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-tags</span></li>   <li>Add a tag  starting with <code class=\"language-plaintext highlighter-rouge\">#</code>     <ul>       <li>Tags starting with <code class=\"language-plaintext highlighter-rouge\">#</code> will be automatically propagated to the outputs of tools using this dataset.</li>     </ul>   </li>   <li>Press <kbd>Enter</kbd></li>   <li>Check that the tag appears below the dataset name</li> </ol> </blockquote>\n      <p><!--END_SNIPPET--></p>\n    </li>\n  </ol>\n\n</blockquote>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title> FindCluster with iterated parameter </hands-on-title>\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/ebi-gxa/scanpy_find_cluster/scanpy_find_cluster/1.8.1+galaxy9\" title=\"Scanpy FindCluster tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>Scanpy FindCluster</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 1.8.1+galaxy9)</span> with the following parameters:\n      <ul>\n        <li><i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> <em>“Input object in AnnData/Loom format”</em>: <code class=\"language-plaintext highlighter-rouge\">Scanpy RunUMAP on data X: UMAP object AnnData</code> with the tags <code class=\"language-plaintext highlighter-rouge\">#n-neighbours_15</code> and <code class=\"language-plaintext highlighter-rouge\">#perplexity_30</code></li>\n      </ul>\n      <ul>\n        <li><em>“Use programme defaults”</em>: <i class=\"fas fa-toggle-on\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-toggle</span> <code class=\"language-plaintext highlighter-rouge\">No</code></li>\n        <li><em>“File with resolution, use with parameter iterator. Overrides the resolution setting”</em>:\n          <ul>\n            <li>Click on <i class=\"far fa-folder\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-collection</span> (<em>Dataset collection</em>)</li>\n            <li>Choose <code class=\"language-plaintext highlighter-rouge\">Parameter iterated - resolution</code></li>\n          </ul>\n        </li>\n      </ul>\n    </li>\n    <li><strong>Rename</strong> <i class=\"fas fa-pencil-alt\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-pencil</span> the Anndata object collection output: <code class=\"language-plaintext highlighter-rouge\">Scanpy FindCluster on collection X: Clusters AnnData (resolution)</code> (you have to first click on the collection so that you see the datasets, and then rename it)</li>\n  </ol>\n\n</blockquote>\n\n<p>You can see the effect of resolution parameter on all embeddings: UMAP, tSNE and PCA so you can plot them all and compare the granularity of the clusters. It is also useful to see how the equal increments affect the clustering and what is the rate of change of the granularity.</p>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title> Plot the embeddings </hands-on-title>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/ebi-gxa/scanpy_plot_embed/scanpy_plot_embed/1.8.1+galaxy9\" title=\"Scanpy PlotEmbed tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>Scanpy PlotEmbed</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 1.8.1+galaxy9)</span> with the following parameters:\n      <ul>\n        <li><i class=\"far fa-folder\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-collection</span> <em>“Input object in AnnData/Loom format”</em> (make sure you choose <em>Dataset collection</em>): <code class=\"language-plaintext highlighter-rouge\">Scanpy FindCluster on collection X: Clusters AnnData (resolution)</code></li>\n        <li><em>“name of the embedding to plot”</em>: <code class=\"language-plaintext highlighter-rouge\">pca</code></li>\n        <li><em>“color by attributes, comma separated texts”</em>: <code class=\"language-plaintext highlighter-rouge\">louvain</code></li>\n        <li><em>“Use raw attributes if present”</em>: <code class=\"language-plaintext highlighter-rouge\">No</code>\n<em>You can re-run <i class=\"fas fa-redo\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-refresh</span> the same tool again, but change <code class=\"language-plaintext highlighter-rouge\">pca</code> to <code class=\"language-plaintext highlighter-rouge\">tsne</code> and then finally to <code class=\"language-plaintext highlighter-rouge\">umap</code> in order to skip the following two steps.</em></li>\n      </ul>\n    </li>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/ebi-gxa/scanpy_plot_embed/scanpy_plot_embed/1.8.1+galaxy9\" title=\"Scanpy PlotEmbed tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>Scanpy PlotEmbed</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 1.8.1+galaxy9)</span> with the following parameters:\n      <ul>\n        <li><i class=\"far fa-folder\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-collection</span> <em>“Input object in AnnData/Loom format”</em> (make sure you choose <em>Dataset collection</em>): <code class=\"language-plaintext highlighter-rouge\">Scanpy FindCluster on collection X: Clusters AnnData (resolution)</code></li>\n        <li><em>“name of the embedding to plot”</em>: <code class=\"language-plaintext highlighter-rouge\">tsne</code></li>\n        <li><em>“color by attributes, comma separated texts”</em>: <code class=\"language-plaintext highlighter-rouge\">louvain</code></li>\n        <li><em>“Use raw attributes if present”</em>: <code class=\"language-plaintext highlighter-rouge\">No</code></li>\n      </ul>\n    </li>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/ebi-gxa/scanpy_plot_embed/scanpy_plot_embed/1.8.1+galaxy9\" title=\"Scanpy PlotEmbed tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>Scanpy PlotEmbed</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 1.8.1+galaxy9)</span> with the following parameters:\n      <ul>\n        <li><i class=\"far fa-folder\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-collection</span> <em>“Input object in AnnData/Loom format”</em> (make sure you choose <em>Dataset collection</em>): <code class=\"language-plaintext highlighter-rouge\">Scanpy FindCluster on collection X: Clusters AnnData (resolution)</code></li>\n        <li><em>“name of the embedding to plot”</em>: <code class=\"language-plaintext highlighter-rouge\">umap</code></li>\n        <li><em>“color by attributes, comma separated texts”</em>: <code class=\"language-plaintext highlighter-rouge\">louvain</code></li>\n        <li><em>“Use raw attributes if present”</em>: <code class=\"language-plaintext highlighter-rouge\">No</code></li>\n      </ul>\n    </li>\n  </ol>\n</blockquote>\n\n<p>That’s the last tool in our workflow which uses Parameter Iterator! Let’s have a final look at the generated plots.</p>\n\n<figure id=\"figure-7\" style=\"max-width: 90%;\"><img src=\"../../images/scrna-casestudy_parameter-iterator/resolution_pca.png\" alt=\"Graphs showing the differences between PCA embeddings caused by different values of resolution.\" width=\"2326\" height=\"1207\" loading=\"lazy\" /><a target=\"_blank\" href=\"../../images/scrna-casestudy_parameter-iterator/resolution_pca.png\" rel=\"noopener noreferrer\"><small>Open image in new tab</small></a><br /><br /><figcaption><span class=\"figcaption-prefix\"><strong>Figure 7</strong>:</span> Comparison of PCA embedding with different values of resolution, with n-neighbours set to 15 and perplexity to 30.</figcaption></figure>\n\n<figure id=\"figure-8\" style=\"max-width: 90%;\"><img src=\"../../images/scrna-casestudy_parameter-iterator/resolution_tsne.png\" alt=\"Graphs showing the differences between tSNE embeddings caused by different values of resolution.\" width=\"2316\" height=\"1208\" loading=\"lazy\" /><a target=\"_blank\" href=\"../../images/scrna-casestudy_parameter-iterator/resolution_tsne.png\" rel=\"noopener noreferrer\"><small>Open image in new tab</small></a><br /><br /><figcaption><span class=\"figcaption-prefix\"><strong>Figure 8</strong>:</span> Comparison of tSNE embedding with different values of resolution, with n-neighbours set to 15 and perplexity to 30.</figcaption></figure>\n\n<figure id=\"figure-9\" style=\"max-width: 90%;\"><img src=\"../../images/scrna-casestudy_parameter-iterator/resolution_umap.png\" alt=\"Graphs showing the differences between UMAP embeddings caused by different values of resolution.\" width=\"2326\" height=\"1216\" loading=\"lazy\" /><a target=\"_blank\" href=\"../../images/scrna-casestudy_parameter-iterator/resolution_umap.png\" rel=\"noopener noreferrer\"><small>Open image in new tab</small></a><br /><br /><figcaption><span class=\"figcaption-prefix\"><strong>Figure 9</strong>:</span> Comparison of UMAP embedding with different values of resolution, with n-neighbours set to 15 and perplexity to 30.</figcaption></figure>\n\n<blockquote class=\"comment\">\n  <comment-title></comment-title>\n  <p>Still not sure which value works best? For more explanation and in-depth analysis, please read through <a href=\"/training-material/topics/single-cell/tutorials/scrna-case_basic-pipeline/tutorial.html\">this tutorial</a>. Hopefully it will give you more insight into interpretation of the resulting plots.</p>\n</blockquote>\n\n<h1 id=\"additional-steps\">Additional steps</h1>\n<ul>\n  <li>\n    <p>It may happen that some of the values you choose will give an error, but some will work fine. In that case, you can use <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span> <strong>Filter failed datasets</strong> tool to remove datasets with errors from a collection.</p>\n  </li>\n  <li>\n    <p>If you still haven’t found an answer that would help you with the parameter iteration in your own analysis, check out <a href=\"https://usegalaxy.eu/published/workflow?id=8f677efac7100097\">another workflow</a> which has some extra steps, not directly related to our analysis. But it might contain steps that would be helpful for you.</p>\n  </li>\n</ul>\n\n<h1 id=\"conclusion\">Conclusion</h1>\n<p>You might want to compare your results with this <a href=\"https://usegalaxy.eu/u/j.jakiela/h/scanpy-parameter-iterator-updated\">control history</a>, or check out the <a href=\"https://usegalaxy.eu/u/j.jakiela/w/scanpy-parameter-iterator-workflow\">workflow</a> for this tutorial. You can also continue to analyse this data by returning to the <a href=\"/training-material/topics/single-cell/tutorials/scrna-case_basic-pipeline/tutorial.html\">Filter, Plot and Explore</a> tutorial.</p>\n\n<p><i class=\"far fa-thumbs-up\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">congratulations</span> You have finished the tutorial! You have learned how to use the Parameter Iterator with the nearest neighbours, perplexity and resolution parameters. You also compared multiple outputs resulting from the analysis using different values at three different steps (Scanpy ComputeGraph, Scanpy RunTSNE and Scanpy FindCluster). Hopefully this tool will help you more quickly assess parameter values, ultimately helping you choose values that both confirm prior knowledge as well as offer new insights on biological data.</p>\n\n<!--SNIPPET-->\n<blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-how-can-i-talk-with-other-users\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-how-can-i-talk-with-other-users\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: How can I talk with other users?</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <p><i class=\"far fa-comments\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">feedback</span> To discuss with like-minded scientists, join our <a href=\"http://gxy.io/gtn-slack\">Galaxy Training Network chatspace in Slack</a> and discuss with fellow users of Galaxy single cell analysis tools on <a href=\"https://gtnsmrgsbord.slack.com/archives/C06PBRR40D7\">#single-cell-users</a></p>   <p>We also post new tutorials / workflows there from time to time, as well as any other news.</p>   <p><i class=\"far fa-hand-point-right\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">point-right</span> If you’d like to contribute ideas, requests or feedback as part of the wider community building single-cell and spatial resources within Galaxy, you can also join our <a href=\"https://galaxyproject.org/community/sig/singlecell/\">Single cell &amp; sPatial Omics Community of Practice</a>.</p>   <p><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span> You can request tools here on our <a href=\"https://docs.google.com/spreadsheets/d/15hqgqA-RMDhXR-ylKhRF-Dab9Ij2arYSKiEVoPl2df4/edit?usp=sharing\">Single Cell and Spatial Omics Community Tool Request Spreadsheet</a></p> </blockquote>\n<p><!--END_SNIPPET--></p>\n"],"ref_slides":[],"hands_on":true,"slides":false,"mod_date":"2023-12-04 11:47:53 +0000","pub_date":"2023-07-19 06:47:23 +0000","version":27,"workflows":[{"workflow":"Scanpy-Parameter-Iterator-workflow-full.ga","tests":true,"url":"https://training.galaxyproject.org/training-material/topics/single-cell/tutorials/scanpy_parameter_iterator/workflows/Scanpy-Parameter-Iterator-workflow-full.ga","path":"topics/single-cell/tutorials/scanpy_parameter_iterator/workflows/Scanpy-Parameter-Iterator-workflow-full.ga","wfid":"single-cell-scanpy_parameter_iterator","wfname":"scanpy-parameter-iterator-workflow-full","trs_endpoint":"https://training.galaxyproject.org/training-material/api/ga4gh/trs/v2/tools/single-cell-scanpy_parameter_iterator/versions/scanpy-parameter-iterator-workflow-full","license":"CC-BY-4.0","creators":[{"class":"Person","identifier":"0009-0001-2017-8805","name":"Julia Jakiela"}],"name":"Scanpy Parameter Iterator workflow full (imported from URL)","title":"Scanpy Parameter Iterator workflow full (imported from URL)","test_results":null,"modified":"2024-06-17 13:07:06 +0000","mermaid":"flowchart TD\n  0[\"ℹ️ Input Dataset\\nScanpy RunPCA: AnnData object\"];\n  style 0 stroke:#2c3143,stroke-width:4px;\n  1[\"ParameterIterator n-neighbors\"];\n  2[\"ℹ️ Input Dataset\\nScanpy ComputeGraph on data X and data Y: Graph object AnnData\"];\n  style 2 stroke:#2c3143,stroke-width:4px;\n  3[\"ParameterIterator perplexity\"];\n  4[\"ℹ️ Input Dataset\\nScanpy RunUMAP on data X: UMAP object AnnData\"];\n  style 4 stroke:#2c3143,stroke-width:4px;\n  5[\"ParameterIterator resolution\"];\n  6[\"Scanpy ComputeGraph\"];\n  0 -->|output| 6;\n  1 -->|parameter_iteration| 6;\n  1e60c7cd-7e02-450f-a403-f3df1e548757[\"Output\\nScanpy ComputeGraph on collection X: Graph object AnnData (n-neighbours)\"];\n  6 --> 1e60c7cd-7e02-450f-a403-f3df1e548757;\n  style 1e60c7cd-7e02-450f-a403-f3df1e548757 stroke:#2c3143,stroke-width:4px;\n  7[\"Scanpy RunTSNE\"];\n  2 -->|output| 7;\n  3 -->|parameter_iteration| 7;\n  15143fea-5e2b-4b25-b5d1-0726da910f67[\"Output\\nScanpy RunTSNE on collection X: tSNE object AnnData (perplexity)\"];\n  7 --> 15143fea-5e2b-4b25-b5d1-0726da910f67;\n  style 15143fea-5e2b-4b25-b5d1-0726da910f67 stroke:#2c3143,stroke-width:4px;\n  8[\"Scanpy FindCluster\"];\n  4 -->|output| 8;\n  5 -->|parameter_iteration| 8;\n  6fdddfe7-c4da-4421-86a0-9819ce4c769c[\"Output\\nScanpy FindCluster on collection X: Clusters AnnData (resolution)\"];\n  8 --> 6fdddfe7-c4da-4421-86a0-9819ce4c769c;\n  style 6fdddfe7-c4da-4421-86a0-9819ce4c769c stroke:#2c3143,stroke-width:4px;\n  9[\"Scanpy RunTSNE\"];\n  6 -->|output_h5ad| 9;\n  7c988247-b167-4733-859f-fcd582f91959[\"Output\\nScanpy RunTSNE on collection X: tSNE object AnnData (n-neighbours)\"];\n  9 --> 7c988247-b167-4733-859f-fcd582f91959;\n  style 7c988247-b167-4733-859f-fcd582f91959 stroke:#2c3143,stroke-width:4px;\n  10[\"Scanpy RunUMAP\"];\n  7 -->|output_h5ad| 10;\n  1f5abfa2-845c-4763-9f87-e4b167aa7bc8[\"Output\\nScanpy RunUMAP on collection X: UMAP object AnnData (perplexity)\"];\n  10 --> 1f5abfa2-845c-4763-9f87-e4b167aa7bc8;\n  style 1f5abfa2-845c-4763-9f87-e4b167aa7bc8 stroke:#2c3143,stroke-width:4px;\n  11[\"Scanpy PlotEmbed\"];\n  8 -->|output_h5ad| 11;\n  99185d1e-047f-47f2-9081-07506e1c17df[\"Output\\nresolution_pca_plots\"];\n  11 --> 99185d1e-047f-47f2-9081-07506e1c17df;\n  style 99185d1e-047f-47f2-9081-07506e1c17df stroke:#2c3143,stroke-width:4px;\n  12[\"Scanpy PlotEmbed\"];\n  8 -->|output_h5ad| 12;\n  65d7b619-8659-4008-9e56-db21fda6ce8c[\"Output\\nresolution_umap_plots\"];\n  12 --> 65d7b619-8659-4008-9e56-db21fda6ce8c;\n  style 65d7b619-8659-4008-9e56-db21fda6ce8c stroke:#2c3143,stroke-width:4px;\n  13[\"Scanpy PlotEmbed\"];\n  8 -->|output_h5ad| 13;\n  bdcaf837-5fc4-4024-a87a-eabfa0110127[\"Output\\nresolution_tsne_plots\"];\n  13 --> bdcaf837-5fc4-4024-a87a-eabfa0110127;\n  style bdcaf837-5fc4-4024-a87a-eabfa0110127 stroke:#2c3143,stroke-width:4px;\n  14[\"Scanpy RunUMAP\"];\n  9 -->|output_h5ad| 14;\n  8a0b3d69-e7df-4977-b8eb-ec478b914a26[\"Output\\nScanpy RunUMAP on collection X: UMAP object AnnData (n-neighbours)\"];\n  14 --> 8a0b3d69-e7df-4977-b8eb-ec478b914a26;\n  style 8a0b3d69-e7df-4977-b8eb-ec478b914a26 stroke:#2c3143,stroke-width:4px;\n  15[\"Scanpy FindCluster\"];\n  10 -->|output_h5ad| 15;\n  c2e0d48f-9f0e-4452-8fb5-e78420578c65[\"Output\\nScanpy FindCluster on collection X: Clusters AnnData (perplexity)\"];\n  15 --> c2e0d48f-9f0e-4452-8fb5-e78420578c65;\n  style c2e0d48f-9f0e-4452-8fb5-e78420578c65 stroke:#2c3143,stroke-width:4px;\n  16[\"Scanpy FindCluster\"];\n  14 -->|output_h5ad| 16;\n  c952b32e-99d5-4b94-a6d7-be59439c4dca[\"Output\\nScanpy FindCluster on collection X: Clusters AnnData (n-neighbours)\"];\n  16 --> c952b32e-99d5-4b94-a6d7-be59439c4dca;\n  style c952b32e-99d5-4b94-a6d7-be59439c4dca stroke:#2c3143,stroke-width:4px;\n  17[\"Scanpy PlotEmbed\"];\n  15 -->|output_h5ad| 17;\n  44c0ec07-b64e-428f-9254-5217e8041416[\"Output\\nperplexity_plots\"];\n  17 --> 44c0ec07-b64e-428f-9254-5217e8041416;\n  style 44c0ec07-b64e-428f-9254-5217e8041416 stroke:#2c3143,stroke-width:4px;\n  18[\"Scanpy PlotEmbed\"];\n  16 -->|output_h5ad| 18;\n  0b30f573-8ebd-4582-9bcd-58ba5c778658[\"Output\\nn-neighbors_plots\"];\n  18 --> 0b30f573-8ebd-4582-9bcd-58ba5c778658;\n  style 0b30f573-8ebd-4582-9bcd-58ba5c778658 stroke:#2c3143,stroke-width:4px;"}],"api":"https://training.galaxyproject.org/training-material/api/topics/single-cell/tutorials/scanpy_parameter_iterator/tutorial.json","tools":["toolshed.g2.bx.psu.edu/repos/ebi-gxa/scanpy_compute_graph/scanpy_compute_graph/1.8.1+galaxy9","toolshed.g2.bx.psu.edu/repos/ebi-gxa/scanpy_find_cluster/scanpy_find_cluster/1.8.1+galaxy9","toolshed.g2.bx.psu.edu/repos/ebi-gxa/scanpy_parameter_iterator/scanpy_parameter_iterator/0.0.1+galaxy9","toolshed.g2.bx.psu.edu/repos/ebi-gxa/scanpy_plot_embed/scanpy_plot_embed/1.8.1+galaxy9","toolshed.g2.bx.psu.edu/repos/ebi-gxa/scanpy_run_tsne/scanpy_run_tsne/1.8.1+galaxy9","toolshed.g2.bx.psu.edu/repos/ebi-gxa/scanpy_run_umap/scanpy_run_umap/1.8.1+galaxy9"],"supported_servers":{"exact":[{"url":"https://usegalaxy.eu","name":"UseGalaxy.eu","usegalaxy":true},{"url":"https://usegalaxy.org","name":"UseGalaxy.org (Main)","usegalaxy":true}],"inexact":[{"url":"https://usegalaxy.org.au","name":"UseGalaxy.org.au","usegalaxy":true}]},"topic_name_human":"Single Cell","admin_install":{"install_tool_dependencies":true,"install_repository_dependencies":true,"install_resolver_dependencies":true,"tools":[{"name":"scanpy_compute_graph","owner":"ebi-gxa","revisions":"6417cccad133","tool_panel_section_label":"Single-cell","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"scanpy_find_cluster","owner":"ebi-gxa","revisions":"2ccd9f9e2cd0","tool_panel_section_label":"Single-cell","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"scanpy_parameter_iterator","owner":"ebi-gxa","revisions":"73d43034c860","tool_panel_section_label":"Single-cell","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"scanpy_plot_embed","owner":"ebi-gxa","revisions":"35f6611fb8c3","tool_panel_section_label":"Single-cell","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"scanpy_run_tsne","owner":"ebi-gxa","revisions":"181d61d2f3cd","tool_panel_section_label":"Single-cell","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"scanpy_run_umap","owner":"ebi-gxa","revisions":"bd4a244faeb8","tool_panel_section_label":"Single-cell","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"}]},"admin_install_yaml":"---\ninstall_tool_dependencies: true\ninstall_repository_dependencies: true\ninstall_resolver_dependencies: true\ntools:\n- name: scanpy_compute_graph\n  owner: ebi-gxa\n  revisions: 6417cccad133\n  tool_panel_section_label: Single-cell\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: scanpy_find_cluster\n  owner: ebi-gxa\n  revisions: 2ccd9f9e2cd0\n  tool_panel_section_label: Single-cell\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: scanpy_parameter_iterator\n  owner: ebi-gxa\n  revisions: 73d43034c860\n  tool_panel_section_label: Single-cell\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: scanpy_plot_embed\n  owner: ebi-gxa\n  revisions: 35f6611fb8c3\n  tool_panel_section_label: Single-cell\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: scanpy_run_tsne\n  owner: ebi-gxa\n  revisions: 181d61d2f3cd\n  tool_panel_section_label: Single-cell\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: scanpy_run_umap\n  owner: ebi-gxa\n  revisions: bd4a244faeb8\n  tool_panel_section_label: Single-cell\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n","tours":false,"video":false,"slides_recordings":false,"translations":{"tutorial":[],"slides":[],"video":false},"license":"CC-BY-4.0","type":"tutorial","contributors":[{"name":"Julia Jakiela","email":"juliajot36@gmail.com","joined":"2022-06","id":"wee-snufkin","url":"https://training.galaxyproject.org/training-material/api/contributors/wee-snufkin.json","page":"https://training.galaxyproject.org/training-material/hall-of-fame/wee-snufkin/"},{"name":"Wendi Bacon","email":"wendi.bacon@open.ac.uk","twitter":"WendiBacon1","matrix":"nomadscientist:matrix.org","joined":"2020-03","elixir_node":"uk","orcid":"0000-0002-8170-8806","bio":"Lecturer at The Open University","fediverse":"https://mstdn.science/@wendibacon1","fediverse_flavor":"mastodon","affiliations":["elixir-europe"],"id":"nomadscientist","url":"https://training.galaxyproject.org/training-material/api/contributors/nomadscientist.json","page":"https://training.galaxyproject.org/training-material/hall-of-fame/nomadscientist/"},{"name":"EOSC-Life","github":false,"joined":"2023-04","avatar":"https://www.eosc-life.eu/wp-content/themes/eosc-life-v2/assets/images/eosclogo.png","funder":true,"funding_id":"824087","funding_system":"cordis","funding_statement":"EOSC-Life has received funding from the European Union’s Horizon 2020 programme under grant agreement number 824087","url":"https://training.galaxyproject.org/training-material/api/funders/eosc-life.json","members":["bgruening"],"id":"eosc-life","page":"https://training.galaxyproject.org/training-material/hall-of-fame/eosc-life/"}]}