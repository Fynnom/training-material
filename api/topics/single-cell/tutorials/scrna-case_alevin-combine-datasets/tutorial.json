{
  "layout": "tutorial_hands_on",
  "title": "Combining single cell datasets after pre-processing",
  "subtopic": "single-cell-CS",
  "priority": 2,
  "zenodo_link": "https://zenodo.org/record/7075635",
  "questions": [
    "I have some AnnData files from different samples that I want to combine into a single file. How can I combine these and label them within the object?"
  ],
  "redirect_from": [
    "/topics/transcriptomics/tutorials/scrna-case_alevin-combine-datasets/tutorial",
    "/short/single-cell/scrna-case_alevin-combine-datasets",
    "/short/T00246"
  ],
  "objectives": [
    "Combine data matrices from different samples in the same experiment",
    "Label the metadata for downstream processing"
  ],
  "time_estimation": "1H",
  "key_points": [
    "Create a single scanpy-accessible AnnData object from multiple AnnData files, including relevant cell metadata according to the study design",
    "Retreive partially analysed data from a public repository"
  ],
  "tags": [
    "10x",
    "paper-replication"
  ],
  "contributions": {
    "authorship": [
      "nomadscientist",
      "pinin4fjords"
    ],
    "editing": [
      "hexylena"
    ],
    "testing": [
      "wee-snufkin"
    ]
  },
  "requirements": [
    {
      "type": "internal",
      "topic_name": "single-cell",
      "tutorials": [
        "scrna-intro",
        "scrna-umis",
        "scrna-case_alevin"
      ]
    }
  ],
  "gitter": "Galaxy-Training-Network/galaxy-single-cell",
  "follow_up_training": [
    {
      "type": "internal",
      "topic_name": "single-cell",
      "tutorials": [
        "scrna-case_basic-pipeline"
      ]
    }
  ],
  "js_requirements": {
    "mathjax": null,
    "mermaid": false
  },
  "short_id": "T00246",
  "url": "/topics/single-cell/tutorials/scrna-case_alevin-combine-datasets/tutorial.html",
  "topic_name": "single-cell",
  "tutorial_name": "scrna-case_alevin-combine-datasets",
  "dir": "topics/single-cell/tutorials/scrna-case_alevin-combine-datasets",
  "symlink": null,
  "id": "single-cell/scrna-case_alevin-combine-datasets",
  "video_library": {
    "tutorial": {
      "description": "",
      "materials": [
        {
          "link": "topics/single-cell/tutorials/scrna-case_alevin-combine-datasets/tutorial.html",
          "type": "Tutorial"
        }
      ],
      "tags": [
        "single-cell",
        "transcriptomics"
      ],
      "type": "Demo",
      "versions": [
        {
          "link": "22t-4qvHnow",
          "length": "11M",
          "date": "2023-05-09",
          "speakers": [
            "hrukkudyr"
          ],
          "captions": [
            "hrukkudyr"
          ]
        },
        {
          "captions": [
            "nomadscientist"
          ],
          "date": "2021-02-15",
          "galaxy_version": "21.09",
          "length": "11M",
          "link": "U8pVa6csmUE",
          "speakers": [
            "nomadscientist"
          ]
        }
      ],
      "gtn_id": "single-cell/scrna-case_alevin-combine-datasets",
      "title": "Combining single cell datasets after pre-processing",
      "captioned": true
    },
    "slides": null,
    "demo": null,
    "both": null,
    "session": null
  },
  "hands_on": true,
  "slides": false,
  "mod_date": "2023-12-14 14:23:09 +0000",
  "pub_date": "2022-09-08 14:00:12 +0000",
  "version": 28,
  "workflows": [
    {
      "workflow": "CS2_Combining_datasets_after_pre-processing.ga",
      "tests": false,
      "url": "https://training.galaxyproject.org/training-material/topics/single-cell/tutorials/scrna-case_alevin-combine-datasets/workflows/CS2_Combining_datasets_after_pre-processing.ga",
      "path": "topics/single-cell/tutorials/scrna-case_alevin-combine-datasets/workflows/CS2_Combining_datasets_after_pre-processing.ga",
      "wfid": "single-cell-scrna-case_alevin-combine-datasets",
      "wfname": "cs2_combining_datasets_after_pre-processing",
      "trs_endpoint": "https://training.galaxyproject.org/training-material/api/ga4gh/trs/v2/tools/single-cell-scrna-case_alevin-combine-datasets/versions/cs2_combining_datasets_after_pre-processing",
      "license": null,
      "creators": [

      ],
      "name": "CS2_Combining datasets after pre-processing",
      "title": "CS2_Combining datasets after pre-processing",
      "test_results": null,
      "modified": "2024-04-03 12:40:14 +0000",
      "mermaid": "flowchart TD\n  0[\"ℹ️ Input Dataset\\nN701\"];\n  style 0 stroke:#2c3143,stroke-width:4px;\n  1[\"ℹ️ Input Dataset\\nN702\"];\n  style 1 stroke:#2c3143,stroke-width:4px;\n  2[\"ℹ️ Input Dataset\\nN703\"];\n  style 2 stroke:#2c3143,stroke-width:4px;\n  3[\"ℹ️ Input Dataset\\nN704\"];\n  style 3 stroke:#2c3143,stroke-width:4px;\n  4[\"ℹ️ Input Dataset\\nN705\"];\n  style 4 stroke:#2c3143,stroke-width:4px;\n  5[\"ℹ️ Input Dataset\\nN706\"];\n  style 5 stroke:#2c3143,stroke-width:4px;\n  6[\"ℹ️ Input Dataset\\nN707\"];\n  style 6 stroke:#2c3143,stroke-width:4px;\n  7[\"EBI SCXA Data Retrieval\"];\n  8[\"Concatenating Datasets\"];\n  0 -->|output| 8;\n  1 -->|output| 8;\n  2 -->|output| 8;\n  3 -->|output| 8;\n  4 -->|output| 8;\n  5 -->|output| 8;\n  6 -->|output| 8;\n  a138b78c-0bab-476f-86ac-046e71f1ffd2[\"Output\\nCombined AnnData\"];\n  8 --> a138b78c-0bab-476f-86ac-046e71f1ffd2;\n  style a138b78c-0bab-476f-86ac-046e71f1ffd2 stroke:#2c3143,stroke-width:4px;\n  9[\"Scanpy Read10x\"];\n  7 -->|barcode_tsv| 9;\n  7 -->|design_tsv| 9;\n  7 -->|genes_tsv| 9;\n  7 -->|matrix_mtx| 9;\n  cb74756e-46b8-428d-a642-0ac981ab7b96[\"Output\\nScanpy Read10x on input dataset(s): anndata_h5ad AnnData\"];\n  9 --> cb74756e-46b8-428d-a642-0ac981ab7b96;\n  style cb74756e-46b8-428d-a642-0ac981ab7b96 stroke:#2c3143,stroke-width:4px;\n  10[\"Inspect AnnData\"];\n  8 -->|anndata| 10;\n  11[\"Inspect AnnData\"];\n  8 -->|anndata| 11;\n  12[\"Inspect AnnData\"];\n  8 -->|anndata| 12;\n  13[\"Replace Text\"];\n  11 -->|obs| 13;\n  14[\"Replace Text\"];\n  11 -->|obs| 14;\n  15[\"Cut\"];\n  13 -->|outfile| 15;\n  1added7f-58cd-4ad1-ac44-d033c7c7968e[\"Output\\nSex metadata\"];\n  15 --> 1added7f-58cd-4ad1-ac44-d033c7c7968e;\n  style 1added7f-58cd-4ad1-ac44-d033c7c7968e stroke:#2c3143,stroke-width:4px;\n  16[\"Cut\"];\n  14 -->|outfile| 16;\n  26e71b3f-663c-4249-8ca0-d3a8f69a437b[\"Output\\nGenotype metadata\"];\n  16 --> 26e71b3f-663c-4249-8ca0-d3a8f69a437b;\n  style 26e71b3f-663c-4249-8ca0-d3a8f69a437b stroke:#2c3143,stroke-width:4px;\n  17[\"Paste\"];\n  16 -->|out_file1| 17;\n  15 -->|out_file1| 17;\n  60ff7e7d-004d-4d15-a2fb-876929ef539f[\"Output\\nCell metadata\"];\n  17 --> 60ff7e7d-004d-4d15-a2fb-876929ef539f;\n  style 60ff7e7d-004d-4d15-a2fb-876929ef539f stroke:#2c3143,stroke-width:4px;\n  18[\"Adding in cell metadata\"];\n  8 -->|anndata| 18;\n  17 -->|out_file1| 18;\n  fb5f7421-77af-4a3a-8653-2302900c1786[\"Output\\nAnnData with Cell Metadata\"];\n  18 --> fb5f7421-77af-4a3a-8653-2302900c1786;\n  style fb5f7421-77af-4a3a-8653-2302900c1786 stroke:#2c3143,stroke-width:4px;\n  19[\"Batching Cell Metadata\"];\n  18 -->|anndata| 19;\n  30140d83-7b5f-48be-8e3b-f85acb8c278b[\"Output\\nBatched AnnData\"];\n  19 --> 30140d83-7b5f-48be-8e3b-f85acb8c278b;\n  style 30140d83-7b5f-48be-8e3b-f85acb8c278b stroke:#2c3143,stroke-width:4px;\n  20[\"Calculating mitochondrial \"];\n  19 -->|anndata| 20;\n  a6c9658e-e53d-4489-90d5-4f05af7a4c78[\"Output\\nAnnotated AnnData\"];\n  20 --> a6c9658e-e53d-4489-90d5-4f05af7a4c78;\n  style a6c9658e-e53d-4489-90d5-4f05af7a4c78 stroke:#2c3143,stroke-width:4px;"
    }
  ],
  "api": "https://training.galaxyproject.org/training-material/api/topics/single-cell/tutorials/scrna-case_alevin-combine-datasets/tutorial.json",
  "tools": [
    "Cut1",
    "Paste1",
    "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_replace_in_column/1.1.3",
    "toolshed.g2.bx.psu.edu/repos/ebi-gxa/anndata_ops/anndata_ops/1.8.1+galaxy0",
    "toolshed.g2.bx.psu.edu/repos/ebi-gxa/retrieve_scxa/retrieve_scxa/v0.0.2+galaxy2",
    "toolshed.g2.bx.psu.edu/repos/ebi-gxa/scanpy_read_10x/scanpy_read_10x/1.8.1+galaxy0",
    "toolshed.g2.bx.psu.edu/repos/iuc/anndata_inspect/anndata_inspect/0.7.5+galaxy1",
    "toolshed.g2.bx.psu.edu/repos/iuc/anndata_manipulate/anndata_manipulate/0.7.5+galaxy1"
  ],
  "supported_servers": {
    "exact": [
      {
        "url": "https://usegalaxy.eu",
        "name": "UseGalaxy.eu",
        "usegalaxy": true
      }
    ],
    "inexact": [
      {
        "url": "https://usegalaxy.org",
        "name": "UseGalaxy.org (Main)",
        "usegalaxy": true
      },
      {
        "url": "https://usegalaxy.org.au",
        "name": "UseGalaxy.org.au",
        "usegalaxy": true
      }
    ]
  },
  "topic_name_human": "Single Cell",
  "admin_install": {
    "install_tool_dependencies": true,
    "install_repository_dependencies": true,
    "install_resolver_dependencies": true,
    "tools": [
      {
        "name": "text_processing",
        "owner": "bgruening",
        "revisions": "d698c222f354",
        "tool_panel_section_label": "Text Manipulation",
        "tool_shed_url": "https://toolshed.g2.bx.psu.edu/"
      },
      {
        "name": "anndata_ops",
        "owner": "ebi-gxa",
        "revisions": "890fb06a2893",
        "tool_panel_section_label": "Single-cell",
        "tool_shed_url": "https://toolshed.g2.bx.psu.edu/"
      },
      {
        "name": "retrieve_scxa",
        "owner": "ebi-gxa",
        "revisions": "72b6e1747e37",
        "tool_panel_section_label": "Single-cell",
        "tool_shed_url": "https://toolshed.g2.bx.psu.edu/"
      },
      {
        "name": "scanpy_read_10x",
        "owner": "ebi-gxa",
        "revisions": "d253d69ff19f",
        "tool_panel_section_label": "Single-cell",
        "tool_shed_url": "https://toolshed.g2.bx.psu.edu/"
      },
      {
        "name": "anndata_inspect",
        "owner": "iuc",
        "revisions": "ee98d611afc6",
        "tool_panel_section_label": "Single-cell",
        "tool_shed_url": "https://toolshed.g2.bx.psu.edu/"
      },
      {
        "name": "anndata_manipulate",
        "owner": "iuc",
        "revisions": "3d748954434b",
        "tool_panel_section_label": "Single-cell",
        "tool_shed_url": "https://toolshed.g2.bx.psu.edu/"
      }
    ]
  },
  "admin_install_yaml": "---\ninstall_tool_dependencies: true\ninstall_repository_dependencies: true\ninstall_resolver_dependencies: true\ntools:\n- name: text_processing\n  owner: bgruening\n  revisions: d698c222f354\n  tool_panel_section_label: Text Manipulation\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: anndata_ops\n  owner: ebi-gxa\n  revisions: 890fb06a2893\n  tool_panel_section_label: Single-cell\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: retrieve_scxa\n  owner: ebi-gxa\n  revisions: 72b6e1747e37\n  tool_panel_section_label: Single-cell\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: scanpy_read_10x\n  owner: ebi-gxa\n  revisions: d253d69ff19f\n  tool_panel_section_label: Single-cell\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: anndata_inspect\n  owner: iuc\n  revisions: ee98d611afc6\n  tool_panel_section_label: Single-cell\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: anndata_manipulate\n  owner: iuc\n  revisions: 3d748954434b\n  tool_panel_section_label: Single-cell\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n",
  "tours": false,
  "video": false,
  "translations": {
    "tutorial": [

    ],
    "slides": [

    ],
    "video": false
  },
  "license": "CC-BY-4.0",
  "type": "tutorial",
  "contributors": [
    {
      "name": "Wendi Bacon",
      "email": "wendi.bacon@open.ac.uk",
      "twitter": "WendiBacon1",
      "matrix": "nomadscientist:matrix.org",
      "joined": "2020-03",
      "elixir_node": "uk",
      "orcid": "0000-0002-8170-8806",
      "bio": "Lecturer at The Open University",
      "fediverse": "https://mstdn.science/@wendibacon1",
      "fediverse_flavor": "mastodon",
      "id": "nomadscientist",
      "url": "https://training.galaxyproject.org/training-material/api/contributors/nomadscientist.json",
      "page": "https://training.galaxyproject.org/training-material/hall-of-fame/nomadscientist/"
    },
    {
      "name": "Jonathan Manning",
      "email": "jmanning@ebi.ac.uk",
      "joined": "2021-02",
      "id": "pinin4fjords",
      "url": "https://training.galaxyproject.org/training-material/api/contributors/pinin4fjords.json",
      "page": "https://training.galaxyproject.org/training-material/hall-of-fame/pinin4fjords/"
    },
    {
      "name": "Helena Rasche",
      "orcid": "0000-0001-9760-8992",
      "maintainer_contact": "gitter",
      "matrix": "hexylena:matrix.org",
      "joined": "2017-09",
      "elixir_node": "nl",
      "affiliations": [
        "gallantries",
        "by-covid",
        "erasmusmc",
        "elixir-europe",
        "elixir-converge"
      ],
      "former_affiliations": [
        "deNBI",
        "avans-atgm",
        "uni-freiburg"
      ],
      "contact_for_training": false,
      "location": {
        "country": "NL",
        "lat": 51.91,
        "lon": 4.46
      },
      "id": "hexylena",
      "url": "https://training.galaxyproject.org/training-material/api/contributors/hexylena.json",
      "page": "https://training.galaxyproject.org/training-material/hall-of-fame/hexylena/"
    },
    {
      "name": "Julia Jakiela",
      "email": "juliajot36@gmail.com",
      "joined": "2022-06",
      "id": "wee-snufkin",
      "url": "https://training.galaxyproject.org/training-material/api/contributors/wee-snufkin.json",
      "page": "https://training.galaxyproject.org/training-material/hall-of-fame/wee-snufkin/"
    }
  ]
}