{"layout":"tutorial_hands_on","title":"Object tracking using CellProfiler","zenodo_link":"https://doi.org/10.5281/zenodo.4567084","requirements":[{"type":"internal","topic_name":"galaxy-interface","tutorials":["workflow-editor"]}],"questions":["How to segment and track objects in fluorescence time-lapse microscopy images?"],"objectives":["Segment fluorescent objects using CellProfiler in Galaxy","Track objects over multiple frames using CellProfiler in Galaxy"],"time_estimation":"1H","key_points":["CellProfiler in Galaxy can be used to track objects in time-lapse microscopy images"],"contributors":[{"name":"Yi Sun","email":"yi.sun@embl.de","joined":"2021-03","id":"sunyi000","url":"https://training.galaxyproject.org/training-material/api/contributors/sunyi000.json","page":"https://training.galaxyproject.org/training-material/hall-of-fame/sunyi000/"},{"name":"Beatriz Serrano-Solano","email":"beatrizserrano.galaxy@gmail.com","twitter":"BSerranoSolano","linkedin":"beatriz-serrano","matrix":"beatrizserrano:matrix.org","orcid":"0000-0002-5862-6132","joined":"2020-07","id":"beatrizserrano","url":"https://training.galaxyproject.org/training-material/api/contributors/beatrizserrano.json","page":"https://training.galaxyproject.org/training-material/hall-of-fame/beatrizserrano/"},{"name":"Jean-Karim Hériché","joined":"2020-07","id":"jkh1","url":"https://training.galaxyproject.org/training-material/api/contributors/jkh1.json","page":"https://training.galaxyproject.org/training-material/hall-of-fame/jkh1/"}],"js_requirements":{"mathjax":null,"mermaid":false},"short_id":"T00182","url":"/topics/imaging/tutorials/object-tracking-using-cell-profiler/tutorial.html","topic_name":"imaging","tutorial_name":"object-tracking-using-cell-profiler","dir":"topics/imaging/tutorials/object-tracking-using-cell-profiler","symlink":null,"id":"imaging/object-tracking-using-cell-profiler","ref_tutorials":["<p>Most biological processes are dynamic and observing them over time can provide valuable insights. Combining fluorescent markers with time-lapse imaging is a common approach to collect data on dynamic cellular processes such as cell division (e.g. <span class=\"citation\"><a href=\"#Neumann2010\">Neumann <i>et al.</i> 2010</a></span>, <span class=\"citation\"><a href=\"#Heriche2014\">Hériché <i>et al.</i> 2014</a></span>). However, automated time-lapse imaging can produce large amounts of data that can be challenging to process. One of these challenges is the tracking of individual objects as it is often impossible to manually follow a large number of objects over many time points.</p>\n\n<p>To demonstrate how automatic tracking can be applied in such situations, this tutorial will track dividing nuclei in a short time-lapse recording of one mitosis of a syncytial blastoderm stage <em>Drosophila</em> embryo expressing a GFP-histone gene that labels chromatin.</p>\n\n<p>Tracking is done by first segmenting objects then linking objects between consecutive frames. Linking is done by matching objects and several criteria or matching rules are available. Here we will link objects if they significantly overlap between the current and previous frames.</p>\n\n<blockquote class=\"tip\">\n  <tip-title>Prerequisites</tip-title>\n  <p>It is expected that you are already familiar with the Galaxy interface and the workflow editor. If this is not the case, we recommend you to complete the requirements listed at the start of this tutorial.</p>\n</blockquote>\n\n<blockquote class=\"warning\">\n  <warning-title>Important information: CellProfiler in Galaxy</warning-title>\n  <p>The Galaxy <span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/bgruening/cp_cellprofiler/cp_cellprofiler/3.1.9+galaxy0\" title=\"CellProfiler tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>CellProfiler</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 3.1.9+galaxy0)</span>  tool takes two inputs: a CellProfiler pipeline and an image collection.\nSome pipelines created with stand-alone CellProfiler may not work with the Galaxy CellProfiler tool. Some reasons are:</p>\n  <ul>\n    <li>The pipeline was built with a different version of CellProfiler. The Galaxy tool currently uses CellProfiler 3.9.</li>\n    <li>Modules used by the pipeline aren’t available in Galaxy.</li>\n    <li>Parameters for some CellProfiler modules are limited/constrained compared to the stand-alone version, most notably:\n      <ul>\n        <li>Parameters require manual input from the user whereas, in the stand-alone version, some modules can inherit parameter values from other modules.</li>\n        <li>Input and output file locations are set by Galaxy and can’t be set by the user.</li>\n        <li>Metadata extraction from file names is limited to a set of fixed patterns.</li>\n      </ul>\n    </li>\n  </ul>\n\n  <p>It is recommended to build a CellProfiler pipeline using the Galaxy interface if the pipeline is to be run by Galaxy.</p>\n</blockquote>\n\n<blockquote class=\"agenda\">\n  <agenda-title></agenda-title>\n\n  <p>In this tutorial, we will cover:</p>\n\n<ol id=\"markdown-toc\">\n  <li><a href=\"#get-data\" id=\"markdown-toc-get-data\">Get data</a></li>\n  <li><a href=\"#create-a-cellprofiler-pipeline-in-galaxy\" id=\"markdown-toc-create-a-cellprofiler-pipeline-in-galaxy\">Create a CellProfiler pipeline in Galaxy</a>    <ol>\n      <li><a href=\"#create-a-new-workflow\" id=\"markdown-toc-create-a-new-workflow\">Create a new workflow</a></li>\n      <li><a href=\"#read-the-images\" id=\"markdown-toc-read-the-images\">Read the images</a></li>\n      <li><a href=\"#get-the-metadata\" id=\"markdown-toc-get-the-metadata\">Get the metadata</a></li>\n      <li><a href=\"#convert-the-images-to-grayscale\" id=\"markdown-toc-convert-the-images-to-grayscale\">Convert the images to grayscale</a></li>\n      <li><a href=\"#segmentation\" id=\"markdown-toc-segmentation\">Segmentation</a></li>\n      <li><a href=\"#feature-extraction\" id=\"markdown-toc-feature-extraction\">Feature extraction</a></li>\n      <li><a href=\"#track-nuclei\" id=\"markdown-toc-track-nuclei\">Track nuclei</a></li>\n      <li><a href=\"#visualize-results\" id=\"markdown-toc-visualize-results\">Visualize results</a></li>\n      <li><a href=\"#save-the-images-and-features\" id=\"markdown-toc-save-the-images-and-features\">Save the images and features</a></li>\n    </ol>\n  </li>\n  <li><a href=\"#run-the-pipeline-with-cellprofiler\" id=\"markdown-toc-run-the-pipeline-with-cellprofiler\">Run the pipeline with <strong>CellProfiler</strong></a></li>\n  <li><a href=\"#conclusion\" id=\"markdown-toc-conclusion\">Conclusion</a></li>\n</ol>\n\n</blockquote>\n\n<h1 id=\"get-data\">Get data</h1>\n\n<p>This tutorial will use a time-lapse recording of nuclei progressing through mitotic anaphase during early <em>Drosophila</em> embryogenesis. The nuclei are labelled on chromatin with a GFP-histone marker and have been imaged every 7 seconds using a laser scanning confocal microscope with a 40X objective.\nThe images are saved as a zip archive on Zenodo and need to be uploaded to the Galaxy server before they can be used.</p>\n\n<figure id=\"figure-1\" style=\"max-width: 90%;\"><img src=\"../../images/object-tracking-using-cell-profiler/Dividing_nuclei.gif\" alt=\"Dividing nuclei. \" width=\"542\" height=\"264\" loading=\"lazy\" /><a target=\"_blank\" href=\"../../images/object-tracking-using-cell-profiler/Dividing_nuclei.gif\" rel=\"noopener noreferrer\"><small>Open image in new tab</small></a><br /><br /><figcaption><span class=\"figcaption-prefix\"><strong>Figure 1</strong>:</span> Time lapse recording of anaphase nuclei in a Drosophila embryo.</figcaption></figure>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title>Data upload</hands-on-title>\n\n  <ol>\n    <li>\n      <p>Create a new history for this tutorial.\nWhen you log in for the first time, an empty, unnamed history is created by default. You can simply rename it.</p>\n\n      <!--SNIPPET-->\n      <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-creating-a-new-history\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-creating-a-new-history\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Creating a new history</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <p>Click the <i class=\"fas fa-plus\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">new-history</span> icon at the top of the history panel:</p>   <p><img src=\"/training-material/shared/images/history_create_new.svg\" alt=\"UI for creating new history\" /></p>   <!-- the original drawing can be found here https://docs.google.com/drawings/d/1cCBrLAo4kDGic5QyB70rRiWJAKTenTU8STsKDaLcVU8/edit?usp=sharing --> </blockquote>\n      <p><!--END_SNIPPET--></p>\n    </li>\n    <li>Import <i class=\"fas fa-upload\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-upload</span> the files from <a href=\"https://doi.org/10.5281/zenodo.4567084\">Zenodo</a> or from\nthe shared data library.\n      <ul>\n        <li><strong>Important:</strong> If setting the type to ‘Auto-detect’, make sure that after upload, the datatype is set to zip.</li>\n      </ul>\n\n      <div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>https://zenodo.org/records/4567084/files/drosophila_sample.zip\n</code></pre></div>      </div>\n\n      <!--SNIPPET-->\n      <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-importing-via-links\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-importing-via-links\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Importing via links</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <ul>   <li>Copy the link location</li>   <li>     <p>Click <i class=\"fas fa-upload\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-upload</span> <strong>Upload Data</strong> at the top of the tool panel</p>   </li>   <li>Select <i class=\"fa fa-edit\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-wf-edit</span> <strong>Paste/Fetch Data</strong></li>   <li>     <p>Paste the link(s) into the text field</p>   </li>   <li>     <p>Press <strong>Start</strong></p>   </li>   <li><strong>Close</strong> the window</li> </ul> </blockquote>\n      <p><!--END_SNIPPET--></p>\n    </li>\n    <li>Rename <i class=\"fas fa-pencil-alt\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-pencil</span> the file to drosophila_embryo.zip</li>\n  </ol>\n\n</blockquote>\n\n<h1 id=\"create-a-cellprofiler-pipeline-in-galaxy\">Create a CellProfiler pipeline in Galaxy</h1>\n\n<p>In this section, we will build a CellProfiler pipeline from scratch in Galaxy.\nWe need to:</p>\n<ul>\n  <li>Read the images and the metadata</li>\n  <li>Convert the colour images to grayscale</li>\n  <li>Segment the nuclei</li>\n  <li>Extract features from the segmented nuclei</li>\n  <li>Perform tracking</li>\n  <li>Produce some useful output files</li>\n</ul>\n\n<p>A pipeline is built by chaining together Galaxy tools representing CellProfiler modules and must start with the <span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/bgruening/cp_common/cp_common/3.1.9+galaxy1\" title=\"Starting modules tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>Starting modules</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 3.1.9+galaxy1)</span> tool and end with the <span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/bgruening/cp_cellprofiler/cp_cellprofiler/3.1.9+galaxy0\" title=\"CellProfiler tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>CellProfiler</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 3.1.9+galaxy0)</span>  tool.</p>\n\n<figure id=\"figure-2\" style=\"max-width: 90%;\"><img src=\"../../images/object-tracking-using-cell-profiler/CP_object_tracking_pipeline.png\" alt=\"Image of the workflow. \" width=\"1467\" height=\"771\" loading=\"lazy\" /><a target=\"_blank\" href=\"../../images/object-tracking-using-cell-profiler/CP_object_tracking_pipeline.png\" rel=\"noopener noreferrer\"><small>Open image in new tab</small></a><br /><br /><figcaption><span class=\"figcaption-prefix\"><strong>Figure 2</strong>:</span> Overview of the CellProfiler pipeline using Galaxy tools.</figcaption></figure>\n\n<blockquote class=\"details\">\n  <details-title>More details about the pipeline steps</details-title>\n  <ul>\n    <li>Metadata is needed to tell CellProfiler what a temporal sequence of images is and what the order of images is in the sequence.</li>\n    <li>CellProfiler is designed to work primarily with grayscale images. Since we don’t need the colour information, we convert colour images to grayscale type.</li>\n    <li>Segmentation means identifying the nuclei in each image. In CellProfiler, this is done by thresholding the intensity level in each image.</li>\n    <li>When we perform tracking we’re usually interested in quantifying how some properties of the objects evolve over time. Also, sometimes we may want to do tracking by matching objects based on some property of the objects (e.g. a shape measurement). Therefore, for each segmented object, we compute some features, i.e. numerical descriptors of some properties of the object.</li>\n    <li>Tracking will provide the information required to allow downstream data analysis tools to link the features into a multidimensional time series.</li>\n  </ul>\n\n</blockquote>\n\n<h2 id=\"create-a-new-workflow\">Create a new workflow</h2>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title>Creating a new workflow</hands-on-title>\n  <ol>\n    <li>\n      <p>Create a new workflow</p>\n\n      <!--SNIPPET-->\n      <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-creating-a-new-workflow\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-creating-a-new-workflow\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Creating a new workflow</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <ol>   <li>Click <strong>Workflow</strong> on the top bar</li>   <li>Click the new workflow <i class=\"fas fa-plus\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-wf-new</span> button</li>   <li>Give it a clear and memorable name</li>   <li>Clicking <strong>Save</strong> will take you directly into the workflow editor for that workflow</li>   <li>Need more help? Please see the <em>How to make a workflow subsection</em> <a href=\"/training-material/topics/introduction/tutorials/galaxy-intro-101-everyone/tutorial.html\">here</a></li> </ol> </blockquote>\n      <p><!--END_SNIPPET--></p>\n    </li>\n  </ol>\n\n</blockquote>\n\n<p>The next steps will add new tools using the workflow editor.\nRemember to save the workflow when done (or anytime) to not lose your input parameters.</p>\n\n<h2 id=\"read-the-images\">Read the images</h2>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title>Reading images</hands-on-title>\n\n  <ol>\n    <li>\n      <p>Add Inputs → <strong>Input Dataset</strong> to the workflow</p>\n    </li>\n    <li>\n      <p>Add <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span> <strong>Unzip</strong> with the following parameter:</p>\n      <ul>\n        <li><i class=\"fas fa-filter\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-select</span> <em>“Extract single file”</em>: <code class=\"language-plaintext highlighter-rouge\">All files</code></li>\n      </ul>\n    </li>\n  </ol>\n\n</blockquote>\n\n<h2 id=\"get-the-metadata\">Get the metadata</h2>\n\n<blockquote class=\"comment\">\n  <comment-title></comment-title>\n\n  <p>The Starting modules tool combines four CellProfiler modules that are always used together at the start of a pipeline. These modules are:</p>\n  <ul>\n    <li>Images</li>\n    <li>Metadata</li>\n    <li>NamesAndTypes</li>\n    <li>Groups</li>\n  </ul>\n</blockquote>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title>Getting metadata</hands-on-title>\n\n  <ol>\n    <li>\n      <p><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/bgruening/cp_common/cp_common/3.1.9+galaxy1\" title=\"Starting modules tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>Starting modules</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 3.1.9+galaxy1)</span> with the following parameters:</p>\n\n      <ul>\n        <li>Images\n          <ul>\n            <li><em>“Do you want to filter only the images?”</em>: <code class=\"language-plaintext highlighter-rouge\">Select the images only</code></li>\n          </ul>\n        </li>\n        <li>Metadata\n          <ul>\n            <li>\n              <p><em>“Do you want to extract the metadata?”</em>: <code class=\"language-plaintext highlighter-rouge\">Yes, specify metadata</code></p>\n\n              <ul>\n                <li><i class=\"far fa-plus-square\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-repeat</span> Insert new metadata\n                  <ul>\n                    <li><em>“Metadata extraction method”</em>: <code class=\"language-plaintext highlighter-rouge\">Extract from file/folder names</code></li>\n                    <li><em>“Metadata source”</em>: <code class=\"language-plaintext highlighter-rouge\">File name</code></li>\n                    <li><em>“Select the pattern to extract metadata from the file name”</em>: <code class=\"language-plaintext highlighter-rouge\">field1_field2_field3</code></li>\n                    <li>\n                      <p><em>“Extract metadata from”</em>: <code class=\"language-plaintext highlighter-rouge\">Images matching a rule</code></p>\n\n                      <ul>\n                        <li><em>“Match the following rules”</em>: <code class=\"language-plaintext highlighter-rouge\">All</code></li>\n                        <li><i class=\"far fa-plus-square\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-repeat</span> Insert filtering rules:\n                          <ul>\n                            <li><em>“Select the filtering criteria”</em>: <code class=\"language-plaintext highlighter-rouge\">File</code></li>\n                            <li><em>\"”operator</em>: <code class=\"language-plaintext highlighter-rouge\">Does</code></li>\n                            <li><em>“contain”</em>: <code class=\"language-plaintext highlighter-rouge\">Contain regular expression</code></li>\n                            <li><em>“match_value”</em>: <code class=\"language-plaintext highlighter-rouge\">GFPHistone</code></li>\n                          </ul>\n                        </li>\n                      </ul>\n                    </li>\n                  </ul>\n                </li>\n              </ul>\n            </li>\n          </ul>\n        </li>\n        <li>NamesAndTypes\n          <ul>\n            <li><em>“Process 3D”</em>: <code class=\"language-plaintext highlighter-rouge\">No, do not process 3D data</code></li>\n            <li><em>“Assign a name to”</em>: <code class=\"language-plaintext highlighter-rouge\">Give images one of several names depending on the metadata</code>\n              <ul>\n                <li><i class=\"far fa-plus-square\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-repeat</span> Insert another image:\n                  <ul>\n                    <li><em>“Match the following rules”</em>: <code class=\"language-plaintext highlighter-rouge\">All</code></li>\n                    <li>\n                      <p><i class=\"far fa-plus-square\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-repeat</span> Insert rule:</p>\n\n                      <ul>\n                        <li>\n                          <p><em>“Select rule criteria”</em>: <code class=\"language-plaintext highlighter-rouge\">File</code></p>\n\n                          <ul>\n                            <li><em>“operator”</em>: <code class=\"language-plaintext highlighter-rouge\">Does</code></li>\n                            <li><em>“contain”</em>: <code class=\"language-plaintext highlighter-rouge\">Contain regular expression</code></li>\n                            <li><em>“match_value”</em>: <code class=\"language-plaintext highlighter-rouge\">GFPHistone</code></li>\n                          </ul>\n                        </li>\n                      </ul>\n                    </li>\n                    <li><em>“Select the image type”</em>: <code class=\"language-plaintext highlighter-rouge\">Color image</code></li>\n                    <li><em>“Name to assign these images”</em>: <code class=\"language-plaintext highlighter-rouge\">OrigColor</code></li>\n                    <li><em>“Set intensity range from”</em>: <code class=\"language-plaintext highlighter-rouge\">Image metadata</code></li>\n                  </ul>\n                </li>\n              </ul>\n            </li>\n            <li><em>“Image matching method”</em>: <code class=\"language-plaintext highlighter-rouge\">Metadata</code></li>\n          </ul>\n        </li>\n        <li>Groups\n          <ul>\n            <li><em>“Do you want to group your images?”</em>: <code class=\"language-plaintext highlighter-rouge\">Yes, group the images</code></li>\n            <li><em>“Metadata category”</em>: <code class=\"language-plaintext highlighter-rouge\">field1</code></li>\n          </ul>\n        </li>\n      </ul>\n    </li>\n  </ol>\n\n</blockquote>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <p>How are we capturing metadata and what type of metadata are we getting?</p>\n\n  <blockquote class=\"solution\">\n    <solution-title></solution-title>\n\n    <p>Metadata is obtained from the filenames by extracting three text fields separated by an underscore. The metadata we get is “DrosophilaEmbryo”, “GFPHistone” and numbers with leading zeros. These three fields represent respectively the sample identifier, the marker visualized in the image and the index in the time series.</p>\n\n  </blockquote>\n\n</blockquote>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <p>How will CellProfiler form a temporal sequence?</p>\n\n  <blockquote class=\"solution\">\n    <solution-title></solution-title>\n\n    <p>Images will be grouped based on field1 which here is the sample identifier and ordered alpha-numerically (by default) which will order them by field3 (the time series index) since fields 1 and 2 are constant.</p>\n\n  </blockquote>\n\n</blockquote>\n\n<h2 id=\"convert-the-images-to-grayscale\">Convert the images to grayscale</h2>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title>Colour to grayscale conversion</hands-on-title>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/bgruening/cp_color_to_gray/cp_color_to_gray/3.1.9+galaxy0\" title=\"ColorToGray tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>ColorToGray</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 3.1.9+galaxy0)</span> with the following parameters:\n      <ul>\n        <li><em>“Select the input CellProfiler pipeline”</em>: Connect output of <strong>Starting Modules</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span> to input of <span><strong>ColorToGray</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i></span></li>\n        <li><em>“Enter the name of the input image”</em>: <code class=\"language-plaintext highlighter-rouge\">OrigColor</code></li>\n        <li><em>“Conversion method”</em>: <code class=\"language-plaintext highlighter-rouge\">Combine</code>\n          <ul>\n            <li><em>“Name the output image”</em>: <code class=\"language-plaintext highlighter-rouge\">OrigGray</code></li>\n            <li><em>“Image type”</em>: <code class=\"language-plaintext highlighter-rouge\">RGB</code>\n              <ul>\n                <li><em>“Relative weight of the red channel”</em>: <code class=\"language-plaintext highlighter-rouge\">1</code></li>\n                <li><em>“Relative weight of the green channel”</em>: <code class=\"language-plaintext highlighter-rouge\">1</code></li>\n                <li><em>“Relative weight of the blue channel”</em>: <code class=\"language-plaintext highlighter-rouge\">1</code></li>\n              </ul>\n            </li>\n          </ul>\n        </li>\n      </ul>\n    </li>\n  </ol>\n\n</blockquote>\n\n<h2 id=\"segmentation\">Segmentation</h2>\n\n<p>The first step to track nuclei starts with the identification of those objects on the images.</p>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title>Nuclei segmentation</hands-on-title>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/bgruening/cp_identify_primary_objects/cp_identify_primary_objects/3.1.9+galaxy1\" title=\"IdentifyPrimaryObjects tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>IdentifyPrimaryObjects</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 3.1.9+galaxy1)</span> with the following parameters:\n      <ul>\n        <li><i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> <em>“Select the input CellProfiler pipeline”</em>: output of <strong>ColorToGray</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span></li>\n        <li><em>“Use advanced settings?”</em>: <code class=\"language-plaintext highlighter-rouge\">Yes, use advanced settings</code>\n          <ul>\n            <li><em>“Enter the name of the input image (from NamesAndTypes)”</em>: <code class=\"language-plaintext highlighter-rouge\">OrigGray</code></li>\n            <li><em>“Enter the name of the primary objects to be identified”</em>: <code class=\"language-plaintext highlighter-rouge\">Nuclei</code></li>\n            <li><em>“Typical minimum diameter of objects, in pixel units (Min)”</em>: <code class=\"language-plaintext highlighter-rouge\">30</code></li>\n            <li><em>“Typical maximum diameter of objects, in pixel units (Max)”</em>: <code class=\"language-plaintext highlighter-rouge\">9999</code></li>\n            <li><em>“Discard objects outside diameter range?”</em>: <code class=\"language-plaintext highlighter-rouge\">Yes</code></li>\n            <li><em>“Discard objects touching the border of the image?”</em>: <code class=\"language-plaintext highlighter-rouge\">Yes</code></li>\n            <li><em>“Threshold strategy”</em>: <code class=\"language-plaintext highlighter-rouge\">Global</code>\n              <ul>\n                <li><em>“Thresholding method”</em>: <code class=\"language-plaintext highlighter-rouge\">Otsu</code>\n                  <ul>\n                    <li><em>“Two-class or three-class thresholding?”</em>: <code class=\"language-plaintext highlighter-rouge\">Three classes</code>\n                      <ul>\n                        <li><em>“Assign pixels in the middle intensity class to the foreground or the background?”</em>: <code class=\"language-plaintext highlighter-rouge\">Background</code></li>\n                      </ul>\n                    </li>\n                    <li><em>Threshold smoothing scale”</em>: <code class=\"language-plaintext highlighter-rouge\">1.3488</code></li>\n                    <li><em>Threshold correction factor”</em>: <code class=\"language-plaintext highlighter-rouge\">1</code></li>\n                    <li><em>Lower bound on threshold”</em>: <code class=\"language-plaintext highlighter-rouge\">0.01</code></li>\n                    <li><em>Upper bound on threshold”</em>: <code class=\"language-plaintext highlighter-rouge\">1</code></li>\n                  </ul>\n                </li>\n              </ul>\n            </li>\n            <li><em>“Method to distinguish clumped objects”</em>: <code class=\"language-plaintext highlighter-rouge\">Intensity</code>\n              <ul>\n                <li><em>“Method to draw dividing lines between clumped objects”</em>: <code class=\"language-plaintext highlighter-rouge\">Intensity</code>\n                  <ul>\n                    <li><em>“Automatically calculate size of smoothing filter for declumping?”</em>: <code class=\"language-plaintext highlighter-rouge\">Yes</code></li>\n                    <li><em>“Automatically calculate minimum allowed distance between local maxima?”</em>: <code class=\"language-plaintext highlighter-rouge\">Yes</code></li>\n                    <li><em>“Speed up by using lower-resolution mage to find local maxima?”</em>: <code class=\"language-plaintext highlighter-rouge\">Yes</code></li>\n                  </ul>\n                </li>\n              </ul>\n            </li>\n            <li><em>“Fill holes in identified objects”</em>: <code class=\"language-plaintext highlighter-rouge\">After both thresholding and declumping</code></li>\n            <li><em>“Handling of objects if excessive number of objects identified”</em>: <code class=\"language-plaintext highlighter-rouge\">Continue</code></li>\n          </ul>\n        </li>\n      </ul>\n    </li>\n  </ol>\n\n</blockquote>\n\n<h2 id=\"feature-extraction\">Feature extraction</h2>\n\n<p>Once the objects of interest (nuclei) are identified, we extract features, i.e. numerical descriptors of object properties. We do this because we may be interested in analysing the evolution of these properties over time or want to use them in the tracking procedure to match objects over time.</p>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title>Shape features</hands-on-title>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/bgruening/cp_measure_object_size_shape/cp_measure_object_size_shape/3.1.9+galaxy0\" title=\"MeasureObjectSizeShape tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>MeasureObjectSizeShape</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 3.1.9+galaxy0)</span> with the following parameters:\n      <ul>\n        <li><i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> <em>“Select the input CellProfiler pipeline”</em>: output of <strong>IdentifyPrimaryObjects</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span></li>\n        <li>In <em>“new object”</em>:\n          <ul>\n            <li><i class=\"far fa-plus-square\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-repeat</span> <em>“Insert new object”</em>\n              <ul>\n                <li><em>“Enter the name of the object to measure”</em>: <code class=\"language-plaintext highlighter-rouge\">Nuclei</code></li>\n              </ul>\n            </li>\n          </ul>\n        </li>\n        <li><em>“Calculate the Zernike features?”</em>: <code class=\"language-plaintext highlighter-rouge\">No</code></li>\n      </ul>\n    </li>\n  </ol>\n\n</blockquote>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title>Intensity features</hands-on-title>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/bgruening/cp_measure_object_intensity/cp_measure_object_intensity/3.1.9+galaxy0\" title=\"MeasureObjectIntensity tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>MeasureObjectIntensity</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 3.1.9+galaxy0)</span> with the following parameters:\n      <ul>\n        <li><i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> <em>“Select the input CellProfiler pipeline”</em>: output of <strong>MeasureObjectSizeShape</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span></li>\n        <li>In <em>“new image”</em>:\n          <ul>\n            <li><i class=\"far fa-plus-square\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-repeat</span> <em>“Insert new image”</em>\n              <ul>\n                <li><em>“Enter the name of an image to measure”</em>: <code class=\"language-plaintext highlighter-rouge\">OrigGray</code></li>\n              </ul>\n            </li>\n          </ul>\n        </li>\n        <li>In <em>“new object”</em>:\n          <ul>\n            <li><i class=\"far fa-plus-square\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-repeat</span> <em>“Insert new object”</em>\n              <ul>\n                <li><em>“Enter the name of the objects to measure”</em>: <code class=\"language-plaintext highlighter-rouge\">Nuclei</code></li>\n              </ul>\n            </li>\n          </ul>\n        </li>\n      </ul>\n    </li>\n  </ol>\n\n</blockquote>\n\n<h2 id=\"track-nuclei\">Track nuclei</h2>\n\n<p>With the nuclei and the relevant features measured, we are now ready to start the tracking step!</p>\n<blockquote class=\"hands_on\">\n  <hands-on-title>Object tracking</hands-on-title>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/bgruening/cp_track_objects/cp_track_objects/3.1.9+galaxy0\" title=\"TrackObjects tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>TrackObjects</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 3.1.9+galaxy0)</span> with the following parameters:\n      <ul>\n        <li><i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> <em>“Select the input CellProfiler pipeline”</em>: output of <strong>MeasureObjectIntensity</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span></li>\n        <li><em>“Enter the name of the objects to track”</em>: <code class=\"language-plaintext highlighter-rouge\">Nuclei</code></li>\n        <li><em>“Choose a tracking method”</em>: <code class=\"language-plaintext highlighter-rouge\">Overlap</code>\n          <ul>\n            <li><em>“Maximum pixel distance to consider matches”</em>: <code class=\"language-plaintext highlighter-rouge\">50</code></li>\n            <li><em>“Filter objects by lifetime?”</em>: <code class=\"language-plaintext highlighter-rouge\">No</code></li>\n            <li><em>“Select display option?”</em>: <code class=\"language-plaintext highlighter-rouge\">Color and Number</code></li>\n            <li><em>“Save color-coded image?”</em>: <code class=\"language-plaintext highlighter-rouge\">Yes</code>\n              <ul>\n                <li><em>“Name the output image”</em>: <code class=\"language-plaintext highlighter-rouge\">TrackedNuclei</code></li>\n              </ul>\n            </li>\n          </ul>\n        </li>\n      </ul>\n    </li>\n  </ol>\n\n</blockquote>\n\n<h2 id=\"visualize-results\">Visualize results</h2>\n\n<p>To make sure that the tracking has gone as expected, we will have a look at the original images together with the results of the segmentation step. And we will visualize them together (in tiles) for easier comparison.</p>\n<blockquote class=\"hands_on\">\n  <hands-on-title>Visualize segmentation outcome</hands-on-title>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/bgruening/cp_overlay_outlines/cp_overlay_outlines/3.1.9+galaxy0\" title=\"OverlayOutlines tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>OverlayOutlines</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 3.1.9+galaxy0)</span> with the following parameters:\n      <ul>\n        <li><i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> <em>“Select the input CellProfiler pipeline”</em>: output of <strong>TrackObjects</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span></li>\n        <li><em>“Display outlines on a blank image?”</em>: <code class=\"language-plaintext highlighter-rouge\">No</code>\n          <ul>\n            <li><em>“Enter the name of image on which to display outlines”</em>: <code class=\"language-plaintext highlighter-rouge\">OrigGray</code></li>\n            <li><em>“Outline display mode”</em>: <code class=\"language-plaintext highlighter-rouge\">Color</code>\n              <ul>\n                <li>In <em>“Outline”</em>:\n                  <ul>\n                    <li><i class=\"far fa-plus-square\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-repeat</span> <em>“Insert Outline”</em>\n                      <ul>\n                        <li><em>“Enter the name of the objects to display”</em>: <code class=\"language-plaintext highlighter-rouge\">Nuclei</code></li>\n                        <li><em>“Select outline color”</em>: <span style=\"background-color:#ff0000;border-radius:3px;border:1px solid #000;width:12px;height:12px;margin-right:5px;\">     </span> (red)</li>\n                      </ul>\n                    </li>\n                  </ul>\n                </li>\n              </ul>\n            </li>\n          </ul>\n        </li>\n        <li><em>“Name the output image”</em>: <code class=\"language-plaintext highlighter-rouge\">OutlineImage</code></li>\n        <li><em>“How to outline”</em>: <code class=\"language-plaintext highlighter-rouge\">Inner</code></li>\n      </ul>\n    </li>\n  </ol>\n\n</blockquote>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title>Tiling images</hands-on-title>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/bgruening/cp_tile/cp_tile/3.1.9+galaxy0\" title=\"Tile tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>Tile</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 3.1.9+galaxy0)</span> with the following parameters:\n      <ul>\n        <li><i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> <em>“Select the input CellProfiler pipeline”</em>: output of <strong>OverlayOutlines</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span></li>\n        <li><em>“Enter the name of an input image”</em>: <code class=\"language-plaintext highlighter-rouge\">OrigColor</code></li>\n        <li><em>“Name the output image”</em>: <code class=\"language-plaintext highlighter-rouge\">TiledImages</code></li>\n        <li><em>“Tile assembly method”</em>: <code class=\"language-plaintext highlighter-rouge\">Within cycles</code>\n          <ul>\n            <li><em>“Automatically calculate number of rows?”</em>: <code class=\"language-plaintext highlighter-rouge\">No</code>\n              <ul>\n                <li><em>“Final number of rows”</em>: <code class=\"language-plaintext highlighter-rouge\">1</code></li>\n              </ul>\n            </li>\n            <li><em>“Automatically calculate number of columns?”</em>: <code class=\"language-plaintext highlighter-rouge\">Yes</code></li>\n            <li><em>“Image corner to begin tiling”</em>: <code class=\"language-plaintext highlighter-rouge\">top left</code></li>\n            <li><em>“Direction to begin tiling”</em>: <code class=\"language-plaintext highlighter-rouge\">row</code></li>\n            <li><em>“Use meander mode?”</em>: <code class=\"language-plaintext highlighter-rouge\">No</code></li>\n            <li>In <em>“Another image”</em>:\n              <ul>\n                <li><i class=\"far fa-plus-square\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-repeat</span> <em>“Insert Another image”</em>\n                  <ul>\n                    <li><em>“Enter the name of an additional image to tile”</em>: <code class=\"language-plaintext highlighter-rouge\">OutlineImage</code></li>\n                  </ul>\n                </li>\n                <li><i class=\"far fa-plus-square\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-repeat</span> <em>“Insert Another image”</em>\n                  <ul>\n                    <li><em>“Enter the name of an additional image to tile”</em>: <code class=\"language-plaintext highlighter-rouge\">TrackedNuclei</code></li>\n                  </ul>\n                </li>\n              </ul>\n            </li>\n          </ul>\n        </li>\n      </ul>\n    </li>\n  </ol>\n\n</blockquote>\n\n<h2 id=\"save-the-images-and-features\">Save the images and features</h2>\n\n<p>The tiled images and the features computed in previous steps are now exported to the Galaxy history ready to be analyzed.</p>\n<blockquote class=\"hands_on\">\n  <hands-on-title>Save the images</hands-on-title>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/bgruening/cp_save_images/cp_save_images/3.1.9+galaxy1\" title=\"SaveImages tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>SaveImages</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 3.1.9+galaxy1)</span> with the following parameters:\n      <ul>\n        <li><i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> <em>“Select the input CellProfiler pipeline”</em>: output of <strong>Tile</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span></li>\n        <li><em>“Select the type of image to save”</em>: <code class=\"language-plaintext highlighter-rouge\">Image</code>\n          <ul>\n            <li><em>“Saved the format to save the image(s)”</em>: <code class=\"language-plaintext highlighter-rouge\">png</code></li>\n          </ul>\n        </li>\n        <li><em>“Enter the name of the image to save”</em>: <code class=\"language-plaintext highlighter-rouge\">TiledImages</code></li>\n        <li><em>“Select method for constructing file names”</em>: <code class=\"language-plaintext highlighter-rouge\">From image filename</code>\n          <ul>\n            <li><em>“Enter the image file name”</em>: <code class=\"language-plaintext highlighter-rouge\">OrigColor</code></li>\n            <li><em>“Append a suffix to the image file name”</em>: <code class=\"language-plaintext highlighter-rouge\">Yes</code>\n              <ul>\n                <li><em>“Text to append to the image file name”</em>: <code class=\"language-plaintext highlighter-rouge\">_tile</code></li>\n              </ul>\n            </li>\n          </ul>\n        </li>\n        <li><em>“Overwrite existing files without warning?”</em>: <code class=\"language-plaintext highlighter-rouge\">Yes</code></li>\n        <li><em>“When to save”</em>: <code class=\"language-plaintext highlighter-rouge\">Every cycle</code></li>\n        <li><em>“Record the file and path information to the saved image?”</em>: <code class=\"language-plaintext highlighter-rouge\">No</code></li>\n      </ul>\n    </li>\n  </ol>\n\n</blockquote>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <p>What will be the file names of the output images?</p>\n\n  <blockquote class=\"solution\">\n    <solution-title></solution-title>\n\n    <p>The files will be named DrosophilaEmbryo_GFPHistone_0000_tile.png,\nDrosophilaEmbryo_GFPHistone_0001_tile.png …</p>\n  </blockquote>\n\n</blockquote>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title>Export tabular data to character-delimited text files</hands-on-title>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/bgruening/cp_export_to_spreadsheet/cp_export_to_spreadsheet/3.1.9+galaxy1\" title=\"ExportToSpreadsheet tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>ExportToSpreadsheet</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 3.1.9+galaxy1)</span> with the following parameters:\n      <ul>\n        <li><i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> <em>“Select the input CellProfiler pipeline”</em>: output of <strong>SaveImages</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span></li>\n        <li><em>“Select the column delimiter”</em>: <code class=\"language-plaintext highlighter-rouge\">Comma (\",\")</code></li>\n        <li><em>“Add a prefix to file names?”</em>: <code class=\"language-plaintext highlighter-rouge\">Do not add prefix to the file name</code></li>\n        <li><em>“Overwrite existing files without warning”</em>: <code class=\"language-plaintext highlighter-rouge\">Yes</code></li>\n        <li><em>“Add image metadata columns to your object data file”</em>: <code class=\"language-plaintext highlighter-rouge\">Yes</code></li>\n        <li><em>“Representation of Nan/Inf”</em>: <code class=\"language-plaintext highlighter-rouge\">NaN</code></li>\n        <li><em>“Calculate the per-image mean values for object measurements?”</em>: <code class=\"language-plaintext highlighter-rouge\">Yes</code></li>\n        <li><em>“Calculate the per-image median values for object measurements?”</em>: <code class=\"language-plaintext highlighter-rouge\">Yes</code></li>\n        <li><em>“Calculate the per-image standard deviation values for object measurements?”</em>: <code class=\"language-plaintext highlighter-rouge\">Yes</code></li>\n        <li><em>“Create a GenePattern GCT file?”</em>: <code class=\"language-plaintext highlighter-rouge\">No</code></li>\n      </ul>\n\n      <blockquote class=\"comment\">\n        <comment-title></comment-title>\n\n        <p>By default all measurement types are exported.\nThis is in contrast to the stand-alone version of CellProfiler which allows choosing which measurement types to save.</p>\n      </blockquote>\n    </li>\n  </ol>\n\n</blockquote>\n\n<h1 id=\"run-the-pipeline-with-cellprofiler\">Run the pipeline with <strong>CellProfiler</strong></h1>\n\n<p>As mentioned in the introduction, the tool <span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/bgruening/cp_cellprofiler/cp_cellprofiler/3.1.9+galaxy0\" title=\"CellProfiler tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>CellProfiler</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 3.1.9+galaxy0)</span>  takes as input the pipeline that we have been assembling over this tutorial and the input data. We are now ready to finally run CellProfiler!</p>\n<blockquote class=\"hands_on\">\n  <hands-on-title>Running the pipeline with CellProfiler</hands-on-title>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/bgruening/cp_cellprofiler/cp_cellprofiler/3.1.9+galaxy0\" title=\"CellProfiler tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>CellProfiler</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 3.1.9+galaxy0)</span>  with the following parameters:\n      <ul>\n        <li><i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> <em>“Pipeline file”</em>: `output of <strong>ExportToSpreadsheet</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span></li>\n        <li><em>“Are the input images packed into a tar archive?”</em>: <code class=\"language-plaintext highlighter-rouge\">No</code>\n          <ul>\n            <li><i class=\"far fa-folder\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-collection</span> <em>“Images”</em>: output of <strong>Unzip</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span></li>\n          </ul>\n        </li>\n        <li><em>“Detailed logging file?”</em>: <code class=\"language-plaintext highlighter-rouge\">Yes</code></li>\n      </ul>\n    </li>\n    <li>\n      <p>Run the workflow.</p>\n\n      <!--SNIPPET-->\n      <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-running-a-workflow\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-running-a-workflow\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Running a workflow</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <ul>   <li>Click on <em>Workflow</em> on the top menu bar of Galaxy. You will see a list of all your workflows.</li>   <li>Click on the <i class=\"fas fa-play\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">workflow-run</span> (<em>Run workflow</em>) button next to your workflow</li>   <li>Configure the workflow as needed</li>   <li>Click the <strong>Run Workflow</strong> button at the top-right of the screen</li>   <li>You may have to refresh your history to see the queued jobs</li> </ul> </blockquote>\n      <p><!--END_SNIPPET--></p>\n\n      <blockquote class=\"comment\">\n        <comment-title></comment-title>\n\n        <p>If the pipeline fails, inspect the CellProfiler log file for clues about errors.\nA common source of errors is not providing the correct information to a module such as pointing a CellProfiler module at a non-existent dataset (e.g. with a typo in the name).</p>\n      </blockquote>\n    </li>\n  </ol>\n\n</blockquote>\n\n<figure id=\"figure-3\" style=\"max-width: 90%;\"><img src=\"../../images/object-tracking-using-cell-profiler/CP_object_tracking_sample_output.png\" alt=\"Sample output. \" width=\"1627\" height=\"809\" loading=\"lazy\" /><a target=\"_blank\" href=\"../../images/object-tracking-using-cell-profiler/CP_object_tracking_sample_output.png\" rel=\"noopener noreferrer\"><small>Open image in new tab</small></a><br /><br /><figcaption><span class=\"figcaption-prefix\"><strong>Figure 3</strong>:</span> Sample of images produced by the pipeline.</figcaption></figure>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <p>How many nuclei have been tracked?</p>\n\n  <blockquote class=\"solution\">\n    <solution-title></solution-title>\n    <p>Five objects were detected but only four of these were nuclei.</p>\n\n  </blockquote>\n\n</blockquote>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <p>How could we get rid of tracks that don’t correspond to nuclei?</p>\n\n  <blockquote class=\"solution\">\n    <solution-title></solution-title>\n\n    <p>Objects that are not nuclei appear to be transient so one solution would be to require the tracks to have a minimal length. This can be done using the <em>“Filter objects by lifetime”</em> parameter of the TrackObjects module.</p>\n\n  </blockquote>\n\n</blockquote>\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <p>Where is the data needed to plot change in nuclei eccentricity over time?</p>\n\n  <blockquote class=\"solution\">\n    <solution-title></solution-title>\n    <p>The data is in the csv file called Nuclei in the CellProfiler pipeline output data set.</p>\n\n  </blockquote>\n\n</blockquote>\n\n<h1 id=\"conclusion\">Conclusion</h1>\n\n<p>We’ve run a CellProfiler pipeline on Galaxy to segment and track dividing nuclei in a Drosophila embryo. We’ve exported images to visually inspect the outcome and saved tables of computed object features in comma-separated text files for future analysis.</p>\n"],"ref_slides":[],"hands_on":true,"slides":false,"mod_date":"2024-03-05 11:50:50 +0000","pub_date":"2021-03-17 18:17:34 +0000","version":34,"workflows":[{"workflow":"main_workflow.ga","tests":false,"url":"https://training.galaxyproject.org/training-material/topics/imaging/tutorials/object-tracking-using-cell-profiler/workflows/main_workflow.ga","path":"topics/imaging/tutorials/object-tracking-using-cell-profiler/workflows/main_workflow.ga","wfid":"imaging-object-tracking-using-cell-profiler","wfname":"main_workflow","trs_endpoint":"https://training.galaxyproject.org/training-material/api/ga4gh/trs/v2/tools/imaging-object-tracking-using-cell-profiler/versions/main_workflow","license":null,"creators":[],"name":"CP_object_tracking_example","title":"CP_object_tracking_example","test_results":null,"modified":"2024-06-17 13:07:05 +0000","mermaid":"flowchart TD\n  0[\"Starting Modules\"];\n  1[\"ℹ️ Input Dataset\\nInput dataset\"];\n  style 1 stroke:#2c3143,stroke-width:4px;\n  2[\"ColorToGray\"];\n  0 -->|output_pipeline| 2;\n  3[\"Unzip\"];\n  1 -->|output| 3;\n  4[\"IdentifyPrimaryObjects\"];\n  2 -->|output_pipeline| 4;\n  5[\"MeasureObjectSizeShape\"];\n  4 -->|output_pipeline| 5;\n  6[\"MeasureObjectIntensity\"];\n  5 -->|output_pipeline| 6;\n  7[\"TrackObjects\"];\n  6 -->|output_pipeline| 7;\n  8[\"OverlayOutlines\"];\n  7 -->|output_pipeline| 8;\n  9[\"Tile\"];\n  8 -->|output_pipeline| 9;\n  10[\"SaveImages\"];\n  9 -->|output_pipeline| 10;\n  11[\"ExportToSpreadsheet\"];\n  10 -->|output_pipeline| 11;\n  12[\"CellProfiler\"];\n  3 -->|unzipped| 12;\n  11 -->|output_pipeline| 12;\n  dab4a9ee-fb53-4c74-93f5-8a0c7f7eb13e[\"Output\\nCellProfiler pipeline output files\"];\n  12 --> dab4a9ee-fb53-4c74-93f5-8a0c7f7eb13e;\n  style dab4a9ee-fb53-4c74-93f5-8a0c7f7eb13e stroke:#2c3143,stroke-width:4px;"}],"api":"https://training.galaxyproject.org/training-material/api/topics/imaging/tutorials/object-tracking-using-cell-profiler/tutorial.json","tools":["toolshed.g2.bx.psu.edu/repos/bgruening/cp_cellprofiler/cp_cellprofiler/3.1.9+galaxy0","toolshed.g2.bx.psu.edu/repos/bgruening/cp_color_to_gray/cp_color_to_gray/3.1.9+galaxy0","toolshed.g2.bx.psu.edu/repos/bgruening/cp_common/cp_common/3.1.9+galaxy1","toolshed.g2.bx.psu.edu/repos/bgruening/cp_export_to_spreadsheet/cp_export_to_spreadsheet/3.1.9+galaxy1","toolshed.g2.bx.psu.edu/repos/bgruening/cp_identify_primary_objects/cp_identify_primary_objects/3.1.9+galaxy1","toolshed.g2.bx.psu.edu/repos/bgruening/cp_measure_object_intensity/cp_measure_object_intensity/3.1.9+galaxy0","toolshed.g2.bx.psu.edu/repos/bgruening/cp_measure_object_size_shape/cp_measure_object_size_shape/3.1.9+galaxy0","toolshed.g2.bx.psu.edu/repos/bgruening/cp_overlay_outlines/cp_overlay_outlines/3.1.9+galaxy0","toolshed.g2.bx.psu.edu/repos/bgruening/cp_save_images/cp_save_images/3.1.9+galaxy1","toolshed.g2.bx.psu.edu/repos/bgruening/cp_tile/cp_tile/3.1.9+galaxy0","toolshed.g2.bx.psu.edu/repos/bgruening/cp_track_objects/cp_track_objects/3.1.9+galaxy0","toolshed.g2.bx.psu.edu/repos/imgteam/unzip/unzip/0.2"],"supported_servers":{"exact":[{"url":"https://usegalaxy.eu","name":"UseGalaxy.eu","usegalaxy":true},{"url":"https://usegalaxy.org.au","name":"UseGalaxy.org.au","usegalaxy":true}],"inexact":[{"url":"https://usegalaxy.cz/","name":"UseGalaxy.cz","usegalaxy":false}]},"topic_name_human":"Imaging","admin_install":{"install_tool_dependencies":true,"install_repository_dependencies":true,"install_resolver_dependencies":true,"tools":[{"name":"cp_cellprofiler","owner":"bgruening","revisions":"0e4dccaafef5","tool_panel_section_label":"Imaging","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"cp_color_to_gray","owner":"bgruening","revisions":"e8f822eeb9fd","tool_panel_section_label":"Imaging","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"cp_common","owner":"bgruening","revisions":"670975e92458","tool_panel_section_label":"Imaging","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"cp_export_to_spreadsheet","owner":"bgruening","revisions":"d0178bdcd00e","tool_panel_section_label":"Imaging","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"cp_identify_primary_objects","owner":"bgruening","revisions":"b6eec6087271","tool_panel_section_label":"Imaging","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"cp_measure_object_intensity","owner":"bgruening","revisions":"407925835dd9","tool_panel_section_label":"Imaging","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"cp_measure_object_size_shape","owner":"bgruening","revisions":"acf3aa487283","tool_panel_section_label":"Imaging","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"cp_overlay_outlines","owner":"bgruening","revisions":"91560258e972","tool_panel_section_label":"Imaging","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"cp_save_images","owner":"bgruening","revisions":"33f4fa1413fb","tool_panel_section_label":"Imaging","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"cp_tile","owner":"bgruening","revisions":"443638c10c61","tool_panel_section_label":"Imaging","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"cp_track_objects","owner":"bgruening","revisions":"1fd453cd757b","tool_panel_section_label":"Imaging","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"unzip","owner":"imgteam","revisions":"38eec75fbe9b","tool_panel_section_label":"Collection Operations","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"}]},"admin_install_yaml":"---\ninstall_tool_dependencies: true\ninstall_repository_dependencies: true\ninstall_resolver_dependencies: true\ntools:\n- name: cp_cellprofiler\n  owner: bgruening\n  revisions: 0e4dccaafef5\n  tool_panel_section_label: Imaging\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: cp_color_to_gray\n  owner: bgruening\n  revisions: e8f822eeb9fd\n  tool_panel_section_label: Imaging\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: cp_common\n  owner: bgruening\n  revisions: 670975e92458\n  tool_panel_section_label: Imaging\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: cp_export_to_spreadsheet\n  owner: bgruening\n  revisions: d0178bdcd00e\n  tool_panel_section_label: Imaging\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: cp_identify_primary_objects\n  owner: bgruening\n  revisions: b6eec6087271\n  tool_panel_section_label: Imaging\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: cp_measure_object_intensity\n  owner: bgruening\n  revisions: 407925835dd9\n  tool_panel_section_label: Imaging\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: cp_measure_object_size_shape\n  owner: bgruening\n  revisions: acf3aa487283\n  tool_panel_section_label: Imaging\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: cp_overlay_outlines\n  owner: bgruening\n  revisions: 91560258e972\n  tool_panel_section_label: Imaging\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: cp_save_images\n  owner: bgruening\n  revisions: 33f4fa1413fb\n  tool_panel_section_label: Imaging\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: cp_tile\n  owner: bgruening\n  revisions: 443638c10c61\n  tool_panel_section_label: Imaging\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: cp_track_objects\n  owner: bgruening\n  revisions: 1fd453cd757b\n  tool_panel_section_label: Imaging\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: unzip\n  owner: imgteam\n  revisions: 38eec75fbe9b\n  tool_panel_section_label: Collection Operations\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n","tours":false,"video":false,"slides_recordings":false,"translations":{"tutorial":[],"slides":[],"video":false},"license":"CC-BY-4.0","type":"tutorial"}