{"layout":"tutorial_hands_on","title":"Ocean's variables study","questions":["How to process extract ocean's variables?","How to use ODV collections?","How to create climatological estimates?"],"objectives":["Deals with ODV collection with data originating from Emodnet chemistry","Visualise ocean variables to study climate changes"],"time_estimation":"1H","key_points":["Manage ODV collection's data.","Learn to extract data and visualize them on ODV","Learn to chain ODV and DIVAnd"],"tags":["earth-system","ocean","netcdf data"],"contributions":{"authorship":["Marie59"],"funding":["fairease","eurosciencegateway"]},"js_requirements":{"mathjax":null,"mermaid":false},"short_id":"T00376","url":"/topics/climate/tutorials/ocean-variables/tutorial.html","topic_name":"climate","tutorial_name":"ocean-variables","dir":"topics/climate/tutorials/ocean-variables","symlink":null,"id":"climate/ocean-variables","ref_tutorials":["<h1 id=\"introduction\">Introduction</h1>\n\n<p>Through this tutorial, you will learn in the first part how to import, visualise, and extract data from an ODV collection by using the ODV Galaxy interactive tool.\nIn the second part, you will learn how to use DIVAnd using the inputs the outputs from ODV.</p>\n\n<p>Ocean Data View (ODV) is a software package for the interactive exploration, analysis and visualization of oceanographic and other geo-referenced profile, time-series, trajectory,\nor sequence data. To know more about ODV go check the <a href=\"https://odv.awi.de/\">official page</a></p>\n\n<p>DIVAnd (Data-Interpolating Variational Analysis in n dimensions) performs an n-dimensional variational analysis/gridding of arbitrarily located observations.\nObservations will be interpolated/analyzed on a curvilinear grid in 1, 2, 3 or more dimensions. See the <a href=\"https://gher-uliege.github.io/DIVAnd-presentation/#1\">official page</a></p>\n\n<blockquote class=\"agenda\">\n  <agenda-title></agenda-title>\n\n  <p>In this tutorial, we will cover:</p>\n\n<ol id=\"markdown-toc\">\n  <li><a href=\"#introduction\" id=\"markdown-toc-introduction\">Introduction</a></li>\n  <li><a href=\"#managing-odv-galaxy-interactive-tool\" id=\"markdown-toc-managing-odv-galaxy-interactive-tool\">Managing ODV Galaxy interactive tool</a></li>\n  <li><a href=\"#ocean-data-view\" id=\"markdown-toc-ocean-data-view\">Ocean Data View</a>    <ol>\n      <li><a href=\"#visualise-your-data\" id=\"markdown-toc-visualise-your-data\">Visualise your Data</a></li>\n      <li><a href=\"#subset-data\" id=\"markdown-toc-subset-data\">Subset Data</a></li>\n      <li><a href=\"#save-data\" id=\"markdown-toc-save-data\">Save Data</a></li>\n    </ol>\n  </li>\n  <li><a href=\"#divand-data-interpolating-variational-analysis-in-n-dimensions\" id=\"markdown-toc-divand-data-interpolating-variational-analysis-in-n-dimensions\">DIVAnd: Data-Interpolating Variational Analysis in n dimensions</a>    <ol>\n      <li><a href=\"#launch-divand\" id=\"markdown-toc-launch-divand\">Launch DIVAnd</a></li>\n    </ol>\n  </li>\n  <li><a href=\"#bonus-even-more-odv\" id=\"markdown-toc-bonus-even-more-odv\">BONUS: Even more ODV</a></li>\n  <li><a href=\"#conclusion\" id=\"markdown-toc-conclusion\">Conclusion</a></li>\n  <li><a href=\"#extra-information\" id=\"markdown-toc-extra-information\">Extra information</a></li>\n</ol>\n\n</blockquote>\n\n<h1 id=\"managing-odv-galaxy-interactive-tool\">Managing ODV Galaxy interactive tool</h1>\n\n<p>ODV is now integrated in Galaxy as an interactive tool. This kind of tool works differently than classical tools as it allows the user to interact interactively with your data.\nThis kind of tool is used to give access to Jupyter Notebooks, RStudio or R Shiny apps for example.</p>\n\n<p>To use ODV, you need to use the <span class=\"tool\" data-tool=\"interactive_tool_odv\" title=\"dedicated form tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>dedicated form</strong></span>, you can specify input datasets from your history you want to use in ODV,\nthen press the <strong>execute</strong> button to launch an ODV instance. When the graphical user interface of ODV is ready to be used, a URL will be displayed at the top of the\nGalaxy center panel. If you don’t see it, you can see and access it through the “Active InteractiveTools” space of the “User” menu or you can click on <i class=\"far fa-eye\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-eye</span> on\nthe tool in the history.</p>\n\n<p>Once you finish your work on ODV, if you want to retrieve data and/or the entire project, you need to save files in ODV/galaxy/outputs, then quit ODV properly through\nthe “Project” Menu tab.</p>\n\n<blockquote class=\"details\">\n  <details-title>Short introduction on how Galaxy works</details-title>\n\n  <p>You can come back to where you left off the tutorial anytime by clicking <i class=\"fas fa-graduation-cap\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">level</span>.</p>\n\n  <blockquote class=\"hands_on\">\n    <hands-on-title>Log in to Galaxy</hands-on-title>\n    <ol>\n      <li>Open your favorite browser (Chrome, Safari or Firefox as your browser, not Internet Explorer!)</li>\n      <li>Browse to your <a href=\"https://earth-system.usegalaxy.eu/\">Galaxy instance</a></li>\n      <li>On the top panel go to <strong>Login or Register</strong></li>\n    </ol>\n\n  </blockquote>\n\n  <p>The Galaxy homepage is divided into three panels:</p>\n  <ul>\n    <li>Tools on the left</li>\n    <li>Viewing panel in the middle</li>\n    <li>History of analysis and files on the right</li>\n  </ul>\n\n  <figure id=\"figure-1\" style=\"max-width: 90%;\"><img src=\"/training-material/shared/images/galaxy_interface.png\" alt=\"Screenshot of the Galaxy interface, the tools panel is on the left, the main panel is in the center, and the history is on the right.\" width=\"2009\" height=\"969\" loading=\"lazy\" /><a target=\"_blank\" href=\"/training-material/shared/images/galaxy_interface.png\" rel=\"noopener noreferrer\"><small>Open image in new tab</small></a><br /><br /><figcaption><span class=\"figcaption-prefix\"><strong>Figure 1</strong>:</span> Galaxy interface explanation</figcaption></figure>\n\n  <p>The first time you use Galaxy, there will be no files in your history panel.</p>\n</blockquote>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title>Deploy your own ODV instance</hands-on-title>\n\n  <ol>\n    <li>\n      <p>Create a new history for this tutorial and give it a name (for example “Ocean’s variables”) for you to find it again later if needed.</p>\n\n      <!--SNIPPET-->\n      <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-creating-a-new-history\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-creating-a-new-history\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Creating a new history</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <p>Click the <i class=\"fas fa-plus\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">new-history</span> icon at the top of the history panel:</p>   <p><img src=\"/training-material/shared/images/history_create_new.svg\" alt=\"UI for creating new history\" /></p>   <!-- the original drawing can be found here https://docs.google.com/drawings/d/1cCBrLAo4kDGic5QyB70rRiWJAKTenTU8STsKDaLcVU8/edit?usp=sharing --> </blockquote>\n      <p><!--END_SNIPPET--></p>\n    </li>\n    <li>\n      <p>Import an ODV collection as a zip folder.</p>\n\n      <p>Use this link <code class=\"language-plaintext highlighter-rouge\">https://github.com/fair-ease/Data-for-Galaxy-/raw/main/Eutrophication_Med_profiles_2022_unrestricted_SNAPSHOT_2023-10-24T16-39-44.zip</code> in the following instructions.\nAnd <strong>Name</strong> it <strong>Eutrophication_Med_profiles_2022_unrestricted_SNAPSHOT_2023-10-24T16-39-44.zip</strong></p>\n\n      <!--SNIPPET-->\n      <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-importing-via-links\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-importing-via-links\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Importing via links</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <ul>   <li>Copy the link location</li>   <li>     <p>Click <i class=\"fas fa-upload\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-upload</span> <strong>Upload Data</strong> at the top of the tool panel</p>   </li>   <li>Select <i class=\"fa fa-edit\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-wf-edit</span> <strong>Paste/Fetch Data</strong></li>   <li>     <p>Paste the link(s) into the text field</p>   </li>   <li>     <p>Press <strong>Start</strong></p>   </li>   <li><strong>Close</strong> the window</li> </ul> </blockquote>\n      <p><!--END_SNIPPET--></p>\n    </li>\n    <li><span class=\"tool\" data-tool=\"interactive_tool_odv\" title=\"Ocean Data View tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>Ocean Data View</strong></span> with the following parameters:\n      <ul>\n        <li><em>“Select if you are using an ODV collection in a zip folder or if you have your own raw data”</em>: <code class=\"language-plaintext highlighter-rouge\">The data you are using are an ODV collection in a zip folder</code></li>\n        <li><em>“ODV collection in a zip folder.”</em>: <code class=\"language-plaintext highlighter-rouge\">Eutrophication_Med_profiles_2022_unrestricted_SNAPSHOT_2023-10-24T16-39-44.zip</code></li>\n      </ul>\n\n      <p><a href=\"../../images/ocean_var/launching_odv.png\" rel=\"noopener noreferrer\"><img src=\"../../images/ocean_var/launching_odv.png\" alt=\"Screenshot of what parameters to input in ODV before running the tool. \" width=\"1920\" height=\"804\" loading=\"lazy\" /></a></p>\n    </li>\n    <li>Click on <strong>Run Tool</strong></li>\n  </ol>\n\n  <!--SNIPPET-->\n  <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-open-interactive-tool\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-open-interactive-tool\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Open interactive tool</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <ol>   <li>Go to User &gt; Active InteractiveTools</li>   <li>Wait for the ODV to be running (Job Info)</li>   <li>Click on ODV</li> </ol> </blockquote>\n  <p><!--END_SNIPPET--></p>\n\n</blockquote>\n\n<blockquote class=\"details\">\n  <details-title> Some complementary information about your data </details-title>\n  <p>The data here are Mediterranean Sea - Eutrophication and Acidity aggregated datasets\nEMODnet Chemistry aims to provide access to marine chemistry datasets and derived data products concerning eutrophication, acidity, and contaminants. The importance of the selected substances and other parameters relates to the Marine Strategy Framework Directive (MSFD). This aggregated dataset contains all unrestricted EMODnet Chemistry data on eutrophication and acidity and covers the Mediterranean Sea. Data were aggregated and quality controlled by the ‘Hellenic Centre for Marine Research, Hellenic National Oceanographic Data Centre (HCMR/HNODC)’ in Greece. To get more ODV collection and other data please  <a href=\"https://sextant.ifremer.fr/eng/Data/Catalogue#/search?isTemplate=n&amp;from=1&amp;to=30&amp;sortBy=dateStamp&amp;sortOrder=desc&amp;languageStrategy=searchInDetectedLanguage&amp;any=EMODnet%20Chemistry\">search the sextant catalogue</a> or the <a href=\"https://emodnet-chemistry.webodv.awi.de/\">EMODnet Chemistry catalogue</a>.</p>\n\n  <p>ITS-90 water temperature and water body salinity variables have also been included (‘as are’) to complete the eutrophication and acidity data. If you use these variables for calculations, please refer to SeaDataNet for the quality flags: https://www.seadatanet.org/Products/Aggregated-datasets.</p>\n\n  <p>Regional datasets concerning eutrophication and acidity are automatically harvested, and the resulting collections are aggregated and quality-controlled using ODV Software and following a common methodology for all sea regions <span class=\"citation\"><a href=\"#emodnet\">Lipizer <i>et al.</i> 2023</a></span>. Parameter names are based on P35 vocabulary, which relates to EMODnet Chemistry aggregated parameter names and is available at: https://vocab.nerc.ac.uk/search_nvs/P35/.</p>\n\n  <p>When not present in the original data, water body nitrate plus nitrite was calculated by summing all nitrate and nitrite parameters. The same procedure was applied for water body dissolved inorganic nitrogen (DIN), which was calculated by summing all nitrate, nitrite, and ammonium parameters. Concentrations per unit mass were converted to a unit volume using a constant density of 1.025 kg/L. <span class=\"citation\"><a href=\"#hcmrdata\">Hellenic Centre for Marine Research, Hellenic National Oceanographic Data Centre (HCMR/HNODC) 2022</a></span></p>\n\n</blockquote>\n\n<h1 id=\"ocean-data-view\">Ocean Data View</h1>\n<h2 id=\"visualise-your-data\">Visualise your Data</h2>\n\n<blockquote class=\"tip\">\n  <tip-title>Copy pasting between computer and ODV</tip-title>\n  <p>You can expand the ODV left panel (where there are 3 dots, vertically) to access the “clipboard” menu and paste the content you want to paste on an ODV form. From there you can copy-paste everything from one side to the other. Then, click outside of this panel to collapse it.</p>\n\n  <p><a href=\"../../images/coastal_water_dyn/clipboard.png\" rel=\"noopener noreferrer\"><img src=\"../../images/coastal_water_dyn/clipboard.png\" alt=\"Image showing in transparent on the left of the ODV interface the clipboard. \" width=\"1918\" height=\"1029\" loading=\"lazy\" /></a></p>\n</blockquote>\n\n<blockquote class=\"tip\">\n  <tip-title>ODV - Disconnected</tip-title>\n  <p>If at one point your ODV interface becomes grey with a red panel on the top “X ODV - Disconnected”, do NOT panic ;) you just need to reload your tab (circular arrow top left)</p>\n</blockquote>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title>Loading data</hands-on-title>\n\n  <ol>\n    <li>Click on close of the pop-up screen for the check for Updates</li>\n    <li>Go the top left and click on <strong>File</strong>, then on <strong>Open…</strong></li>\n    <li>On the pop-up screen on the left panel select <strong>ODV</strong>, then the folder <strong>galaxy</strong>, then <strong>data</strong>. \nYou should see a folder open it (double clicking)</li>\n    <li>Select the file with a .odv extension \n <a href=\"../../images/ocean_var/select_data.png\" rel=\"noopener noreferrer\"><img src=\"../../images/ocean_var/select_data.png\" alt=\"Screenshot of what your pop-up screen should be like when selecting the right data. \" width=\"632\" height=\"439\" loading=\"lazy\" /></a></li>\n    <li>Click on <strong>Open</strong> in the bottom right</li>\n  </ol>\n\n  <p>There your data should be opening an you can now visualise them!</p>\n</blockquote>\n<p><a href=\"../../images/ocean_var/visualise_data.png\" rel=\"noopener noreferrer\"><img src=\"../../images/ocean_var/visualise_data.png\" alt=\"Visualistation on an ODV map of the ODV collection. \" width=\"1917\" height=\"1032\" loading=\"lazy\" /></a></p>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <ol>\n    <li>What are the longitude and latitude of the red dot?</li>\n  </ol>\n\n  <blockquote class=\"solution\">\n    <solution-title></solution-title>\n\n    <ol>\n      <li>On the to right window you can read Longitude 34°E and Latitude 32.332°N.</li>\n    </ol>\n\n  </blockquote>\n\n</blockquote>\n\n<h2 id=\"subset-data\">Subset Data</h2>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title>Create a subset</hands-on-title>\n  <ol>\n    <li>On the left smaller map right click and select <strong>Zoom</strong></li>\n    <li>Then move your cursor on the map you should see a red rectangle moving along</li>\n    <li>Reduce the rectangular to have the selection you want on the map. It can be something similar to the following image (no need to be exactly the same)\n <a href=\"../../images/ocean_var/select_subset.png\" rel=\"noopener noreferrer\"><img src=\"../../images/ocean_var/select_subset.png\" alt=\"Selection on the map of the part of the data that you want to analyse. \" width=\"1073\" height=\"932\" loading=\"lazy\" /></a></li>\n    <li>Once you’re happy with your selection click on <strong>Enter</strong> on your keyboard.\n <a href=\"../../images/ocean_var/subset.png\" rel=\"noopener noreferrer\"><img src=\"../../images/ocean_var/subset.png\" alt=\"Result of the subsetting and how the maps should look now. \" width=\"1918\" height=\"1035\" loading=\"lazy\" /></a></li>\n  </ol>\n\n  <p>Here you have created a a subset of your data.</p>\n</blockquote>\n\n<blockquote class=\"tip\">\n  <tip-title>Change your visualisation properties</tip-title>\n  <ol>\n    <li>Go to the central map</li>\n    <li>Click right and select <strong>Properties…</strong></li>\n    <li>For example, make your data dots bigger in “Display Style” increase the number below “Symbol Size” to 50, and click <strong>OK</strong>\n<a href=\"../../images/ocean_var/size_dots.png\" rel=\"noopener noreferrer\"><img src=\"../../images/ocean_var/size_dots.png\" alt=\"Image on how to change the size of your dots. \" width=\"658\" height=\"653\" loading=\"lazy\" /></a></li>\n  </ol>\n\n  <p>You can now see bigger dots representing your data.\n<a href=\"../../images/ocean_var/big_dots.png\" rel=\"noopener noreferrer\"><img src=\"../../images/ocean_var/big_dots.png\" alt=\"Image of your maps after the increase of the dots' size. \" width=\"1916\" height=\"965\" loading=\"lazy\" /></a></p>\n\n  <p>If you already saved it once you just have to click left on the save icon (top left) when it’s red.</p>\n</blockquote>\n\n<h2 id=\"save-data\">Save Data</h2>\n<blockquote class=\"notranslate hands_on gtn-cyoa\" id=\"gtn-cyoa\">\n\t<div class=\"box-title\" aria-label=\"hands-on box: choose your own tutorial\"><i class=\"fas fa-pencil-alt\" aria-hidden=\"true\"></i><span class=\"visually-hidden\"></span> Hands-on: Choose Your Own Tutorial</div>\n\t<p>This is a \"Choose Your Own Tutorial\" section, where you can select between multiple paths. Click one of the buttons below to select how you want to follow the tutorial</p>\n\t\n\t<p>\n\t\tHere you can choose if you want to save your view as an ODV view in xview format (you will not able to directly visualise it on Galaxy) or if you want to save it in png which you can visualise on Galaxy.\n\t</p>\n\t\n\t\n\t\t<input id=\"cyoa-opt1\" type=\"radio\" name=\"cyoa\" value=\"xview\" onclick=\"cyoaChoice('xview', 'gtn-cyoa')\" />\n\t\t<label for=\"cyoa-opt1\" class=\"select btn btn-secondary\">xview</label>\n\t\n\t\n\t\t<input id=\"cyoa-opt2\" type=\"radio\" name=\"cyoa\" value=\"png\" onclick=\"cyoaChoice('png', 'gtn-cyoa')\" />\n\t\t<label for=\"cyoa-opt2\" class=\"select btn btn-secondary\">png</label>\n\t\n\t\n\t\n\n\t\n\t<script>\n\t\tfunction ready(fn) {\n\t\t\tif (document.readyState != 'loading'){\n\t\t\t\tfn();\n\t\t\t} else {\n\t\t\t\tdocument.addEventListener('DOMContentLoaded', fn);\n\t\t\t}\n\t\t}\n\t\tready(function() {\n\t\t\tcyoaDefault(\"png\", \"gtn-cyoa\");\n\t\t})\n\t</script>\n\t\n</blockquote>\n\n<div class=\"xview\">\n  <blockquote class=\"hands_on\">\n    <hands-on-title>Save your subset view</hands-on-title>\n    <ol>\n      <li>On the top left of your screen, you can see a red save button. Right-click on it.</li>\n      <li>In the pop-up screen go to the folder <strong>ODV</strong>, <strong>galaxy</strong>, <strong>outputs</strong>.</li>\n      <li>In <strong>File name</strong> rename your view (for example subset_Eutrophication_Med_profiles_2022), and <strong>Save</strong>.</li>\n    </ol>\n  </blockquote>\n</div>\n<div class=\"png\">\n  <blockquote class=\"hands_on\">\n    <hands-on-title>Save your subset map</hands-on-title>\n    <ol>\n      <li>Click right on the map and select <strong>Save Plot As…</strong></li>\n      <li>In the pop-up screen go to the folder <strong>ODV</strong>, <strong>galaxy</strong>, <strong>outputs</strong>.</li>\n      <li>In <strong>File name</strong> rename your view (for example subset_Eutrophication_Med_profiles_2022_1)</li>\n      <li>In <strong>Files of type</strong> select <code class=\"language-plaintext highlighter-rouge\">PNG (*.png *.PNG)</code> and <strong>Save</strong> then <strong>OK</strong> and <strong>OK</strong>.</li>\n    </ol>\n  </blockquote>\n</div>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title>Extract your variables in netcdf data</hands-on-title>\n  <p>Now we want to extract and save the right parameters of your data in netcdf format.</p>\n  <ol>\n    <li>Go to the the left and click on <strong>Export</strong>, <strong>Data</strong> and <strong>NetCDF File…</strong></li>\n    <li>In the pop-up screen go to the folder <strong>ODV</strong>, <strong>galaxy</strong>, <strong>outputs</strong>.</li>\n    <li>Click <strong>Save</strong></li>\n    <li>A new pop-up window opens “Select Extended Metadata Variables for Export” Let the 56 items selected and click <strong>OK</strong></li>\n    <li>“Select Data Variables for Export”  <code class=\"language-plaintext highlighter-rouge\">here you need to select 1: Depth[m]</code>, ̀<code class=\"language-plaintext highlighter-rouge\">4: Water body dissolved oxygen concentration [umol/l]</code>, <code class=\"language-plaintext highlighter-rouge\">6: Water body phosphate [umol/l]</code> and click <strong>OK</strong>\n <a href=\"../../images/ocean_var/select_var.png\" rel=\"noopener noreferrer\"><img src=\"../../images/ocean_var/select_var.png\" alt=\"Screenshot of the variables one needs to select. \" width=\"911\" height=\"812\" loading=\"lazy\" /></a></li>\n    <li>“NetCDF File Properties” change the <strong>Longitude range</strong> to <code class=\"language-plaintext highlighter-rouge\">[-180 ... 180] degrees_E</code>, then select <code class=\"language-plaintext highlighter-rouge\">Export metadata quality flags</code> and <code class=\"language-plaintext highlighter-rouge\">Export data quality flags</code> and <strong>OK</strong>.</li>\n    <li>And <strong>OK</strong> again</li>\n  </ol>\n\n  <p>You now know how to export and save the right variables on ODV to netCDF data.</p>\n</blockquote>\n\n<p>Now, if you have finished with your analysis you can exit ODV. To do so you need to do it properly.</p>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title>Exit ODV and go back on Galaxy</hands-on-title>\n  <ol>\n    <li>On the top left click on <strong>File</strong> select <strong>Exit</strong></li>\n    <li>If you want to save the other window also click on <strong>Yes</strong>. Here we don’t need it so click <strong>No</strong>.</li>\n  </ol>\n\n  <p>You can now go back to your Galaxy instance.\nNow, after waiting for everything to turn green in your history, you can see 2 new outputs\n<a href=\"../../images/ocean_var/history.png\" rel=\"noopener noreferrer\"><img src=\"../../images/ocean_var/history.png\" alt=\"Screenshot of the 2 new outputs present in your galaxy History. \" width=\"301\" height=\"430\" loading=\"lazy\" /></a></p>\n\n  <p>In the history panel in the output <strong>ODV all outputs</strong> click on the <i class=\"far fa-eye\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-eye</span> (eye) icon of your output.</p>\n\n  <p>You can now visualize the outputs in Galaxy middle panel.</p>\n\n  <p><a href=\"../../images/ocean_var/text.png\" rel=\"noopener noreferrer\"><img src=\"../../images/ocean_var/text.png\" alt=\"Screenshot of the text output showing the variables selected. \" width=\"1915\" height=\"691\" loading=\"lazy\" /></a>\n<a href=\"../../images/ocean_var/galaxy_output.png\" rel=\"noopener noreferrer\"><img src=\"../../images/ocean_var/galaxy_output.png\" alt=\"Image in the middle pannel of the map. \" width=\"1614\" height=\"1026\" loading=\"lazy\" /></a></p>\n</blockquote>\n\n<h1 id=\"divand-data-interpolating-variational-analysis-in-n-dimensions\">DIVAnd: Data-Interpolating Variational Analysis in n dimensions</h1>\n\n<blockquote class=\"tip\">\n  <tip-title>Check Datatype</tip-title>\n  <p>Go to your output ‘data_from_Eutrophication_Med_profiles_2022_unrestricted’</p>\n\n  <p>Check if the datatype is <strong>netcdf</strong> if not :</p>\n\n  <!--SNIPPET-->\n  <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-changing-the-datatype\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-changing-the-datatype\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Changing the datatype</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <ul>   <li>Click on the <i class=\"fas fa-pencil-alt\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-pencil</span> <strong>pencil icon</strong> for the dataset to edit its attributes</li>   <li>In the central panel, click <i class=\"fas fa-database\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-chart-select-data</span> <strong>Datatypes</strong> tab on the top</li>   <li>In the <i class=\"fas fa-database\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-chart-select-data</span> <strong>Assign Datatype</strong>, select  your desired datatype  from “<em>New type</em>” dropdown     <ul>       <li>Tip: you can start typing the datatype into the field to filter the dropdown menu</li>     </ul>   </li>   <li>Click the <strong>Save</strong> button</li> </ul> </blockquote>\n  <p><!--END_SNIPPET--></p>\n</blockquote>\n\n<h2 id=\"launch-divand\">Launch DIVAnd</h2>\n<p>Use ODV outputs as DIVAnd input.</p>\n<blockquote class=\"hands_on\">\n  <hands-on-title>Run DIVANnd</hands-on-title>\n\n  <ol>\n    <li>Use <span class=\"tool\" data-tool=\"interactive_tool_divand\" title=\"DIVAnd tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>DIVAnd</strong></span> with the following parameters:\n      <ul>\n        <li><em>“Do you already have a notebook”</em>: <code class=\"language-plaintext highlighter-rouge\">Start with a fresh notebook</code></li>\n        <li><em>“Include data into the environment”</em>: <code class=\"language-plaintext highlighter-rouge\">ODV netcdf outputs</code> (output of <strong>Ocean Data View</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span>)</li>\n      </ul>\n    </li>\n    <li><strong>Run tool</strong></li>\n    <li>\n      <!--SNIPPET-->\n      <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-open-interactive-tool-1\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-open-interactive-tool-1\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Open interactive tool</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <ol>   <li>Go to User &gt; Active InteractiveTools</li>   <li>Wait for the DIVAnd to be running (Job Info)</li>   <li>Click on DIVAnd</li> </ol> </blockquote>\n      <p><!--END_SNIPPET--></p>\n    </li>\n  </ol>\n</blockquote>\n\n<blockquote class=\"hands-on\">\n  <hands-on-title>Navigate the jupyterlab</hands-on-title>\n  <ol>\n    <li>Once in the Jupyterlab, go to the <strong>Notebooks</strong> folder.</li>\n    <li>There open a terminal window and write :\n      <div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>wget https://raw.githubusercontent.com/fair-ease/Divand-Galaxy-ext/main/90-analysis-shorten.ipynb\n</code></pre></div>      </div>\n    </li>\n    <li>Run the entire notebook.</li>\n  </ol>\n\n  <p>In the first ‘outputs’ folder (at the root of the Jupyterlab folders), you should now have one netcdf file “Water_body_Phosphate_Mediterranean”.</p>\n\n  <p>So, you can now properly close the Jupyter notebook.</p>\n\n  <ol>\n    <li>On the top left click on <strong>files</strong> and then on <strong>Shut down</strong>.</li>\n    <li>Go back to your Galaxy instance.</li>\n  </ol>\n</blockquote>\n\n<p>After a couple of minutes, your outputs should appear in your Galaxy history.</p>\n\n<h1 id=\"bonus-even-more-odv\">BONUS: Even more ODV</h1>\n\n<p>Do you want to go even further and visualise your new netcdf data? (Because this tutorial is fascinating and you want to keep reading ;))</p>\n\n<blockquote class=\"hands-on\">\n  <hands-on-title>Open your Netcdf data in ODV</hands-on-title>\n  <p><span class=\"tool\" data-tool=\"interactive_tool_odv\" title=\"Ocean Data View tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>Ocean Data View</strong></span> with the following parameters:</p>\n  <ul>\n    <li><em>“Select if you are using an ODV collection in a zip folder or if you have your own raw data”</em>: <code class=\"language-plaintext highlighter-rouge\">The data you are using are Netcdf or text tabular files</code></li>\n    <li><em>“Netcdf or tabular text file. For text file, odv format is recommanded.”</em>: <code class=\"language-plaintext highlighter-rouge\">DIVAnd netcdf outputs</code> (output of <strong>DIVAnd</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span>)</li>\n  </ul>\n\n  <p>Click on <strong>Run Tool</strong></p>\n\n  <!--SNIPPET-->\n  <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-open-interactive-tool-2\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-open-interactive-tool-2\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Open interactive tool</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <ol>   <li>Go to User &gt; Active InteractiveTools</li>   <li>Wait for the ODV to be running (Job Info)</li>   <li>Click on ODV</li> </ol> </blockquote>\n  <p><!--END_SNIPPET--></p>\n\n  <ol>\n    <li>Click on close of the pop-up screen for the check for Updates</li>\n    <li>Go the top left and click on <strong>File</strong>, then on <strong>Open…</strong></li>\n    <li>On the pop-up screen on the left panel select <strong>ODV</strong>, then the folder <strong>galaxy</strong>, then <strong>data</strong>. \nYou should see a file open it (double clicking)</li>\n    <li>Click on <strong>Open</strong> in the bottom right. Then click on <strong>Next*$ until you can click on **Finish</strong> you can keep everything by default.</li>\n  </ol>\n\n  <p>There your data should be opening and you can now visualise them!\n<a href=\"../../images/ocean_var/med_view.png\" rel=\"noopener noreferrer\"><img src=\"../../images/ocean_var/med_view.png\" alt=\"Image of what the netcdf files look like when opening with ODV. \" width=\"1838\" height=\"936\" loading=\"lazy\" /></a></p>\n\n</blockquote>\n\n<blockquote class=\"hands-on\">\n  <hands-on-title>Visualise your Phosphate variable</hands-on-title>\n  <ol>\n    <li>Go on the big <strong>+</strong> on the top left</li>\n    <li>Select “1 SURFACE Window”\n <a href=\"../../images/ocean_var/surface_window.png\" rel=\"noopener noreferrer\"><img src=\"../../images/ocean_var/surface_window.png\" alt=\"Create a surface plot for the phosphate. \" width=\"591\" height=\"598\" loading=\"lazy\" /></a></li>\n    <li>Press right on the new plot and select <strong>Properties…</strong>\n <a href=\"../../images/ocean_var/properties.png\" rel=\"noopener noreferrer\"><img src=\"../../images/ocean_var/properties.png\" alt=\"Going to the properties of the plot. \" width=\"1538\" height=\"914\" loading=\"lazy\" /></a></li>\n    <li>In the tab “Display Style” increase the “Symbol size” to 22 for instance</li>\n    <li>In the tab “Color Mapping” increase the level of the “Median” part and lower the “Nonlinearity” such as in the following picture\n <a href=\"../../images/ocean_var/colors.png\" rel=\"noopener noreferrer\"><img src=\"../../images/ocean_var/colors.png\" alt=\"Balance the colors of the map to better visualise the Phosphate repartition. \" width=\"659\" height=\"652\" loading=\"lazy\" /></a></li>\n    <li>\n      <p>Then, click on <strong>OK</strong>, and you can see the Phosphate repartition.</p>\n    </li>\n    <li>Click right on the map and select <strong>Save Plot As…</strong></li>\n    <li>In the pop-up screen go to the folder <strong>ODV</strong>, <strong>galaxy</strong>, <strong>outputs</strong>.</li>\n    <li>In <strong>Files of type</strong> select <code class=\"language-plaintext highlighter-rouge\">PNG (*.png *.PNG)</code> and <strong>Save</strong> then <strong>OK</strong> and <strong>OK</strong>.</li>\n  </ol>\n\n  <p>If you want to have a visualisation of the Phosphate according to the depth, you can do the following.</p>\n  <ol>\n    <li>Go on the big <strong>+</strong> on the top left</li>\n    <li>Select “1 STATION Window” in the new tab, in the plot press enter on your keyboard.</li>\n    <li>Same as before to save it, click right on the map and select <strong>Save Plot As…</strong></li>\n    <li>In <strong>Files of type</strong> select <code class=\"language-plaintext highlighter-rouge\">PNG (*.png *.PNG)</code> and <strong>Save</strong> then <strong>OK</strong> and <strong>OK</strong>.</li>\n  </ol>\n\n  <p>You can now safely exit ODV.</p>\n  <ol>\n    <li>On the top left click on <strong>File</strong> select <strong>Exit</strong></li>\n    <li>If you want to save the other window also click on <strong>Yes</strong>. Here we don’t need it so click <strong>No</strong>.</li>\n  </ol>\n</blockquote>\n\n<h1 id=\"conclusion\">Conclusion</h1>\n\n<p>Great you now know how to extract ocean variables from an ODV collection and use these extracted data in DIVAnd.\nFrom there you can grid the phosphate variable on the subset extracted create a netcdf file and visualise it on ODV again.\nWe finished with the last results visible on the galaxy instance in the output <strong>ODV all outputs</strong> :\n<a href=\"../../images/ocean_var/phosphate_map.png\" rel=\"noopener noreferrer\"><img src=\"../../images/ocean_var/phosphate_map.png\" alt=\"Resulting map of the Phoshate variable repartition in the Mediterranean sea. \" width=\"1841\" height=\"941\" loading=\"lazy\" /></a>\n<a href=\"../../images/ocean_var/phosphate_graph.png\" rel=\"noopener noreferrer\"><img src=\"../../images/ocean_var/phosphate_graph.png\" alt=\"Resulting graph of the phosphate variable according to the depth. \" width=\"1842\" height=\"936\" loading=\"lazy\" /></a></p>\n\n<h1 id=\"extra-information\">Extra information</h1>\n\n<p>Coming up soon even more tutorials on and other Earth-System related trainings. Keep an <i class=\"far fa-eye\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-eye</span> open if you are interested!</p>\n"],"ref_slides":[],"video_library":{"tutorial":null,"slides":null,"demo":null,"both":null,"session":null},"hands_on":true,"slides":false,"mod_date":"2024-03-25 07:55:20 +0000","pub_date":"2023-11-29 17:38:31 +0000","version":18,"workflows":[{"workflow":"main_workflow.ga","tests":true,"url":"https://training.galaxyproject.org/training-material/topics/climate/tutorials/ocean-variables/workflows/main_workflow.ga","path":"topics/climate/tutorials/ocean-variables/workflows/main_workflow.ga","wfid":"climate-ocean-variables","wfname":"main_workflow","trs_endpoint":"https://training.galaxyproject.org/training-material/api/ga4gh/trs/v2/tools/climate-ocean-variables/versions/main_workflow","license":"CC-BY-4.0","creators":[{"class":"Person","identifier":"0009-0008-0622-604X","name":"Marie Jossé","url":"https://github.com/Marie59"}],"name":"Ocean's variables","title":"Ocean's variables","test_results":null,"modified":"2024-06-13 08:34:24 +0000","mermaid":"flowchart TD\n  0[\"ℹ️ Input Dataset\\nEutrophication_Med_profiles_2022_unrestricted_SNAPSHOT_2023-10-24T16-39-44.zip\"];\n  style 0 stroke:#2c3143,stroke-width:4px;\n  1[\"ODV\"];\n  0 -->|output| 1;\n  2[\"Interactive DIVAnd Notebooks\"];\n  1 -->|outputs_netcdf| 2;\n  3[\"ODV\"];\n  2 -->|output_netcdf| 3;"}],"api":"https://training.galaxyproject.org/training-material/api/topics/climate/tutorials/ocean-variables/tutorial.json","tools":["interactive_tool_divand","interactive_tool_odv"],"supported_servers":{"exact":[{"url":"https://usegalaxy.eu","name":"UseGalaxy.eu","usegalaxy":true}],"inexact":[]},"topic_name_human":"Climate","admin_install":{"install_tool_dependencies":true,"install_repository_dependencies":true,"install_resolver_dependencies":true,"tools":[]},"admin_install_yaml":"---\ninstall_tool_dependencies: true\ninstall_repository_dependencies: true\ninstall_resolver_dependencies: true\ntools: []\n","tours":false,"video":false,"translations":{"tutorial":[],"slides":[],"video":false},"license":"CC-BY-4.0","type":"tutorial","contributors":[{"name":"Marie Josse","joined":"2022-03","email":"marie.josse@ifremer.fr","affiliations":["pndb","fairease"],"id":"Marie59","url":"https://training.galaxyproject.org/training-material/api/contributors/Marie59.json","page":"https://training.galaxyproject.org/training-material/hall-of-fame/Marie59/"},{"name":"Fair-Ease","github":false,"joined":"2023-10","avatar":"/training-material/assets/images/fair_ease_colour.png","url":"https://training.galaxyproject.org/training-material/api/funders/fairease.json","funder":true,"funding_id":"101058785","funding_system":"cordis","funding_statement":"FAIR-EASE is a RIA project funded under HORIZON-INFRA-2021-EOSC-01-04, and it involves a consortium of 25 partners from all over Europe.","members":["Marie59","yvanlebras"],"id":"fairease","page":"https://training.galaxyproject.org/training-material/hall-of-fame/fairease/"},{"name":"EuroScienceGateway","github":false,"joined":"2023-10","avatar":"/training-material/assets/images/eurosciencegateway.png","url":"https://training.galaxyproject.org/training-material/api/funders/eurosciencegateway.json","funder":true,"funding_id":"101057388","funding_system":"cordis","funding_statement":"EuroScienceGateway was funded by the European Union programme Horizon Europe (HORIZON-INFRA-2021-EOSC-01-04) under grant agreement number 101057388 and by UK Research and Innovation (UKRI) under the UK government’s Horizon Europe funding guarantee grant number 10038963.","members":["abretaud","anuprulez","bgruening","erxleben","pauldg","rlibouba"],"id":"eurosciencegateway","page":"https://training.galaxyproject.org/training-material/hall-of-fame/eurosciencegateway/"}]}