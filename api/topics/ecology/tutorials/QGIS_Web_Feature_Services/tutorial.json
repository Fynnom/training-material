{"layout":"tutorial_hands_on","title":"QGIS Web Feature Services","questions":["How to use WFS webservice to access and import GIS data through Galaxy"],"objectives":["Deal with QGIS execution management","Access, filter, and import GIS data using WFS webservice"],"time_estimation":"0H30M","key_points":["From WFS webservice, you can now access GIS remote data, build a query to select a subpart of the data, and import it to Galaxy through QGIS Galaxy interactive tool."],"tags":["GIS","Geographical Information System","WFS","Spatial data","QGIS","Maps","OGC"],"contributions":{"authorship":["colineroyaux","Marie59","yvanlebras"],"funding":["gallantries","fairease","pndb"]},"js_requirements":{"mathjax":null,"mermaid":false},"short_id":"T00367","url":"/topics/ecology/tutorials/QGIS_Web_Feature_Services/tutorial.html","topic_name":"ecology","tutorial_name":"QGIS_Web_Feature_Services","dir":"topics/ecology/tutorials/QGIS_Web_Feature_Services","symlink":null,"id":"ecology/QGIS_Web_Feature_Services","ref_tutorials":["<p>Based on this <a href=\"https://docs.qgis.org/2.18/en/docs/training_manual/online_resources/wfs.html\">QGIS official tutorial</a>, you will learn here how to access, filter and import GIS data through WFS web service using QGIS Galaxy interactive tool:</p>\n\n<p>In the Geographical Information System landscape, there is existing standards to help users deal with remote data. The most common web services are Web Map Services (WMS) and Web Feature Services (WFS). If WMS allows users only to access and display maps stored remotely, WFS is giving access to the features of data so you can modify it and create your own data and maps.</p>\n\n<blockquote class=\"agenda\">\n  <agenda-title></agenda-title>\n\n  <p>In this tutorial, we will cover:</p>\n\n<ol id=\"markdown-toc\">\n  <li><a href=\"#managing-qgis-galaxy-interactive-tool\" id=\"markdown-toc-managing-qgis-galaxy-interactive-tool\">Managing QGIS Galaxy interactive tool</a></li>\n  <li><a href=\"#web-feature-services\" id=\"markdown-toc-web-feature-services\">Web Feature Services</a>    <ol>\n      <li><a href=\"#loading-wfs-layer\" id=\"markdown-toc-loading-wfs-layer\">Loading WFS layer</a></li>\n      <li><a href=\"#querying-a-wfs-layer\" id=\"markdown-toc-querying-a-wfs-layer\">Querying a WFS layer</a></li>\n    </ol>\n  </li>\n  <li><a href=\"#conclusion\" id=\"markdown-toc-conclusion\">Conclusion</a></li>\n</ol>\n\n</blockquote>\n\n<h1 id=\"managing-qgis-galaxy-interactive-tool\">Managing QGIS Galaxy interactive tool</h1>\n\n<p>QGIS is now integrated in Galaxy as an interactive tool. This kind of tool works differently than classical tools as it allows the user to interact with a dedicated graphical interface.</p>\n\n<p>To use QGIS, you need to use the <span class=\"tool\" data-tool=\"interactive_tool_qgis\" title=\"dedicated form tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>dedicated form</strong></span>, you can specify input datasets from your history you want to use in QGIS, or not ;), then press the execute button to launch a QGIS instance. When the graphical user interface of QGIS is ready to be used, a URL will be displayed at the top of the Galaxy center panel. If you don’t see it, you can see and access it through the “Active InteractiveTools” space of the “User” menu or you can click on <i class=\"far fa-eye\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-eye</span> on the tool in the history.</p>\n\n<p>Once you finish your work on QGIS, if you want to reuse data and/or the entire project, you need to save files in the “output” folder (which you can find in the “working” directory). \nThen, quit QGIS properly through the “Project” Menu tab top left and click on “Exit QGIS”.</p>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title>Deploy your own QGIS instance</hands-on-title>\n\n  <ol>\n    <li>Create a new history for this tutorial</li>\n    <li>Deploy a <span class=\"tool\" data-tool=\"interactive_tool_qgis\" title=\"QGIS instance tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>QGIS instance</strong></span></li>\n    <li>Access QGIS</li>\n    <li>Save your project in /working/output folder</li>\n  </ol>\n\n</blockquote>\n\n<h1 id=\"web-feature-services\">Web Feature Services</h1>\n<h2 id=\"loading-wfs-layer\">Loading WFS layer</h2>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title>Loading WFS layer</hands-on-title>\n\n  <ol>\n    <li>Go to the top left of QGIS and click on “Layer”</li>\n    <li>Click on the 1st option “Data Source Manager”</li>\n    <li>Select “WFS / OGC API - Features” on the left part of the pop-up panel</li>\n    <li>Click the “New” button</li>\n    <li>\n      <p>In the dialog that appears, enter the Name as <code class=\"language-plaintext highlighter-rouge\">nsidc</code> and the URL as <code class=\"language-plaintext highlighter-rouge\">http://nsidc.org/cgi-bin/atlas_south?version=1.1.0</code>.</p>\n\n      <blockquote class=\"tip\">\n        <tip-title>copy pasting from computer to QGIS</tip-title>\n\n        <p>You can expand the QGIS left panel (where there are 3 dots, vertically) to access the “clipboard” menu and paste the content you want to paste on a QGIS form. Then, click outside of this panel to collapse it, and you can click for example on the <code class=\"language-plaintext highlighter-rouge\">url</code> field to paste the URL from your clipboard</p>\n\n        <p><a href=\"../../images/QGIS/qgistuto1.PNG\" rel=\"noopener noreferrer\"><img src=\"../../images/QGIS/qgistuto1.PNG\" alt=\"Image of QGIS interface with on the left the clipboard panel in transparent where you can use the copy paste option.\" width=\"1787\" height=\"924\" loading=\"lazy\" /></a></p>\n      </blockquote>\n    </li>\n    <li>Click OK, then you can create the connection with the “connect” button to see a list of available layers</li>\n    <li>Find and select the <code class=\"language-plaintext highlighter-rouge\">antarctica_country_border</code> (Antartica border) layer</li>\n    <li>Find and select, holding the “CTRL” button, the <code class=\"language-plaintext highlighter-rouge\">south_poles_wfs</code> (South border) layer</li>\n    <li>Unselect “only request features overlapping the view extent” option then click “add”\n  <a href=\"../../images/QGIS/qgistuto3.PNG\" rel=\"noopener noreferrer\"><img src=\"../../images/QGIS/qgistuto3.PNG\" alt=\"Image of QGIS interface to help you see which layers to select in the WFS / OGC API features. \" width=\"874\" height=\"551\" loading=\"lazy\" /></a></li>\n    <li>You now have Antarctica border displayed with a symbol showing the south pole\n  <a href=\"../../images/QGIS/qgistuto4.PNG\" rel=\"noopener noreferrer\"><img src=\"../../images/QGIS/qgistuto4.PNG\" alt=\"Image of QGIS interface showing the resulting map from the selection of your layers. \" width=\"791\" height=\"401\" loading=\"lazy\" /></a></li>\n    <li>You can double click each layer at the bottom left to modify symbology, notably color for “south_poles_wfs” modifying the symbol by selecting for example “effect drop shadow”  click on “Save Symbol…” and add a label <code class=\"language-plaintext highlighter-rouge\">Geographic South Pole</code>\n  <a href=\"../../images/QGIS/qgistuto5.PNG\" rel=\"noopener noreferrer\"><img src=\"../../images/QGIS/qgistuto5.PNG\" alt=\"Image of QGIS interface to show you to click on the button &quot;effect drop shadow&quot; to make the south pole more visible on your map.\" width=\"1271\" height=\"653\" loading=\"lazy\" /></a>\n  <a href=\"../../images/QGIS/qgistuto6.PNG\" rel=\"noopener noreferrer\"><img src=\"../../images/QGIS/qgistuto6.PNG\" alt=\"Image of QGIS interface to show you how to add a title and change the color of your south pole marker. \" width=\"1174\" height=\"673\" loading=\"lazy\" /></a></li>\n    <li>And to “antarctica_country_border”.\n  <a href=\"../../images/QGIS/qgistuto7.PNG\" rel=\"noopener noreferrer\"><img src=\"../../images/QGIS/qgistuto7.PNG\" alt=\"Image of QGIS interface showing how to change the background or color of the geographical zone here Antarctica. \" width=\"1498\" height=\"665\" loading=\"lazy\" /></a></li>\n  </ol>\n\n</blockquote>\n\n<h2 id=\"querying-a-wfs-layer\">Querying a WFS layer</h2>\n\n<p>Even if you can select, download and display entire WFS layers, it is often more efficient to interrogate a layer before loading it to QGIS. This is a major interest of the use of such web services, as you can save internet bandwidth by selecting only parts of layer you want in your own QGIS instance.</p>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title>Querying a WFS layer</hands-on-title>\n\n  <ol>\n    <li>In the WFS server already created in the first step of this tutorial, there is a layer called <code class=\"language-plaintext highlighter-rouge\">countries (excluding Antarctica)</code>. If we want to know where is South Africa related to the <code class=\"language-plaintext highlighter-rouge\">south_poles_wfs</code>, there are several manners to operate. One can load the entire layer of <code class=\"language-plaintext highlighter-rouge\">countries (excluding Antarctica)</code> and then use it locally, or we can save bandwidth and only load locally the needed information concerning South Africa. We will here use the second manner, querying the WFS layer to obtain only information we will use in our QGIS instance.</li>\n    <li>Go to the top left of QGIS and click on “Layer”</li>\n    <li>Click on the 1st option “Data Source Manager”</li>\n    <li>Select “WFS / OGC API - Features” then the already connected <code class=\"language-plaintext highlighter-rouge\">nsidc</code> server</li>\n    <li>Select the <code class=\"language-plaintext highlighter-rouge\">countries (excluding Antarctica)</code> layer and click “Build query” button\n<a href=\"../../images/QGIS/qgistuto8.PNG\" rel=\"noopener noreferrer\"><img src=\"../../images/QGIS/qgistuto8.PNG\" alt=\"Image of QGIS interface to help you see which layers to select in the WFS / OGC API features. \" width=\"868\" height=\"543\" loading=\"lazy\" /></a></li>\n    <li>On the new dialog box, you can copy/paste this query: <code class=\"language-plaintext highlighter-rouge\">SELECT * FROM country_borders_excluding_antarctica WHERE \"Countryeng\" = 'South Africa'</code> using the clipboard functionality from the left QGIS panel to make a “bridge” between your local clipboard and the virtualized QGIS one.\n<a href=\"../../images/QGIS/qgistuto9.PNG\" rel=\"noopener noreferrer\"><img src=\"../../images/QGIS/qgistuto9.PNG\" alt=\"Image of QGIS interface to help you see what to write in the &quot;SQL query composer&quot;. \" width=\"661\" height=\"590\" loading=\"lazy\" /></a></li>\n    <li>Clicking OK, you can now see the SQL query on a dedicated column of the layers table.\n<a href=\"../../images/QGIS/qgistuto10.PNG\" rel=\"noopener noreferrer\"><img src=\"../../images/QGIS/qgistuto10.PNG\" alt=\"Image of QGIS interface showing you the results of the SQL command on the selection of layers in the WFS / OGC API features. \" width=\"1144\" height=\"545\" loading=\"lazy\" /></a></li>\n    <li>Clicking the “Add” button, you now have the South Africa layer added and displayed on QGIS.\n<a href=\"../../images/QGIS/qgistuto11.PNG\" rel=\"noopener noreferrer\"><img src=\"../../images/QGIS/qgistuto11.PNG\" alt=\"Image of QGIS interface showing the resulting map of all your changes since the beginning of the tutorial. \" width=\"683\" height=\"453\" loading=\"lazy\" /></a></li>\n  </ol>\n</blockquote>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <ol>\n    <li>Are you seeing how QGIS shows the fact that a layer is resulting from a query made on a larger layer?</li>\n  </ol>\n\n  <blockquote class=\"solution\">\n    <solution-title></solution-title>\n\n    <ol>\n      <li>There is a dedicated “filter” icon next to the name of the layer.</li>\n    </ol>\n\n  </blockquote>\n\n</blockquote>\n\n<h1 id=\"conclusion\">Conclusion</h1>\n\n<p>You just did a classical GIS operation, accessing remote data using WFS webservice through QGIS, retrieving features of interest you can share broadly through Galaxy!</p>\n"],"ref_slides":[],"video_library":{"tutorial":null,"slides":null,"demo":null,"both":null,"session":null},"hands_on":true,"slides":false,"mod_date":"2024-01-19 21:14:19 +0000","pub_date":"2023-10-11 11:50:32 +0000","version":22,"api":"https://training.galaxyproject.org/training-material/api/topics/ecology/tutorials/QGIS_Web_Feature_Services/tutorial.json","tools":["interactive_tool_qgis"],"supported_servers":{"exact":[{"url":"https://usegalaxy.eu","name":"UseGalaxy.eu","usegalaxy":true}],"inexact":[]},"topic_name_human":"Ecology","admin_install":{"install_tool_dependencies":true,"install_repository_dependencies":true,"install_resolver_dependencies":true,"tools":[]},"admin_install_yaml":"---\ninstall_tool_dependencies: true\ninstall_repository_dependencies: true\ninstall_resolver_dependencies: true\ntools: []\n","tours":false,"video":false,"translations":{"tutorial":[],"slides":[],"video":false},"license":"CC-BY-4.0","type":"tutorial","contributors":[{"name":"Coline Royaux","email":"coline.royaux@mnhn.fr","twitter":"ColineRoyaux","orcid":"0000-0003-4308-5617","joined":"2020-11","elixir_node":"fr","affiliations":["pndb","gallantries","elixir-europe"],"id":"colineroyaux","url":"https://training.galaxyproject.org/training-material/api/contributors/colineroyaux.json","page":"https://training.galaxyproject.org/training-material/hall-of-fame/colineroyaux/"},{"name":"Marie Josse","joined":"2022-03","email":"marie.josse@ifremer.fr","affiliations":["pndb","fairease"],"id":"Marie59","url":"https://training.galaxyproject.org/training-material/api/contributors/Marie59.json","page":"https://training.galaxyproject.org/training-material/hall-of-fame/Marie59/"},{"name":"Yvan Le Bras","email":"yvan.le-bras@mnhn.fr","twitter":"Yvan2935","matrix":"yvanlebras:matrix.org","orcid":"0000-0002-8504-068X","joined":"2017-09","elixir_node":"fr","affiliations":["pndb","gallantries","fairease","fnso2019","elixir-europe"],"id":"yvanlebras","url":"https://training.galaxyproject.org/training-material/api/contributors/yvanlebras.json","page":"https://training.galaxyproject.org/training-material/hall-of-fame/yvanlebras/"},{"name":"Gallantries: Bridging Training Communities in Life Science, Environment and Health","short_name":"Gallantries","start_date":"2020-09-01","end_date":"2023-09-30","joined":"2020-09","avatar":"https://gallantries.github.io/assets/images/gallantries-logo.png","github":false,"funder":true,"url":"https://training.galaxyproject.org/training-material/api/funders/gallantries.json","funder_name":"Erasmus+ Programme","funding_id":"2020-1-NL01-KA203-064717","funding_system":"erasmusplus","funding_statement":"This project (<a href=\"https://erasmus-plus.ec.europa.eu/projects/search/details/2020-1-NL01-KA203-064717\"><code class=\"language-plaintext highlighter-rouge\">2020-1-NL01-KA203-064717</code></a>) is funded with the support of the Erasmus+ programme of the European Union. Their funding has supported a large number of tutorials within the GTN across a wide array of topics.\n<img src=\"https://gallantries.github.io/assets/images/logosbeneficaireserasmusright_en.jpg\" alt=\"eu flag with the text: with the support of the erasmus programme of the european union\" />\n<img src=\"https://www.erasmusplus.nl/assets/images/logo.png\" alt=\"erasmus plus logo\" />","members":["abretaud","bebatut","colineroyaux","fpsom","hexylena","shiltemann","yvanlebras"],"id":"gallantries","page":"https://training.galaxyproject.org/training-material/hall-of-fame/gallantries/"},{"name":"Fair-Ease","github":false,"joined":"2023-10","avatar":"/training-material/assets/images/fair_ease_colour.png","url":"https://training.galaxyproject.org/training-material/api/funders/fairease.json","funder":true,"funding_id":"101058785","funding_system":"cordis","funding_statement":"FAIR-EASE is a RIA project funded under HORIZON-INFRA-2021-EOSC-01-04, and it involves a consortium of 25 partners from all over Europe.","members":["Marie59","yvanlebras"],"id":"fairease","page":"https://training.galaxyproject.org/training-material/hall-of-fame/fairease/"},{"name":"Pôle National de Données de Biodiversité","url":"https://training.galaxyproject.org/training-material/api/organisations/pndb.json","avatar":"/training-material/shared/images/PNDB_sub.png","github":false,"members":["colineroyaux","Marie59","yvanlebras","ThibaudGlinez"],"id":"pndb","page":"https://training.galaxyproject.org/training-material/hall-of-fame/pndb/"}]}