{"layout":"tutorial_hands_on","title":"Workflow Run RO-Crate Introduction","time_estimation":"30M","questions":[],"objectives":[],"key_points":[],"tags":["ro-crate"],"priority":1,"contributions":{"authorship":["simleo"],"funding":["by-covid"]},"license":"Apache-2.0","subtopic":"ro-crate","js_requirements":{"mathjax":null,"mermaid":false},"short_id":"T00343","url":"/topics/fair/tutorials/ro-crate-workflow-run-ro-crate/tutorial.html","topic_name":"fair","tutorial_name":"ro-crate-workflow-run-ro-crate","dir":"topics/fair/tutorials/ro-crate-workflow-run-ro-crate","symlink":null,"id":"fair/ro-crate-workflow-run-ro-crate","ref_tutorials":["<p>The <a href=\"https://www.researchobject.org/workflow-run-crate/\">Workflow Run RO-Crate</a> working group is developing a series of <a href=\"https://www.researchobject.org/ro-crate/profiles.html\">RO-Crate profiles</a> for representing the provenance of computational workflow executions. The set includes three profiles, which represent provenance with increasing level of detail:</p>\n\n<ul>\n  <li><a href=\"https://w3id.org/ro/wfrun/process\">Process Run Crate</a> can be used to describe the execution of one or more tools that contribute to a generic computation;</li>\n  <li><a href=\"https://w3id.org/ro/wfrun/workflow\">Workflow Run Crate</a> also describes computational processes, but in this case the execution is supposed to be orchestrated by a computational workflow (e.g., a Galaxy workflow);</li>\n  <li><a href=\"https://w3id.org/ro/wfrun/provenance\">Provenance Run Crate</a> is based on Workflow Run Crate, but provides additional specifications for describing the details of each step’s execution.</li>\n</ul>\n\n<blockquote class=\"agenda\">\n  <agenda-title></agenda-title>\n\n  <p>In this tutorial, you will learn how to create a git repo, and begin working with it.</p>\n\n<ol id=\"markdown-toc\">\n  <li><a href=\"#process-run-crate\" id=\"markdown-toc-process-run-crate\">Process Run Crate</a></li>\n  <li><a href=\"#workflow-run-crate\" id=\"markdown-toc-workflow-run-crate\">Workflow Run Crate</a></li>\n  <li><a href=\"#provenance-run-crate\" id=\"markdown-toc-provenance-run-crate\">Provenance Run Crate</a></li>\n</ol>\n\n</blockquote>\n\n<h2 id=\"process-run-crate\">Process Run Crate</h2>\n\n<p>Consider a simple computation where we select the first four lines of a text file, and then we select the last three lines out of the initial selection. Suppose we start with the following input file, <code class=\"language-plaintext highlighter-rouge\">lines.txt</code>:</p>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>one\ntwo\nthree\nfour\nfive\n</code></pre></div></div>\n\n<p>Then we run:</p>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>head --lines 4 lines.txt &gt;sel1.txt\n</code></pre></div></div>\n\n<p>The <code class=\"language-plaintext highlighter-rouge\">sel1.txt</code> file will then be:</p>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>one\ntwo\nthree\nfour\n</code></pre></div></div>\n\n<p>Now we run:</p>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>tail --lines 3 sel1.txt &gt;sel2.txt\n</code></pre></div></div>\n\n<p>Obtaining the following <code class=\"language-plaintext highlighter-rouge\">sel2.txt</code>:</p>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>two\nthree\nfour\n</code></pre></div></div>\n\n<p>A Process Run Crate that describes the above computation will contain the three text files, plus an <code class=\"language-plaintext highlighter-rouge\">ro-crate-metadata.json</code> file structured as follows:</p>\n\n<div class=\"language-json highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"p\">{</span><span class=\"w\">\n    </span><span class=\"nl\">\"@context\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://w3id.org/ro/crate/1.1/context\"</span><span class=\"p\">,</span><span class=\"w\">\n    </span><span class=\"nl\">\"@graph\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\">\n        </span><span class=\"p\">{</span><span class=\"w\">\n            </span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"ro-crate-metadata.json\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"@type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"CreativeWork\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"conformsTo\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://w3id.org/ro/crate/1.1\"</span><span class=\"p\">},</span><span class=\"w\">\n            </span><span class=\"nl\">\"about\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"./\"</span><span class=\"p\">}</span><span class=\"w\">\n        </span><span class=\"p\">},</span><span class=\"w\">\n        </span><span class=\"p\">{</span><span class=\"w\">\n            </span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"./\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"@type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Dataset\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"conformsTo\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://w3id.org/ro/wfrun/process/0.1\"</span><span class=\"p\">},</span><span class=\"w\">\n            </span><span class=\"nl\">\"hasPart\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\">\n                </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"lines.txt\"</span><span class=\"p\">},</span><span class=\"w\">\n                </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"sel1.txt\"</span><span class=\"p\">},</span><span class=\"w\">\n                </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"sel2.txt\"</span><span class=\"p\">}</span><span class=\"w\">\n            </span><span class=\"p\">],</span><span class=\"w\">\n            </span><span class=\"nl\">\"mentions\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\">\n                </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#runHead\"</span><span class=\"p\">},</span><span class=\"w\">\n                </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#runTail\"</span><span class=\"p\">}</span><span class=\"w\">\n            </span><span class=\"p\">]</span><span class=\"w\">\n        </span><span class=\"p\">},</span><span class=\"w\">\n        </span><span class=\"p\">{</span><span class=\"w\">   </span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://w3id.org/ro/wfrun/process/0.1\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"@type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"CreativeWork\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"name\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Process Run Crate\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"version\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"0.1\"</span><span class=\"w\">\n        </span><span class=\"p\">},</span><span class=\"w\">\n        </span><span class=\"p\">{</span><span class=\"w\">\n            </span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://www.gnu.org/software/coreutils/head\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"@type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"SoftwareApplication\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"name\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"head\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"softwareVersion\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"8.30\"</span><span class=\"w\">\n        </span><span class=\"p\">},</span><span class=\"w\">\n        </span><span class=\"p\">{</span><span class=\"w\">\n            </span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://www.gnu.org/software/coreutils/tail\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"@type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"SoftwareApplication\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"name\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"tail\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"softwareVersion\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"8.30\"</span><span class=\"w\">\n        </span><span class=\"p\">},</span><span class=\"w\">\n        </span><span class=\"p\">{</span><span class=\"w\">\n            </span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#runHead\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"@type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"CreateAction\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"name\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Select first four lines\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"description\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"head --lines 4 lines.txt &gt;sel1.txt\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"endTime\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"2023-04-27T15:02:56+02:00\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"instrument\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://www.gnu.org/software/coreutils/head\"</span><span class=\"p\">},</span><span class=\"w\">\n            </span><span class=\"nl\">\"object\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"lines.txt\"</span><span class=\"p\">},</span><span class=\"w\">\n            </span><span class=\"nl\">\"result\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"sel1.txt\"</span><span class=\"p\">},</span><span class=\"w\">\n            </span><span class=\"nl\">\"agent\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://orcid.org/0000-0002-1825-0097\"</span><span class=\"p\">}</span><span class=\"w\">\n        </span><span class=\"p\">},</span><span class=\"w\">\n        </span><span class=\"p\">{</span><span class=\"w\">\n            </span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#runTail\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"@type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"CreateAction\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"name\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Select first four lines\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"description\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"tail --lines 3 sel1.txt &gt;sel2.txt\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"endTime\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"2023-04-27T15:04:02+02:00\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"instrument\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://www.gnu.org/software/coreutils/tail\"</span><span class=\"p\">},</span><span class=\"w\">\n            </span><span class=\"nl\">\"object\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"sel1.txt\"</span><span class=\"p\">},</span><span class=\"w\">\n            </span><span class=\"nl\">\"result\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"sel2.txt\"</span><span class=\"p\">},</span><span class=\"w\">\n            </span><span class=\"nl\">\"agent\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://orcid.org/0000-0002-1825-0097\"</span><span class=\"p\">}</span><span class=\"w\">\n        </span><span class=\"p\">},</span><span class=\"w\">\n        </span><span class=\"p\">{</span><span class=\"w\">\n            </span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"lines.txt\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"@type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"File\"</span><span class=\"w\">\n        </span><span class=\"p\">},</span><span class=\"w\">\n        </span><span class=\"p\">{</span><span class=\"w\">\n            </span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"sel1.txt\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"@type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"File\"</span><span class=\"w\">\n        </span><span class=\"p\">},</span><span class=\"w\">\n        </span><span class=\"p\">{</span><span class=\"w\">\n            </span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"sel2.txt\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"@type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"File\"</span><span class=\"w\">\n        </span><span class=\"p\">},</span><span class=\"w\">\n        </span><span class=\"p\">{</span><span class=\"w\">\n            </span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://orcid.org/0000-0002-1825-0097\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"@type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Person\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"name\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Josiah Carberry\"</span><span class=\"w\">\n        </span><span class=\"p\">}</span><span class=\"w\">\n    </span><span class=\"p\">]</span><span class=\"w\">\n</span><span class=\"p\">}</span><span class=\"w\">\n</span></code></pre></div></div>\n\n<p>The RO-Crate describes two actions, <code class=\"language-plaintext highlighter-rouge\">#runHead</code> and <code class=\"language-plaintext highlighter-rouge\">#runTail</code>, which represent, respectively, the execution of the <code class=\"language-plaintext highlighter-rouge\">head</code> and <code class=\"language-plaintext highlighter-rouge\">tail</code> programs, referenced via the <code class=\"language-plaintext highlighter-rouge\">instrument</code> property. Each action references its input(s) via <code class=\"language-plaintext highlighter-rouge\">object</code> and its output(s) via <code class=\"language-plaintext highlighter-rouge\">result</code>. Note how the two actions are connected by the fact that the output of <code class=\"language-plaintext highlighter-rouge\">#runHead</code> is the input of <code class=\"language-plaintext highlighter-rouge\">#runTail</code>: they form an “implicit workflow”, whose steps have been executed manually rather than by a higher level software tool. The actions also refer to their executor via the <code class=\"language-plaintext highlighter-rouge\">agent</code> property. The following diagram shows the relationships between the various entities:</p>\n\n<p><img alt=\"head-tail diagram\" src=\"img/head-tail-diagram.svg\" width=\"600\" /></p>\n\n<p>For more information, you can see the <a href=\"https://w3id.org/ro/wfrun/process\">Process Run Crate</a> profile, which contains the full specification.</p>\n\n<h2 id=\"workflow-run-crate\">Workflow Run Crate</h2>\n\n<p>Suppose now that we write a script to automate the above process:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c\">#!/usr/bin/env bash</span>\n\n<span class=\"nb\">set</span> <span class=\"nt\">-euo</span> pipefail\n\ndie<span class=\"o\">()</span> <span class=\"o\">{</span>\n    <span class=\"nb\">echo</span> <span class=\"nv\">$1</span> 1&gt;&amp;2\n    <span class=\"nb\">exit </span>1\n<span class=\"o\">}</span>\n\n<span class=\"nv\">nargs</span><span class=\"o\">=</span>3\n<span class=\"k\">if</span> <span class=\"o\">[</span> <span class=\"nv\">$# </span><span class=\"nt\">-ne</span> <span class=\"k\">${</span><span class=\"nv\">nargs</span><span class=\"k\">}</span> <span class=\"o\">]</span><span class=\"p\">;</span> <span class=\"k\">then\n    </span>die <span class=\"s2\">\"Usage: </span><span class=\"nv\">$0</span><span class=\"s2\"> input_file head_lines tail_lines\"</span>\n<span class=\"k\">fi\n</span><span class=\"nv\">input_file</span><span class=\"o\">=</span><span class=\"nv\">$1</span>\n<span class=\"nv\">head_lines</span><span class=\"o\">=</span><span class=\"nv\">$2</span>\n<span class=\"nv\">tail_lines</span><span class=\"o\">=</span><span class=\"nv\">$3</span>\n\n<span class=\"nv\">output_file</span><span class=\"o\">=</span><span class=\"s2\">\"chunk.txt\"</span>\n\n<span class=\"nv\">workdir</span><span class=\"o\">=</span><span class=\"si\">$(</span><span class=\"nb\">mktemp</span> <span class=\"nt\">-d</span><span class=\"si\">)</span>\n<span class=\"nv\">head_output</span><span class=\"o\">=</span><span class=\"s2\">\"</span><span class=\"k\">${</span><span class=\"nv\">workdir</span><span class=\"k\">}</span><span class=\"s2\">/temp.txt\"</span>\n<span class=\"nb\">head</span> <span class=\"nt\">--lines</span> <span class=\"k\">${</span><span class=\"nv\">head_lines</span><span class=\"k\">}</span> <span class=\"s2\">\"</span><span class=\"k\">${</span><span class=\"nv\">input_file</span><span class=\"k\">}</span><span class=\"s2\">\"</span> <span class=\"o\">&gt;</span><span class=\"s2\">\"</span><span class=\"k\">${</span><span class=\"nv\">head_output</span><span class=\"k\">}</span><span class=\"s2\">\"</span>\n<span class=\"nb\">tail</span> <span class=\"nt\">--lines</span> <span class=\"k\">${</span><span class=\"nv\">tail_lines</span><span class=\"k\">}</span> <span class=\"s2\">\"</span><span class=\"k\">${</span><span class=\"nv\">head_output</span><span class=\"k\">}</span><span class=\"s2\">\"</span> <span class=\"o\">&gt;</span><span class=\"s2\">\"</span><span class=\"k\">${</span><span class=\"nv\">output_file</span><span class=\"k\">}</span><span class=\"s2\">\"</span>\n<span class=\"nb\">rm</span> <span class=\"nt\">-rf</span> <span class=\"s2\">\"</span><span class=\"k\">${</span><span class=\"nv\">workdir</span><span class=\"k\">}</span><span class=\"s2\">\"</span>\n</code></pre></div></div>\n\n<p>This script can be considered a workflow, since it orchestrates the execution of other applications, managing the flow of data between them, to get the final output. Note that the script is parametrized, so every time it is run we can choose a different input file and different values for the number of lines to extract with <code class=\"language-plaintext highlighter-rouge\">head</code> and <code class=\"language-plaintext highlighter-rouge\">tail</code>. If you name the script <code class=\"language-plaintext highlighter-rouge\">head_tail.sh</code>, you can obtain the same result as above by running:</p>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>bash head_tail.sh lines.txt 4 3\n</code></pre></div></div>\n\n<p>The result will be stored in the <code class=\"language-plaintext highlighter-rouge\">chunk.txt</code> file.</p>\n\n<p>A Workflow Run Crate to represent a run of this workflow would contain the workflow itself (<code class=\"language-plaintext highlighter-rouge\">head_tail.sh</code>), the input and output files (<code class=\"language-plaintext highlighter-rouge\">lines.txt</code>, <code class=\"language-plaintext highlighter-rouge\">chunk.txt</code>) and an ro-crate-metadata.json file like the following:</p>\n\n<div class=\"language-json highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"p\">{</span><span class=\"w\">\n    </span><span class=\"nl\">\"@context\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://w3id.org/ro/crate/1.1/context\"</span><span class=\"p\">,</span><span class=\"w\">\n    </span><span class=\"nl\">\"@graph\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\">\n        </span><span class=\"p\">{</span><span class=\"w\">\n            </span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"ro-crate-metadata.json\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"@type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"CreativeWork\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"about\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"./\"</span><span class=\"p\">},</span><span class=\"w\">\n            </span><span class=\"nl\">\"conformsTo\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\">\n                </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://w3id.org/ro/crate/1.1\"</span><span class=\"p\">},</span><span class=\"w\">\n                </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://w3id.org/workflowhub/workflow-ro-crate/1.0\"</span><span class=\"p\">}</span><span class=\"w\">\n            </span><span class=\"p\">]</span><span class=\"w\">\n        </span><span class=\"p\">},</span><span class=\"w\">\n        </span><span class=\"p\">{</span><span class=\"w\">\n            </span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"./\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"@type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Dataset\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"conformsTo\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\">\n                </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://w3id.org/ro/wfrun/process/0.1\"</span><span class=\"p\">},</span><span class=\"w\">\n                </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://w3id.org/ro/wfrun/workflow/0.1\"</span><span class=\"p\">},</span><span class=\"w\">\n                </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://w3id.org/workflowhub/workflow-ro-crate/1.0\"</span><span class=\"p\">}</span><span class=\"w\">\n            </span><span class=\"p\">],</span><span class=\"w\">\n            </span><span class=\"nl\">\"hasPart\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\">\n                </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"head_tail.sh\"</span><span class=\"p\">},</span><span class=\"w\">\n                </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"lines.txt\"</span><span class=\"p\">},</span><span class=\"w\">\n                </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"chunk.txt\"</span><span class=\"p\">}</span><span class=\"w\">\n            </span><span class=\"p\">],</span><span class=\"w\">\n            </span><span class=\"nl\">\"license\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"http://spdx.org/licenses/CC0-1.0\"</span><span class=\"p\">},</span><span class=\"w\">\n            </span><span class=\"nl\">\"mainEntity\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"head_tail.sh\"</span><span class=\"p\">},</span><span class=\"w\">\n            </span><span class=\"nl\">\"mentions\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#runHeadTail\"</span><span class=\"p\">}</span><span class=\"w\">\n        </span><span class=\"p\">},</span><span class=\"w\">\n        </span><span class=\"p\">{</span><span class=\"w\">\n            </span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://w3id.org/ro/wfrun/process/0.1\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"@type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"CreativeWork\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"name\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Process Run Crate\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"version\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"0.1\"</span><span class=\"w\">\n        </span><span class=\"p\">},</span><span class=\"w\">\n        </span><span class=\"p\">{</span><span class=\"w\">\n            </span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://w3id.org/ro/wfrun/workflow/0.1\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"@type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"CreativeWork\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"name\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Workflow Run Crate\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"version\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"0.1\"</span><span class=\"w\">\n        </span><span class=\"p\">},</span><span class=\"w\">\n        </span><span class=\"p\">{</span><span class=\"w\">\n            </span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://w3id.org/workflowhub/workflow-ro-crate/1.0\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"@type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"CreativeWork\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"name\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Workflow RO-Crate\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"version\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"1.0\"</span><span class=\"w\">\n        </span><span class=\"p\">},</span><span class=\"w\">\n        </span><span class=\"p\">{</span><span class=\"w\">\n            </span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"head_tail.sh\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"@type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"s2\">\"File\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s2\">\"SoftwareSourceCode\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s2\">\"ComputationalWorkflow\"</span><span class=\"p\">],</span><span class=\"w\">\n            </span><span class=\"nl\">\"name\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Head-Tail\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"programmingLanguage\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#bash\"</span><span class=\"p\">},</span><span class=\"w\">\n            </span><span class=\"nl\">\"input\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\">\n                </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#input_file-param\"</span><span class=\"p\">},</span><span class=\"w\">\n                </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#head_lines-param\"</span><span class=\"p\">},</span><span class=\"w\">\n                </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#tail_lines-param\"</span><span class=\"p\">}</span><span class=\"w\">\n            </span><span class=\"p\">],</span><span class=\"w\">\n            </span><span class=\"nl\">\"output\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\">\n                </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#output_file-param\"</span><span class=\"p\">}</span><span class=\"w\">\n            </span><span class=\"p\">]</span><span class=\"w\">\n        </span><span class=\"p\">},</span><span class=\"w\">\n        </span><span class=\"p\">{</span><span class=\"w\">\n            </span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#input_file-param\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"@type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"FormalParameter\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"additionalType\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"File\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"name\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"input_file\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"valueRequired\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"True\"</span><span class=\"w\">\n        </span><span class=\"p\">},</span><span class=\"w\">\n        </span><span class=\"p\">{</span><span class=\"w\">\n            </span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#head_lines-param\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"@type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"FormalParameter\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"additionalType\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Integer\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"name\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"head_lines\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"valueRequired\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"True\"</span><span class=\"w\">\n        </span><span class=\"p\">},</span><span class=\"w\">\n        </span><span class=\"p\">{</span><span class=\"w\">\n            </span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#tail_lines-param\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"@type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"FormalParameter\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"additionalType\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Integer\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"name\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"tail_lines\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"valueRequired\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"True\"</span><span class=\"w\">\n        </span><span class=\"p\">},</span><span class=\"w\">\n        </span><span class=\"p\">{</span><span class=\"w\">\n            </span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#output_file-param\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"@type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"FormalParameter\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"additionalType\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"File\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"name\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"output_file\"</span><span class=\"w\">\n        </span><span class=\"p\">},</span><span class=\"w\">\n        </span><span class=\"p\">{</span><span class=\"w\">\n            </span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#bash\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"@type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"ComputerLanguage\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"identifier\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://www.gnu.org/software/bash/\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"name\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Bash\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"url\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://www.gnu.org/software/bash/\"</span><span class=\"w\">\n        </span><span class=\"p\">},</span><span class=\"w\">\n        </span><span class=\"p\">{</span><span class=\"w\">\n            </span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#runHeadTail\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"@type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"CreateAction\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"name\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Run of head_tail.sh\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"endTime\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"2023-05-04T17:02:01+02:00\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"instrument\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"head_tail.sh\"</span><span class=\"p\">},</span><span class=\"w\">\n            </span><span class=\"nl\">\"object\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\">\n                </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"lines.txt\"</span><span class=\"p\">},</span><span class=\"w\">\n                </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#head_lines-pv\"</span><span class=\"p\">},</span><span class=\"w\">\n                </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#tail_lines-pv\"</span><span class=\"p\">}</span><span class=\"w\">\n            </span><span class=\"p\">],</span><span class=\"w\">\n            </span><span class=\"nl\">\"result\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\">\n                </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"chunk.txt\"</span><span class=\"p\">}</span><span class=\"w\">\n            </span><span class=\"p\">],</span><span class=\"w\">\n            </span><span class=\"nl\">\"agent\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://orcid.org/0000-0002-1825-0097\"</span><span class=\"p\">}</span><span class=\"w\">\n        </span><span class=\"p\">},</span><span class=\"w\">\n        </span><span class=\"p\">{</span><span class=\"w\">\n            </span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"lines.txt\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"@type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"File\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"exampleOfWork\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#input_file-param\"</span><span class=\"p\">}</span><span class=\"w\">\n        </span><span class=\"p\">},</span><span class=\"w\">\n        </span><span class=\"p\">{</span><span class=\"w\">\n            </span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#head_lines-pv\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"@type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"PropertyValue\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"exampleOfWork\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#head_lines-param\"</span><span class=\"p\">},</span><span class=\"w\">\n            </span><span class=\"nl\">\"name\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"head_lines\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"value\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"4\"</span><span class=\"w\">\n        </span><span class=\"p\">},</span><span class=\"w\">\n        </span><span class=\"p\">{</span><span class=\"w\">\n            </span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#tail_lines-pv\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"@type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"PropertyValue\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"exampleOfWork\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#tail_lines-param\"</span><span class=\"p\">},</span><span class=\"w\">\n            </span><span class=\"nl\">\"name\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"tail_lines\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"value\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"3\"</span><span class=\"w\">\n        </span><span class=\"p\">},</span><span class=\"w\">\n        </span><span class=\"p\">{</span><span class=\"w\">\n            </span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"chunk.txt\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"@type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"File\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"exampleOfWork\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#output_file-param\"</span><span class=\"p\">}</span><span class=\"w\">\n        </span><span class=\"p\">},</span><span class=\"w\">\n        </span><span class=\"p\">{</span><span class=\"w\">\n            </span><span class=\"nl\">\"@id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://orcid.org/0000-0002-1825-0097\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"@type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Person\"</span><span class=\"p\">,</span><span class=\"w\">\n            </span><span class=\"nl\">\"name\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Josiah Carberry\"</span><span class=\"w\">\n        </span><span class=\"p\">}</span><span class=\"w\">\n    </span><span class=\"p\">]</span><span class=\"w\">\n</span><span class=\"p\">}</span><span class=\"w\">\n</span></code></pre></div></div>\n\n<p>Note how the crate has a <code class=\"language-plaintext highlighter-rouge\">mainEntity</code> that points to the workflow (<code class=\"language-plaintext highlighter-rouge\">head_tail.sh</code>). This is in conformance with the <a href=\"https://w3id.org/workflowhub/workflow-ro-crate/1.0\">Workflow RO-Crate</a> profile. In addition to Workflow RO-Crate, Workflow Run Crates also conform to the <a href=\"https://w3id.org/ro/wfrun/process\">Process Run Crate</a> profile and to the <a href=\"https://w3id.org/ro/wfrun/workflow\">Workflow Run Crate</a> profile itself, as you can see from the <code class=\"language-plaintext highlighter-rouge\">conformsTo</code> entries.</p>\n\n<p>One of the main additions with respect to Process Run Crate is the representation of parameter “slots” (which can take different values according to the specific run) via <code class=\"language-plaintext highlighter-rouge\">FormalParameter</code>. In this case we have three input parameters:</p>\n\n<ul>\n  <li><code class=\"language-plaintext highlighter-rouge\">#input_file-param</code>, corresponding to the input file</li>\n  <li><code class=\"language-plaintext highlighter-rouge\">#head_lines-param</code>, corresponding to the number of lines to select with the <code class=\"language-plaintext highlighter-rouge\">head</code> program</li>\n  <li><code class=\"language-plaintext highlighter-rouge\">#tail_lines-param</code>, corresponding to the number of lines to select with the <code class=\"language-plaintext highlighter-rouge\">tail</code> program</li>\n</ul>\n\n<p>The <code class=\"language-plaintext highlighter-rouge\">#runHeadTail</code> action has three <code class=\"language-plaintext highlighter-rouge\">object</code> entries, which represent the actual values used for the parameters in this specific run. The first item is the <code class=\"language-plaintext highlighter-rouge\">lines.txt</code> file, while the other two are represented via <a href=\"https://schema.org/PropertyValue\">PropertyValue</a> instances, where the <code class=\"language-plaintext highlighter-rouge\">value</code> property provides the values taken by the parameters. Crucially, the <code class=\"language-plaintext highlighter-rouge\">exampleOfWork</code> property connects each parameter value to the corresponding <code class=\"language-plaintext highlighter-rouge\">FormalParameter</code>. Similarly, the <code class=\"language-plaintext highlighter-rouge\">chunk.txt</code> file matches the output parameter <code class=\"language-plaintext highlighter-rouge\">#output_file-param</code>.</p>\n\n<p>An example of a Workflow Run Crate for a Galaxy workflow is available at <a href=\"https://doi.org/10.5281/zenodo.7785860\">https://doi.org/10.5281/zenodo.7785860</a>.</p>\n\n<p>You can export a Galaxy workflow invocation as a Workflow Run Crate by following <a href=\"https://by-covid.github.io/gtn/ro-crate-in-galaxy/\">this tutorial</a>.</p>\n\n<h2 id=\"provenance-run-crate\">Provenance Run Crate</h2>\n\n<p><a href=\"https://w3id.org/ro/wfrun/provenance\">Provenance Run Crate</a> further extends Workflow Run Crate, specifying how to represent the actions corresponding to individual steps in the workflow. The extent to which this can be done may depend on how the workflow is written and how the workflow engine operates. For instance, the shell script we used in the previous section does not keep the intermediate output from the execution of <code class=\"language-plaintext highlighter-rouge\">head</code>: it’s stored in a temporary directory, which is deleted at the end of the script.</p>\n\n<p>A workflow management system that supports Provenance Run Crate is <a href=\"https://streamflow.di.unito.it/\">StreamFlow</a>, which executes <a href=\"https://www.commonwl.org/\">CWL</a> workflows. Let’s write a CWL workflow that implements our head-tail application. We start by writing <code class=\"language-plaintext highlighter-rouge\">headtool.cwl</code>, a wrapper for the <code class=\"language-plaintext highlighter-rouge\">head</code> tool:</p>\n\n<div class=\"language-yaml highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"na\">class</span><span class=\"pi\">:</span> <span class=\"s\">CommandLineTool</span>\n<span class=\"na\">cwlVersion</span><span class=\"pi\">:</span> <span class=\"s\">v1.0</span>\n\n<span class=\"na\">baseCommand</span><span class=\"pi\">:</span> <span class=\"s\">head</span>\n\n<span class=\"na\">inputs</span><span class=\"pi\">:</span>\n  <span class=\"na\">lines</span><span class=\"pi\">:</span>\n    <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">int</span>\n    <span class=\"na\">inputBinding</span><span class=\"pi\">:</span>\n      <span class=\"na\">position</span><span class=\"pi\">:</span> <span class=\"m\">1</span>\n      <span class=\"na\">prefix</span><span class=\"pi\">:</span> <span class=\"s2\">\"</span><span class=\"s\">--lines\"</span>\n  <span class=\"na\">input</span><span class=\"pi\">:</span>\n    <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">File</span>\n    <span class=\"na\">inputBinding</span><span class=\"pi\">:</span>\n      <span class=\"na\">position</span><span class=\"pi\">:</span> <span class=\"m\">2</span>\n<span class=\"na\">outputs</span><span class=\"pi\">:</span>\n  <span class=\"na\">output</span><span class=\"pi\">:</span>\n    <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">File</span>\n    <span class=\"na\">outputBinding</span><span class=\"pi\">:</span>\n      <span class=\"na\">glob</span><span class=\"pi\">:</span> <span class=\"s\">head_out.txt</span>\n<span class=\"na\">stdout</span><span class=\"pi\">:</span> <span class=\"s\">head_out.txt</span>\n</code></pre></div></div>\n\n<p>We then do the same for <code class=\"language-plaintext highlighter-rouge\">tail</code>, calling the wrapper <code class=\"language-plaintext highlighter-rouge\">tailtool.cwl</code>:</p>\n\n<div class=\"language-yaml highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"na\">class</span><span class=\"pi\">:</span> <span class=\"s\">CommandLineTool</span>\n<span class=\"na\">cwlVersion</span><span class=\"pi\">:</span> <span class=\"s\">v1.0</span>\n\n<span class=\"na\">baseCommand</span><span class=\"pi\">:</span> <span class=\"s\">tail</span>\n\n<span class=\"na\">inputs</span><span class=\"pi\">:</span>\n  <span class=\"na\">lines</span><span class=\"pi\">:</span>\n    <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">int</span>\n    <span class=\"na\">inputBinding</span><span class=\"pi\">:</span>\n      <span class=\"na\">position</span><span class=\"pi\">:</span> <span class=\"m\">1</span>\n      <span class=\"na\">prefix</span><span class=\"pi\">:</span> <span class=\"s2\">\"</span><span class=\"s\">--lines\"</span>\n  <span class=\"na\">input</span><span class=\"pi\">:</span>\n    <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">File</span>\n    <span class=\"na\">inputBinding</span><span class=\"pi\">:</span>\n      <span class=\"na\">position</span><span class=\"pi\">:</span> <span class=\"m\">2</span>\n<span class=\"na\">outputs</span><span class=\"pi\">:</span>\n  <span class=\"na\">output</span><span class=\"pi\">:</span>\n    <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">File</span>\n    <span class=\"na\">outputBinding</span><span class=\"pi\">:</span>\n      <span class=\"na\">glob</span><span class=\"pi\">:</span> <span class=\"s\">tail_out.txt</span>\n<span class=\"na\">stdout</span><span class=\"pi\">:</span> <span class=\"s\">tail_out.txt</span>\n</code></pre></div></div>\n\n<p>Finally, we write the workflow, <code class=\"language-plaintext highlighter-rouge\">head_tail.cwl</code>:</p>\n\n<div class=\"language-yaml highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"na\">class</span><span class=\"pi\">:</span> <span class=\"s\">Workflow</span>\n<span class=\"na\">cwlVersion</span><span class=\"pi\">:</span> <span class=\"s\">v1.0</span>\n\n<span class=\"na\">inputs</span><span class=\"pi\">:</span>\n  <span class=\"na\">input_file</span><span class=\"pi\">:</span>\n    <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">File</span>\n  <span class=\"na\">head_lines</span><span class=\"pi\">:</span>\n    <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">int</span>\n  <span class=\"na\">tail_lines</span><span class=\"pi\">:</span>\n    <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">int</span>\n<span class=\"na\">outputs</span><span class=\"pi\">:</span>\n  <span class=\"na\">output_file</span><span class=\"pi\">:</span>\n    <span class=\"na\">type</span><span class=\"pi\">:</span> <span class=\"s\">File</span>\n    <span class=\"na\">outputSource</span><span class=\"pi\">:</span> <span class=\"s\">tail/output</span>\n\n<span class=\"na\">steps</span><span class=\"pi\">:</span>\n  <span class=\"na\">head</span><span class=\"pi\">:</span>\n    <span class=\"na\">in</span><span class=\"pi\">:</span>\n      <span class=\"na\">lines</span><span class=\"pi\">:</span> <span class=\"s\">head_lines</span>\n      <span class=\"na\">input</span><span class=\"pi\">:</span> <span class=\"s\">input_file</span>\n    <span class=\"na\">out</span><span class=\"pi\">:</span> <span class=\"pi\">[</span><span class=\"nv\">output</span><span class=\"pi\">]</span>\n    <span class=\"na\">run</span><span class=\"pi\">:</span> <span class=\"s\">headtool.cwl</span>\n  <span class=\"na\">tail</span><span class=\"pi\">:</span>\n    <span class=\"na\">in</span><span class=\"pi\">:</span>\n      <span class=\"na\">lines</span><span class=\"pi\">:</span> <span class=\"s\">tail_lines</span>\n      <span class=\"na\">input</span><span class=\"pi\">:</span> <span class=\"s\">head/output</span>\n    <span class=\"na\">out</span><span class=\"pi\">:</span> <span class=\"pi\">[</span><span class=\"nv\">output</span><span class=\"pi\">]</span>\n    <span class=\"na\">run</span><span class=\"pi\">:</span> <span class=\"s\">tailtool.cwl</span>\n</code></pre></div></div>\n\n<p>Now that we have the workflow, let’s write the file that contains the parameter settings for our specific run, <code class=\"language-plaintext highlighter-rouge\">params.yml</code>:</p>\n\n<div class=\"language-yaml highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"na\">input_file</span><span class=\"pi\">:</span>\n  <span class=\"na\">class</span><span class=\"pi\">:</span> <span class=\"s\">File</span>\n  <span class=\"na\">location</span><span class=\"pi\">:</span> <span class=\"s\">lines.txt</span>\n<span class=\"na\">head_lines</span><span class=\"pi\">:</span> <span class=\"m\">4</span>\n<span class=\"na\">tail_lines</span><span class=\"pi\">:</span> <span class=\"m\">3</span>\n</code></pre></div></div>\n\n<p>Now, install StreamFlow (we’re going to need a version with RO-Crate support). To avoid possible conflicts, consider installing in a clean <a href=\"https://docs.python.org/3/library/venv.html\">virtual environment</a>.</p>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>pip install 'streamflow==0.2.0.dev4'\n</code></pre></div></div>\n\n<p>Now run the workflow:</p>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>cwl-runner head_tail.cwl params.yml\n</code></pre></div></div>\n\n<p>To generate the RO-Crate, we’re going to need the workflow’s name in the StreamFlow database:</p>\n\n<div class=\"language-console highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"gp\">$</span><span class=\"w\"> </span>streamflow list\n<span class=\"go\">NAME                                  TYPE EXECUTIONS \nf6b2273d-a945-4b27-aa98-dcfe0b778f4c  cwl  1\n</span></code></pre></div></div>\n\n<p>In your case, the name might be different. Now generate the RO-Crate with:</p>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>streamflow prov f6b2273d-a945-4b27-aa98-dcfe0b778f4c\n</code></pre></div></div>\n\n<p>taking care to replace the workflow name with the actual one you got from <code class=\"language-plaintext highlighter-rouge\">streamflow list</code>. This will generate a zip archive containing the RO-Crate. Unzip the archive to get the RO-Crate directory:</p>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>unzip -d f6b2273d-a945-4b27-aa98-dcfe0b778f4c{,.crate.zip}\n</code></pre></div></div>\n\n<p>If you inspect <code class=\"language-plaintext highlighter-rouge\">f6b2273d-a945-4b27-aa98-dcfe0b778f4c/ro-crate-metadata.json</code>, you will find a similar structure to the one seen for Workflow Run Crate, but with a lot more detail. Most notably, there will be three actions: in addition to the one representing the execution of the whole workflow, there will be two more, representing the execution of <code class=\"language-plaintext highlighter-rouge\">headtool.cwl</code> and of <code class=\"language-plaintext highlighter-rouge\">tailtool.cwl</code>. Each of this points to the corresponding tool via <code class=\"language-plaintext highlighter-rouge\">instrument</code>, and to its inputs and outputs via <code class=\"language-plaintext highlighter-rouge\">object</code> and <code class=\"language-plaintext highlighter-rouge\">result</code>. The intermediate file resulting from the <code class=\"language-plaintext highlighter-rouge\">head</code> run (<code class=\"language-plaintext highlighter-rouge\">head_out.txt</code>) is included, and listed both as an output of the <code class=\"language-plaintext highlighter-rouge\">head</code> run and as an input of the <code class=\"language-plaintext highlighter-rouge\">tail</code> run. This situation is similar to what we’ve seen in the <a href=\"#process-run-crate\">Process Run Crate example</a>, but this time everything has been orchestrated by a workflow engine on the basis of a formal workflow description.</p>\n\n<p>More information on the entities represented in a Provenance Run Crate is available in the <a href=\"https://w3id.org/ro/wfrun/provenance\">specification</a>.</p>\n\n<p>An example a Provenance Run Crate representing an execution of a digital pathology image annotation workflow is available at <a href=\"https://doi.org/10.5281/zenodo.7669622\">https://doi.org/10.5281/zenodo.7669622</a>.</p>\n"],"ref_slides":[],"video_library":{"tutorial":null,"slides":null,"demo":null,"both":null,"session":null},"hands_on":true,"slides":false,"mod_date":"2023-05-10 14:10:03 +0000","pub_date":"2023-05-11 12:51:10 +0000","version":1,"api":"https://training.galaxyproject.org/training-material/api/topics/fair/tutorials/ro-crate-workflow-run-ro-crate/tutorial.json","tools":[],"supported_servers":{"exact":[],"inexact":[{"name":"UseGalaxy.eu","url":"https://usegalaxy.eu","id":"eu","human":"Galaxy Europe","usegalaxy":true},{"name":"UseGalaxy.org","url":"https://usegalaxy.org","id":"us","human":"Galaxy Main","usegalaxy":true},{"name":"UseGalaxy.org.au","url":"https://usegalaxy.org.au","id":"au","human":"Galaxy Australia","usegalaxy":true},{"name":"UseGalaxy.fr","url":"https://usegalaxy.fr","id":"fr","human":"Galaxy France","usegalaxy":true}]},"topic_name_human":"FAIR Data, Workflows, and Research","admin_install":{"install_tool_dependencies":true,"install_repository_dependencies":true,"install_resolver_dependencies":true,"tools":[]},"admin_install_yaml":"---\ninstall_tool_dependencies: true\ninstall_repository_dependencies: true\ninstall_resolver_dependencies: true\ntools: []\n","tours":false,"video":false,"translations":{"tutorial":[],"slides":[],"video":false},"type":"tutorial","contributors":[{"name":"Simone Leo","joined":"2023-04","elixir_node":"it","orcid":"0000-0001-8271-5429","affiliations":["by-covid","elixir-europe"],"id":"simleo","url":"https://training.galaxyproject.org/training-material/api/contributors/simleo.json","page":"https://training.galaxyproject.org/training-material/hall-of-fame/simleo/"},{"name":"BeYond-COVID","joined":"2023-04","funder":true,"funding_id":"101046203","funding_system":"cordis","funding_statement":"BY-COVID is an EC funded project that tackles the data challenges that can hinder effective pandemic response.\n\nThis project has received funding from the European Union’s Horizon Europe research and innovation programme under grant agreement № 101046203 (BY-COVID)","url":"https://training.galaxyproject.org/training-material/api/funders/by-covid.json","members":["bgruening","hexylena","ilveroluca","kikkomep","mbaardwijk","PapXis","pauldg","simleo","stain","wm75"],"id":"by-covid","page":"https://training.galaxyproject.org/training-material/hall-of-fame/by-covid/"}]}