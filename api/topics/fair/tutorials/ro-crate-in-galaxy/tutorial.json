{"layout":"tutorial_hands_on","title":"Exporting Workflow Run RO-Crates from Galaxy","time_estimation":"30m","questions":["What is a Workflow Run Crate?","How can I export a Galaxy Workflow Run Crate?"],"objectives":["Understanding, viewing and creating Galaxy Workflow Run Crates"],"key_points":["Galaxy Workflow Run Crates help you keep provenance of a workflow run / invocation.","Galaxy Workflow Run Crates give extra context to the standard workflow run export","Galaxy Workflow Run Crates can be exported from the top menu, **User -> Workflow Invocations**."],"tags":["ro-crate","workflows"],"priority":2,"contributions":{"authorship":["pauldg"],"funding":["by-covid","eurosciencegateway"]},"license":"Apache-2.0","subtopic":"ro-crate","requirements":[{"type":"internal","topic_name":"galaxy-interface","tutorials":["workflow-editor","history-to-workflow"]}],"js_requirements":{"mathjax":null,"mermaid":false},"short_id":"T00340","url":"/topics/fair/tutorials/ro-crate-in-galaxy/tutorial.html","topic_name":"fair","tutorial_name":"ro-crate-in-galaxy","dir":"topics/fair/tutorials/ro-crate-in-galaxy","symlink":null,"id":"fair/ro-crate-in-galaxy","ref_tutorials":["<p>Workflows are a powerful Galaxy feature that allows you to scale up your analysis by performing an end-to-end analysis with a single click of a button. In order to keep provenance of the workflow invocation (an invocation of a workflow means one run or execution of the workflow) it can be exported from Galaxy in the form of a <a href=\"https://w3id.org/ro/wfrun/workflow\">Workflow Run Crate</a> RO-Crate profile.</p>\n\n<blockquote class=\"agenda\">\n  <agenda-title></agenda-title>\n\n  <p>In this tutorial, you will learn how to create a git repo, and begin working with it.</p>\n\n<ol id=\"markdown-toc\">\n  <li><a href=\"#import-an-example-workflow\" id=\"markdown-toc-import-an-example-workflow\">Import an example workflow</a></li>\n  <li><a href=\"#run-the-workflow\" id=\"markdown-toc-run-the-workflow\">Run the workflow</a></li>\n  <li><a href=\"#export-the-workflow-run-crate\" id=\"markdown-toc-export-the-workflow-run-crate\">Export the Workflow Run Crate</a></li>\n</ol>\n\n</blockquote>\n\n<p>Additionally, the exported Workflow Run Crate allows for sharing workflow run provenance with those unfamiliar with Galaxy and its standard export format.</p>\n\n<p>This tutorial will guide you through the steps of defining such a report for your workflow, .</p>\n\n<p>This tutorial will show you how to generate Galaxy-based <a href=\"https://w3id.org/ro/crate/\">Workflow Run RO-Crate</a> after running the workflow.</p>\n\n<h2 id=\"import-an-example-workflow\">Import an example workflow</h2>\n\n<p>For this tutorial, we will use the workflow from the <a href=\"/training-material/topics/introduction/tutorials/galaxy-intro-101-everyone/tutorial.html\">Galaxy 101 for everyone tutorial</a>. If you have not done this tutorial yet, the only thing you need to know is that this is a workflow that takes as input a table of data about different species of iris plants, this table is subsequently sorted and filtered, and some plots are made. The specifics of the workflow are not important for this tutorial, only that it outputs a number of different kinds of outputs (images, tables, etc).</p>\n\n<p>We will start by importing this workflow into your Galaxy account:</p>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title>Import the workflow</hands-on-title>\n\n  <ol>\n    <li>\n      <p><strong>Import the workflow</strong> into Galaxy</p>\n\n      <!--SNIPPET-->\n      <blockquote class=\"hands_on\">   <div class=\"box-title hands_on-title\" id=\"hands-on-importing-and-launching-a-gtn-workflow\"><i class=\"fas fa-pencil-alt\" aria-hidden=\"true\"></i> Hands-on: Importing and launching a GTN workflow</div>   <div class=\"show-when-galaxy-proxy-active\"> <span class=\"workflow\" data-workflow=\"https://training.galaxyproject.org/training-material/api/ga4gh/trs/v2/tools/galaxy-interface-workflow-reports/versions/galaxy-101-everyone\">Launch <strong>Galaxy 101 for Everyone</strong> <i class=\"fas fa-share-alt\" aria-hidden=\"true\"></i></span> (<a href=\"https://github.com/galaxyproject/training-material/blob/main/topics/galaxy-interface/tutorials/workflow-reports/workflows/galaxy-101-everyone.ga\">View on GitHub</a>, <a href=\"https://training.galaxyproject.org/training-material/topics/galaxy-interface/tutorials/workflow-reports/workflows/galaxy-101-everyone.ga\">Download workflow</a>) workflow. </div>   <div class=\"hide-when-galaxy-proxy-active\"> Click to  <a href=\"https://my.galaxy.training/?path=/workflows/trs_import%3Frun_form=true%26trs_url=https://training.galaxyproject.org/training-material/api/ga4gh/trs/v2/tools/galaxy-interface-workflow-reports/versions/galaxy-101-everyone\">     Launch <strong>Galaxy 101 for Everyone</strong> <i class=\"fas fa-share-alt\" aria-hidden=\"true\"></i> </a> (<a href=\"https://github.com/galaxyproject/training-material/blob/main/topics/galaxy-interface/tutorials/workflow-reports/workflows/galaxy-101-everyone.ga\">View on GitHub</a>, <a href=\"https://training.galaxyproject.org/training-material/topics/galaxy-interface/tutorials/workflow-reports/workflows/galaxy-101-everyone.ga\">Download workflow</a>) </div>   <!--SNIPPET-->   <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-if-this-does-not-work\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-if-this-does-not-work\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: If this does not work</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <ul>   <li>Click on <em>Workflow</em> on the top menu bar of Galaxy. You will see a list of all your workflows.</li>   <li>Click on <i class=\"fas fa-upload\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-upload</span> <strong>Import</strong> at the top-right of the screen</li>   <li>Paste the following URL into the box labelled <em>“Archived Workflow URL”</em>: <code class=\"language-plaintext highlighter-rouge\">https://training.galaxyproject.org/training-material/topics/galaxy-interface/tutorials/workflow-reports/workflows/galaxy-101-everyone.ga</code></li>   <li>Click the <strong>Import workflow</strong> button</li> </ul>   <p>Below is a short video demonstrating how to import a workflow from GitHub using this procedure:</p>   <figure> <iframe credentialless=\"\" allowfullscreen=\"\" referrerpolicy=\"no-referrer\" sandbox=\"allow-scripts allow-same-origin\" allow=\"accelerometer 'none'; ambient-light-sensor 'none'; autoplay 'none'; battery 'none'; bluetooth 'none'; browsing-topics 'none'; camera 'none'; ch-ua 'none'; display-capture 'none'; domain-agent 'none'; document-domain 'none'; encrypted-media 'none'; execution-while-not-rendered 'none'; execution-while-out-of-viewport 'none'; gamepad 'none'; geolocation 'none'; gyroscope 'none'; hid 'none'; identity-credentials-get 'none'; idle-detection 'none'; keyboard-map 'none'; local-fonts 'none'; magnetometer 'none'; microphone 'none'; midi 'none'; navigation-override 'none'; otp-credentials 'none'; payment 'none'; picture-in-picture 'none'; publickey-credentials-create 'none'; publickey-credentials-get 'none'; screen-wake-lock 'none'; serial 'none'; speaker-selection 'none'; sync-xhr 'none'; usb 'none'; web-share 'none'; window-management 'none'; xr-spatial-tracking 'none'\" csp=\"sandbox allow-scripts allow-same-origin;\" width=\"560\" height=\"315\" src=\"https://www.youtube-nocookie.com/embed/hoP36Te5wko\" title=\"Importing a workflow from URL\" frameborder=\"0\" loading=\"lazy\"></iframe> <figcaption>   <span class=\"figcaption-prefix\"><strong>Video</strong>:</span> Importing a workflow from URL</figcaption> </figure> </blockquote>   <p><!--END_SNIPPET--></p> </blockquote>\n      <p><!--END_SNIPPET--></p>\n    </li>\n  </ol>\n\n</blockquote>\n\n<h2 id=\"run-the-workflow\">Run the workflow</h2>\n\n<p>Galaxy will produce several export options for any workflow. The default export gives us a serialization of the invocation data model while the RO-Crate export gives an Workflow Run Crate which includes the default export as well.</p>\n\n<p>Let’s run the workflow and export the RO-Crate.</p>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title>Run the workflow</hands-on-title>\n\n  <ol>\n    <li>\n      <p>Import the file <code class=\"language-plaintext highlighter-rouge\">iris.csv</code> via link</p>\n\n      <div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>https://zenodo.org/record/1319069/files/iris.csv\n</code></pre></div>      </div>\n\n      <p>Tip: Importing via links:</p>\n\n      <ul>\n        <li>Copy the link location</li>\n        <li>Open the Galaxy Upload Manager (galaxy-upload on the top-right of the tool panel)</li>\n        <li>Select Paste/Fetch Data</li>\n        <li>Paste the link(s) into the text field</li>\n        <li>Press Start</li>\n        <li>Close the window</li>\n      </ul>\n    </li>\n    <li>Run <strong>GTN Training: Galaxy 101 For Everyone</strong> workflow using the following parameters:\n      <ul>\n        <li><em>“Send results to a new history”</em>: <code class=\"language-plaintext highlighter-rouge\">No</code></li>\n        <li><em>“1: Iris Dataset”“</em>: the <code class=\"language-plaintext highlighter-rouge\">iris.csv</code> file we just uploaded</li>\n      </ul>\n\n      <p>Tip: Running a workflow:</p>\n      <ul>\n        <li>Click on Workflow on the top menu bar of Galaxy. You will see a list of all your workflows.</li>\n        <li>Click on the workflow-run (Run workflow) button next to your workflow</li>\n        <li>Configure the workflow as needed</li>\n        <li>Click the Run Workflow button at the top-right of the screen</li>\n        <li>You may have to refresh your history to see the queued jobs</li>\n      </ul>\n    </li>\n    <li><strong>View the workflow outputs</strong> once the workflow has completed\n      <ul>\n        <li>The workflow produces several text and tabular outputs, and two plot (image) outputs</li>\n      </ul>\n    </li>\n  </ol>\n\n</blockquote>\n\n<h2 id=\"export-the-workflow-run-crate\">Export the Workflow Run Crate</h2>\n\n<p>After the workflow has completed, we can export the RO-Crate. The crate does not appear in your history, but can be accessed from the <strong>User -&gt; Workflow Invocations</strong> menu on the top bar.</p>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title>Export the Workflow Run Crate</hands-on-title>\n\n  <ol>\n    <li>\n      <p>In the top menu bar, go to <strong>User -&gt; Workflow Invocations</strong></p>\n    </li>\n    <li>Our latest workflow run should be listed at the top.\n      <ul>\n        <li>Click on it to expand it:</li>\n      </ul>\n\n      <p><a href=\"./images/workflow-invocation-summary.png\" rel=\"noopener noreferrer\"><img src=\"./images/workflow-invocation-summary.png\" alt=\"screenshot of the workflow invocations menu, with our latest invocation at the top. \" width=\"1117\" height=\"410\" loading=\"lazy\" /></a></p>\n    </li>\n    <li>\n      <p>Click on the <strong>Export</strong> tab in the expanded view of the workflow invocation.</p>\n    </li>\n    <li>You should see a page like this. It contains:\n      <ul>\n        <li>The different export options</li>\n        <li>Location where the export should be sent to (Download locally or a remote location)</li>\n      </ul>\n    </li>\n    <li>\n      <p>Click on the Download option</p>\n\n      <p><a href=\"./images/workflow-invocation-export.png\" rel=\"noopener noreferrer\"><img src=\"./images/workflow-invocation-export.png\" alt=\"screenshot of the beginning of the workflow run export options. \" width=\"1104\" height=\"518\" loading=\"lazy\" /></a></p>\n    </li>\n  </ol>\n\n</blockquote>\n\n<p>Great work! You have created a Workflow Run Crate. This makes it easy to track the provenance of the executed workflow.</p>\n"],"ref_slides":[],"hands_on":true,"slides":false,"mod_date":"2024-01-19 11:25:41 +0000","pub_date":"2023-05-11 12:51:10 +0000","version":8,"api":"https://training.galaxyproject.org/training-material/api/topics/fair/tutorials/ro-crate-in-galaxy/tutorial.json","tools":[],"supported_servers":{"exact":[],"inexact":[{"name":"UseGalaxy.eu","url":"https://usegalaxy.eu","id":"eu","human":"Galaxy Europe","usegalaxy":true},{"name":"UseGalaxy.org","url":"https://usegalaxy.org","id":"us","human":"Galaxy Main","usegalaxy":true},{"name":"UseGalaxy.org.au","url":"https://usegalaxy.org.au","id":"au","human":"Galaxy Australia","usegalaxy":true},{"name":"UseGalaxy.fr","url":"https://usegalaxy.fr","id":"fr","human":"Galaxy France","usegalaxy":true}]},"topic_name_human":"FAIR Data, Workflows, and Research","admin_install":{"install_tool_dependencies":true,"install_repository_dependencies":true,"install_resolver_dependencies":true,"tools":[]},"admin_install_yaml":"---\ninstall_tool_dependencies: true\ninstall_repository_dependencies: true\ninstall_resolver_dependencies: true\ntools: []\n","tours":false,"video":false,"slides_recordings":false,"translations":{"tutorial":[],"slides":[],"video":false},"type":"tutorial","contributors":[{"name":"Paul De Geest","joined":"2023-04","elixir_node":"be","matrix":"padge:matrix.org","orcid":"0000-0002-8940-4946","affiliations":["by-covid","vib","eurosciencegateway","elixir-europe"],"id":"pauldg","url":"https://training.galaxyproject.org/training-material/api/contributors/pauldg.json","page":"https://training.galaxyproject.org/training-material/hall-of-fame/pauldg/"},{"name":"BeYond-COVID","joined":"2023-04","funder":true,"funding_id":"101046203","funding_system":"cordis","funding_statement":"BY-COVID is an EC funded project that tackles the data challenges that can hinder effective pandemic response.\n\nThis project has received funding from the European Union’s Horizon Europe research and innovation programme under grant agreement № 101046203 (BY-COVID)","url":"https://training.galaxyproject.org/training-material/api/funders/by-covid.json","members":["bgruening","hexylena","ilveroluca","kikkomep","mbaardwijk","PapXis","pauldg","simleo","stain","wm75"],"id":"by-covid","page":"https://training.galaxyproject.org/training-material/hall-of-fame/by-covid/"},{"name":"EuroScienceGateway","github":false,"joined":"2023-10","avatar":"/training-material/assets/images/eurosciencegateway.png","url":"https://training.galaxyproject.org/training-material/api/funders/eurosciencegateway.json","funder":true,"funding_id":"101057388","funding_system":"cordis","funding_statement":"EuroScienceGateway was funded by the European Union programme Horizon Europe (HORIZON-INFRA-2021-EOSC-01-04) under grant agreement number 101057388 and by UK Research and Innovation (UKRI) under the UK government’s Horizon Europe funding guarantee grant number 10038963.","members":["abretaud","anuprulez","bgruening","erxleben","pauldg","rlibouba"],"id":"eurosciencegateway","page":"https://training.galaxyproject.org/training-material/hall-of-fame/eurosciencegateway/"}]}