{"layout":"tutorial_hands_on","title":"Clinical-MP-1-Database-Generation","zenodo_link":"https://doi.org/10.5281/zenodo.10105821","questions":["Why do we need to generate a customized database for metaproteomics research?","How do we reduce the size of the database?"],"objectives":["Downloading databases related to 16SrRNA data","For better identification results, combine host and microbial proteins.","Reduced database provides better FDR stats."],"time_estimation":"3H","key_points":["Create a customized proteomics database from 16SrRNA results."],"contributions":{"authorship":["subinamehta","katherine-d21","dechendb"],"editing":["pratikdjagtap","timothygriffin"]},"requirements":[{"type":"internal","topic_name":"proteomics"}],"subtopic":"clinical-metaproteomics","follow_up_training":[{"type":"internal","topic_name":"proteomics","tutorials":["clinical-mp-2-discovery"]}],"tags":["label-TMT11"],"redirect_from":["/topics/proteomics/tutorials/clinical-mp-database-generation/tutorial","/short/proteomics/clinical-mp-1-database-generation","/short/T00413"],"js_requirements":{"mathjax":null,"mermaid":false},"short_id":"T00413","url":"/topics/proteomics/tutorials/clinical-mp-1-database-generation/tutorial.html","topic_name":"proteomics","tutorial_name":"clinical-mp-1-database-generation","dir":"topics/proteomics/tutorials/clinical-mp-1-database-generation","symlink":null,"id":"proteomics/clinical-mp-1-database-generation","ref_tutorials":["<p>Metaproteomics is the large-scale characterization of the entire complement of proteins expressed by microbiota. However, metaproteomics analysis of clinical samples is challenged by the presence of abundant human (host) proteins which hampers the confident detection of lower abundant microbial proteins <span class=\"citation\"><a href=\"#Batut2018\">Batut <i>et al.</i> 2018</a></span> ; [<span class=\"citation\"><a href=\"#Jagtap2015\">Jagtap <i>et al.</i> 2015</a></span> .</p>\n\n<p>To address this, we used tandem mass spectrometry (MS/MS) and bioinformatics tools on the Galaxy platform to develop a metaproteomics workflow to characterize the metaproteomes of clinical samples. This clinical metaproteomics workflow holds potential for general clinical applications such as potential secondary infections during COVID-19 infection, microbiome changes during cystic fibrosis as well as broad research questions regarding host-microbe interactions.</p>\n\n<p><a href=\"../../images/clinical-mp/clinical-mp-overview.JPG\" rel=\"noopener noreferrer\"><img src=\"../../images/clinical-mp/clinical-mp-overview.JPG\" alt=\"Clinical Metaproteomics workflow. \" width=\"960\" height=\"540\" loading=\"lazy\" /></a></p>\n\n<p>The first workflow for the clinical metaproteomics data analysis is the Database generation workflow. The Galaxy-P team has developed a workflow wherein a large database is generated by downloading protein sequences of known disease-causing microorganisms and then generating a compact database from the comprehensive database using the Metanovo tool.</p>\n\n<p><a href=\"../../images/clinical-mp/clinical-mp-database-generation.JPG\" rel=\"noopener noreferrer\"><img src=\"../../images/clinical-mp/clinical-mp-database-generation.JPG\" alt=\"Database Generation Workflow. \" width=\"960\" height=\"540\" loading=\"lazy\" /></a></p>\n\n<blockquote class=\"agenda\">\n  <agenda-title></agenda-title>\n\n  <p>In this tutorial, we will cover:</p>\n\n<ol id=\"markdown-toc\">\n  <li><a href=\"#data-upload\" id=\"markdown-toc-data-upload\">Data Upload</a>    <ol>\n      <li><a href=\"#get-data\" id=\"markdown-toc-get-data\">Get data</a></li>\n    </ol>\n  </li>\n  <li><a href=\"#import-workflow\" id=\"markdown-toc-import-workflow\">Import Workflow</a></li>\n  <li><a href=\"#step-by-step-analysis\" id=\"markdown-toc-step-by-step-analysis\">Step-by-step analysis</a>    <ol>\n      <li><a href=\"#download-protein-sequences-using-taxon-names\" id=\"markdown-toc-download-protein-sequences-using-taxon-names\">Download Protein Sequences using taxon names</a></li>\n      <li><a href=\"#download-species-protein-sequences-using-uniprot-xml-downloader-with-uniprot\" id=\"markdown-toc-download-species-protein-sequences-using-uniprot-xml-downloader-with-uniprot\">Download Species Protein Sequences using UniProt XML downloader with <strong>UniProt</strong></a></li>\n      <li><a href=\"#merging-databases-to-obtain-a-large-comprehensive-database-for-metanovo\" id=\"markdown-toc-merging-databases-to-obtain-a-large-comprehensive-database-for-metanovo\">Merging databases to obtain a large comprehensive database for MetaNovo</a></li>\n    </ol>\n  </li>\n  <li><a href=\"#reducing-database-size\" id=\"markdown-toc-reducing-database-size\">Reducing Database size</a>    <ol>\n      <li><a href=\"#metanovo-tool-generates-a-compact-database-from-your-comprehensive-database-with-metanovo\" id=\"markdown-toc-metanovo-tool-generates-a-compact-database-from-your-comprehensive-database-with-metanovo\">Metanovo tool generates a compact database from your comprehensive database with <strong>MetaNovo</strong></a></li>\n      <li><a href=\"#merging-databases-to-obtain-reduced-metanovo-database-for-peptide-discovery-with-fasta-merge-files-and-filter-unique-sequences\" id=\"markdown-toc-merging-databases-to-obtain-reduced-metanovo-database-for-peptide-discovery-with-fasta-merge-files-and-filter-unique-sequences\">Merging databases to obtain reduced MetaNovo database for peptide discovery with <strong>FASTA Merge Files and Filter Unique Sequences</strong></a></li>\n    </ol>\n  </li>\n  <li><a href=\"#conclusion\" id=\"markdown-toc-conclusion\">Conclusion</a></li>\n</ol>\n\n</blockquote>\n\n<h1 id=\"data-upload\">Data Upload</h1>\n\n<h2 id=\"get-data\">Get data</h2>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title> Data Upload </hands-on-title>\n\n  <ol>\n    <li>Create a new history for this tutorial</li>\n    <li>\n      <p>Import the files from <a href=\"https://doi.org/10.5281/zenodo.10105821\">Zenodo</a> or from\nthe shared data library (<code class=\"language-plaintext highlighter-rouge\">GTN - Material</code> -&gt; <code class=\"language-plaintext highlighter-rouge\">proteomics</code>\n -&gt; <code class=\"language-plaintext highlighter-rouge\">Clinical-MP-1-Database-Generation</code>):</p>\n\n      <div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>https://zenodo.org/records/10105821/files/HUMAN_SwissProt_Protein_Database.fasta\nhttps://zenodo.org/records/10105821/files/Species_UniProt_FASTA.fasta\nhttps://zenodo.org/records/10105821/files/Contaminants_(cRAP)_Protein_Database.fasta\nhttps://zenodo.org/records/10105821/files/PTRC_Skubitz_Plex2_F10_9Aug19_Rage_Rep-19-06-08.mgf\nhttps://zenodo.org/records/10105821/files/PTRC_Skubitz_Plex2_F11_9Aug19_Rage_Rep-19-06-08.mgf\nhttps://zenodo.org/records/10105821/files/PTRC_Skubitz_Plex2_F13_9Aug19_Rage_Rep-19-06-08.mgf\nhttps://zenodo.org/records/10105821/files/PTRC_Skubitz_Plex2_F15_9Aug19_Rage_Rep-19-06-08.mgf\n</code></pre></div>      </div>\n\n      <!--SNIPPET-->\n      <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-importing-via-links\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-importing-via-links\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Importing via links</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <ul>   <li>Copy the link location</li>   <li>     <p>Click <i class=\"fas fa-upload\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-upload</span> <strong>Upload Data</strong> at the top of the tool panel</p>   </li>   <li>Select <i class=\"fa fa-edit\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-wf-edit</span> <strong>Paste/Fetch Data</strong></li>   <li>     <p>Paste the link(s) into the text field</p>   </li>   <li>     <p>Press <strong>Start</strong></p>   </li>   <li><strong>Close</strong> the window</li> </ul> </blockquote>\n      <p><!--END_SNIPPET--></p>\n\n      <!--SNIPPET-->\n      <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-importing-data-from-a-data-library\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-importing-data-from-a-data-library\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Importing data from a data library</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <p>As an alternative to uploading the data from a URL or your computer, the files may also have been made available from a <em>shared data library</em>:</p>   <ol>   <li>Go into <strong>Shared data</strong> (top panel) then <strong>Data libraries</strong></li>   <li>Navigate to  the correct folder as indicated by your instructor.     <ul>       <li>On most Galaxies tutorial data will be provided in a folder named <strong>GTN - Material –&gt; Topic Name -&gt; Tutorial Name</strong>.</li>     </ul>   </li>   <li>Select the desired files</li>   <li>Click on <strong>Add to History</strong> <i class=\"fas fa-caret-down\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-dropdown</span> near the top and select <strong>as Datasets</strong> from the dropdown menu</li>   <li>     <p>In the pop-up window, choose</p>     <ul>       <li><em>“Select history”</em>: the history you want to import the data to (or create a new one)</li>     </ul>   </li>   <li>Click on <strong>Import</strong></li> </ol> </blockquote>\n      <p><!--END_SNIPPET--></p>\n    </li>\n    <li>Rename the datasets</li>\n    <li>\n      <p>Check that the datatype</p>\n\n      <!--SNIPPET-->\n      <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-changing-the-datatype\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-changing-the-datatype\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Changing the datatype</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <ul>   <li>Click on the <i class=\"fas fa-pencil-alt\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-pencil</span> <strong>pencil icon</strong> for the dataset to edit its attributes</li>   <li>In the central panel, click <i class=\"fas fa-database\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-chart-select-data</span> <strong>Datatypes</strong> tab on the top</li>   <li>In the <i class=\"fas fa-database\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-chart-select-data</span> <strong>Assign Datatype</strong>, select <code class=\"language-plaintext highlighter-rouge\">datatypes</code> from “<em>New type</em>” dropdown     <ul>       <li>Tip: you can start typing the datatype into the field to filter the dropdown menu</li>     </ul>   </li>   <li>Click the <strong>Save</strong> button</li> </ul> </blockquote>\n      <p><!--END_SNIPPET--></p>\n    </li>\n    <li>Optional-Add to each database a tag corresponding to the file name.</li>\n    <li>\n      <p>Create a dataset collection of the 4 MGF datasets.</p>\n\n      <!--SNIPPET-->\n      <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-adding-a-tag\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-adding-a-tag\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Adding a tag</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <ol>   <li>Click on the dataset to expand it</li>   <li>Click on <strong>Add Tags</strong> <i class=\"fas fa-tags\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-tags</span></li>   <li>Add a tag  starting with <code class=\"language-plaintext highlighter-rouge\">#</code>     <ul>       <li>Tags starting with <code class=\"language-plaintext highlighter-rouge\">#</code> will be automatically propagated to the outputs of tools using this dataset.</li>     </ul>   </li>   <li>Press <kbd>Enter</kbd></li>   <li>Check that the tag appears below the dataset name</li> </ol> </blockquote>\n      <p><!--END_SNIPPET--></p>\n    </li>\n  </ol>\n\n</blockquote>\n\n<h1 id=\"import-workflow\">Import Workflow</h1>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title>Running the Workflow</hands-on-title>\n\n  <ol>\n    <li>\n      <p><strong>Import the workflow</strong> into Galaxy:</p>\n\n      <!--SNIPPET-->\n      <blockquote class=\"hands_on\">   <div class=\"box-title hands_on-title\" id=\"hands-on-importing-and-launching-a-gtn-workflow\"><i class=\"fas fa-pencil-alt\" aria-hidden=\"true\"></i> Hands-on: Importing and launching a GTN workflow</div>   <div class=\"show-when-galaxy-proxy-active\"> <span class=\"workflow\" data-workflow=\"https://training.galaxyproject.org/training-material/api/ga4gh/trs/v2/tools/proteomics-clinical-mp-database-generation/versions/main_workflow\">Launch <strong>Pretreatments</strong> <i class=\"fas fa-share-alt\" aria-hidden=\"true\"></i></span> (<a href=\"https://github.com/galaxyproject/training-material/blob/main/topics/proteomics/tutorials/clinical-mp-database-generation/workflows/main_workflow.ga\">View on GitHub</a>, <a href=\"https://training.galaxyproject.org/training-material/topics/proteomics/tutorials/clinical-mp-database-generation/workflows/main_workflow.ga\">Download workflow</a>) workflow. </div>   <div class=\"hide-when-galaxy-proxy-active\"> Click to  <a href=\"https://my.galaxy.training/?path=/workflows/trs_import%3Frun_form=true%26trs_url=https://training.galaxyproject.org/training-material/api/ga4gh/trs/v2/tools/proteomics-clinical-mp-database-generation/versions/main_workflow\">     Launch <strong>Pretreatments</strong> <i class=\"fas fa-share-alt\" aria-hidden=\"true\"></i> </a> (<a href=\"https://github.com/galaxyproject/training-material/blob/main/topics/proteomics/tutorials/clinical-mp-database-generation/workflows/main_workflow.ga\">View on GitHub</a>, <a href=\"https://training.galaxyproject.org/training-material/topics/proteomics/tutorials/clinical-mp-database-generation/workflows/main_workflow.ga\">Download workflow</a>) </div>   <!--SNIPPET-->   <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-if-this-does-not-work\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-if-this-does-not-work\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: If this does not work</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <ul>   <li>Click on <em>Workflow</em> on the top menu bar of Galaxy. You will see a list of all your workflows.</li>   <li>Click on <i class=\"fas fa-upload\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">galaxy-upload</span> <strong>Import</strong> at the top-right of the screen</li>   <li>Paste the following URL into the box labelled <em>“Archived Workflow URL”</em>: <code class=\"language-plaintext highlighter-rouge\">https://training.galaxyproject.org/training-material/topics/proteomics/tutorials/clinical-mp-database-generation/workflows/main_workflow.ga</code></li>   <li>Click the <strong>Import workflow</strong> button</li> </ul>   <p>Below is a short video demonstrating how to import a workflow from GitHub using this procedure:</p>   <figure> <iframe credentialless=\"\" allowfullscreen=\"\" referrerpolicy=\"no-referrer\" sandbox=\"allow-scripts allow-same-origin\" allow=\"accelerometer 'none'; ambient-light-sensor 'none'; autoplay 'none'; battery 'none'; bluetooth 'none'; browsing-topics 'none'; camera 'none'; ch-ua 'none'; display-capture 'none'; domain-agent 'none'; document-domain 'none'; encrypted-media 'none'; execution-while-not-rendered 'none'; execution-while-out-of-viewport 'none'; gamepad 'none'; geolocation 'none'; gyroscope 'none'; hid 'none'; identity-credentials-get 'none'; idle-detection 'none'; keyboard-map 'none'; local-fonts 'none'; magnetometer 'none'; microphone 'none'; midi 'none'; navigation-override 'none'; otp-credentials 'none'; payment 'none'; picture-in-picture 'none'; publickey-credentials-create 'none'; publickey-credentials-get 'none'; screen-wake-lock 'none'; serial 'none'; speaker-selection 'none'; sync-xhr 'none'; usb 'none'; web-share 'none'; window-management 'none'; xr-spatial-tracking 'none'\" csp=\"sandbox allow-scripts allow-same-origin;\" width=\"560\" height=\"315\" src=\"https://www.youtube-nocookie.com/embed/hoP36Te5wko\" title=\"Importing a workflow from URL\" frameborder=\"0\" loading=\"lazy\"></iframe> <figcaption>   <span class=\"figcaption-prefix\"><strong>Video</strong>:</span> Importing a workflow from URL</figcaption> </figure> </blockquote>   <p><!--END_SNIPPET--></p> </blockquote>\n      <p><!--END_SNIPPET--></p>\n    </li>\n    <li>\n      <p>Run <strong>Workflow</strong> <i class=\"fas fa-share-alt\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">workflow</span> using the following parameters:</p>\n      <ul>\n        <li><em>“Send results to a new history”</em>: <code class=\"language-plaintext highlighter-rouge\">No</code></li>\n        <li><i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> <em>” Input Dataset collection”</em>: <code class=\"language-plaintext highlighter-rouge\">MGF dataset collection</code></li>\n        <li><i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> <em>” Species_tabular”</em>: <code class=\"language-plaintext highlighter-rouge\">Species_tabular.tabular</code></li>\n      </ul>\n\n      <!--SNIPPET-->\n      <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-running-a-workflow\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-running-a-workflow\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Running a workflow</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <ul>   <li>Click on <em>Workflow</em> on the top menu bar of Galaxy. You will see a list of all your workflows.</li>   <li>Click on the <i class=\"fas fa-play\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">workflow-run</span> (<em>Run workflow</em>) button next to your workflow</li>   <li>Configure the workflow as needed</li>   <li>Click the <strong>Run Workflow</strong> button at the top-right of the screen</li>   <li>You may have to refresh your history to see the queued jobs</li> </ul> </blockquote>\n      <p><!--END_SNIPPET--></p>\n    </li>\n  </ol>\n\n</blockquote>\n\n<h1 id=\"step-by-step-analysis\">Step-by-step analysis</h1>\n\n<h2 id=\"download-protein-sequences-using-taxon-names\">Download Protein Sequences using taxon names</h2>\n<p>First, we want to generate a large comprehensive protein sequence database using the UniProt XML Downloader to extract sequences for species of interest. To do so, you will need a tabular file that contains a list of species.</p>\n\n<p>For this tutorial, a literature survey was conducted to obtain 118 taxonomic species of organisms that are commonly associated with the female reproductive tract <span class=\"citation\"><a href=\"#AfiuniZadeh2018\">Afiuni-Zadeh <i>et al.</i> 2018</a></span>. This species list was used to generate a protein sequence FASTA database was generated using the UniProt XML Downloader tool within the Galaxy framework. In this tutorial, the Species FASTA database (~3.38 million sequences) has already been provided as input. However, if you have your own list of species of interest as a tabular file (<code class=\"language-plaintext highlighter-rouge\">Your_Species_tabular.tabular</code>), steps to generate a FASTA file from a tabular file are included:</p>\n\n<h2 id=\"download-species-protein-sequences-using-uniprot-xml-downloader-with-uniprot\">Download Species Protein Sequences using UniProt XML downloader with <strong>UniProt</strong></h2>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title> UniProt XML downloader</hands-on-title>\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/galaxyp/uniprotxml_downloader/uniprotxml_downloader/2.3.0\" title=\"UniProt tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>UniProt</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 2.3.0)</span> with the following parameters:\n      <ul>\n        <li><em>“Select”</em>: <code class=\"language-plaintext highlighter-rouge\">Your_Species_tabular.tabular</code>\n          <ul>\n            <li><i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> <em>“Dataset (tab separated) with Taxon ID/Name column”</em>: <code class=\"language-plaintext highlighter-rouge\">output</code> (Input dataset)</li>\n            <li><em>“Column with Taxon ID/name”</em>: <code class=\"language-plaintext highlighter-rouge\">c1</code></li>\n          </ul>\n        </li>\n        <li><em>“UniProt output format”</em>: <code class=\"language-plaintext highlighter-rouge\">fasta</code></li>\n      </ul>\n    </li>\n    <li>\n      <p>Rename the output as Species_UniProt_FASTA.fasta</p>\n\n      <blockquote class=\"comment\">\n        <comment-title> UniProt description </comment-title>\n\n        <p>This tool will help download the protein fasta sequences by inputting the taxon names.</p>\n      </blockquote>\n    </li>\n  </ol>\n\n</blockquote>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <ol>\n    <li>Can we use a higher taxonomy clade than species for the UniProt XML downloader?</li>\n    <li>Why are we using the tools separately? Can we run it all together?</li>\n    <li>Can we select multiple files together?</li>\n    <li>How many FASTA files can be merged at once, i.e. is there a limit on the number/size of files?</li>\n  </ol>\n\n  <blockquote class=\"solution\">\n    <solution-title></solution-title>\n\n    <ol>\n      <li>Yes, the UniProt XML downloader can also be used for generating a database from Genus, Family, Order, or any other higher taxonomy clade.</li>\n      <li>The tools are run separately to reduce the load on the server and tool. If you have a limited number of taxon names, then you can run it all together.</li>\n      <li>Yes, that certainly can be done. We used one input file at a time to maintain the order of sequences in the database.</li>\n      <li>There is no limit.</li>\n    </ol>\n\n  </blockquote>\n\n</blockquote>\n\n<h2 id=\"merging-databases-to-obtain-a-large-comprehensive-database-for-metanovo\">Merging databases to obtain a large comprehensive database for MetaNovo</h2>\n<p>Once generated, the Species UniProt database (~3.38 million sequences) will be merged with the Human SwissProt database (reviewed only; ~20.4K sequences) and contaminant (cRAP) sequences database (116 sequences) and filtered to generate the large comprehensive database (~2.59 million sequences). The large comprehensive database will be used to generate a compact database using MetaNovo, which is much more manageable.</p>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title> Download contaminants with **Protein Database Downloader </hands-on-title>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/galaxyp/dbbuilder/dbbuilder/0.3.4\" title=\"Protein Database Downloader tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>Protein Database Downloader</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 0.3.4)</span> with the following parameters:\n      <ul>\n        <li><em>“Download from?”</em>: <code class=\"language-plaintext highlighter-rouge\">cRAP (contaminants)</code></li>\n      </ul>\n    </li>\n    <li>Rename as “Protein Database Contaminants (cRAP)”</li>\n  </ol>\n\n</blockquote>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title> Human SwissProt (reviewed) database</hands-on-title>\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/galaxyp/dbbuilder/dbbuilder/0.3.4\" title=\"Protein Database Downloader tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>Protein Database Downloader</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 0.3.4)</span> with the following parameters:\n      <ul>\n        <li><em>“Download from?”</em>: <code class=\"language-plaintext highlighter-rouge\">UniProtKB(reviewed only)</code>\n          <ul>\n            <li>In <em>“Taxonomy”</em>: <code class=\"language-plaintext highlighter-rouge\">Homo sapiens (Human)</code></li>\n            <li>In <em>“reviewed”</em>: <code class=\"language-plaintext highlighter-rouge\">UniProtKB/Swiss-Prot (reviewed only)</code></li>\n            <li>In  <em>“Proteome Set”</em>: <code class=\"language-plaintext highlighter-rouge\">Reference Proteome Set</code></li>\n            <li>In  <em>“Include isoform data”</em>: <code class=\"language-plaintext highlighter-rouge\">False</code></li>\n          </ul>\n        </li>\n      </ul>\n    </li>\n    <li>Rename as “Protein Database Human SwissProt”.</li>\n  </ol>\n</blockquote>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <ol>\n    <li>How often is the Protein Database Downloader updated?</li>\n  </ol>\n\n  <blockquote class=\"solution\">\n    <solution-title></solution-title>\n\n    <ol>\n      <li>It is updated every 3 months.</li>\n    </ol>\n\n  </blockquote>\n\n</blockquote>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title> FASTA Merge Files and Filter Unique Sequences </hands-on-title>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/galaxyp/fasta_merge_files_and_filter_unique_sequences/fasta_merge_files_and_filter_unique_sequences/1.2.0\" title=\"FASTA Merge Files and Filter Unique Sequences tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>FASTA Merge Files and Filter Unique Sequences</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 1.2.0)</span> with the following parameters:\n      <ul>\n        <li><em>“Run in batch mode?”</em>: <code class=\"language-plaintext highlighter-rouge\">Merge individual FASTAs (output collection if input is collection)</code>\n          <ul>\n            <li>In <em>“Input FASTA File(s)”</em>:\n              <ul>\n                <li><i class=\"far fa-plus-square\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-repeat</span> <em>“Insert Input FASTA File(s)”</em>\n                  <ul>\n                    <li><i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> <em>“FASTA File”</em>: <code class=\"language-plaintext highlighter-rouge\">Species_UniProt_FASTA </code> (output of <strong>UniProt XML downloader</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span>)</li>\n                    <li><i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> <em>“FASTA File”</em>: <code class=\"language-plaintext highlighter-rouge\">Protein Database Human SwissProt</code> (output of <strong>Protein Database Downloader</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span>)</li>\n                    <li><i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> <em>“FASTA File”</em>: <code class=\"language-plaintext highlighter-rouge\">Protein Database Contaminants (cRAP)</code> (output of <strong>Protein Database Downloader</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span>)</li>\n                  </ul>\n                </li>\n              </ul>\n            </li>\n          </ul>\n        </li>\n      </ul>\n    </li>\n    <li>Rename out as “Human UniProt Microbial Proteins cRAP for MetaNovo”.</li>\n  </ol>\n\n</blockquote>\n\n<h1 id=\"reducing-database-size\">Reducing Database size</h1>\n\n<h2 id=\"metanovo-tool-generates-a-compact-database-from-your-comprehensive-database-with-metanovo\">Metanovo tool generates a compact database from your comprehensive database with <strong>MetaNovo</strong></h2>\n<p>Next, the large comprehensive database of ~2.59 million sequences can be reduced using the MetaNovo tool to generate a more manageable database that contains identified proteins.</p>\n\n<p>The compact MetaNovo-generated database (~1.9K sequences) will be merged with Human SwissProt (reviewed only) and contaminants (cRAP) databases to generate the reduced database (~21.2k protein sequences) that will be used for peptide identification (see <a href=\"https://github.com/subinamehta/training-material/blob/main/topics/proteomics/tutorials/clinical-mp-discovery/tutorial.md\">Discovery Module tutorial</a>).</p>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title> MetaNovo </hands-on-title>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/galaxyp/metanovo/metanovo/1.9.4+galaxy4\" title=\"MetaNovo tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>MetaNovo</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 1.9.4+galaxy4)</span> with the following parameters:\n      <ul>\n        <li><em>“MGF Input Type”</em>: <code class=\"language-plaintext highlighter-rouge\">Collection</code>\n          <ul>\n            <li><i class=\"far fa-folder\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-collection</span> <em>“MGF Collection”</em>: <code class=\"language-plaintext highlighter-rouge\">output</code> (Input dataset collection)</li>\n          </ul>\n        </li>\n        <li><i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> <em>“FASTA File”</em>: <code class=\"language-plaintext highlighter-rouge\">output</code> (output of <strong>FASTA Merge Files and Filter Unique Sequences</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span>)</li>\n        <li>In <em>“Spectrum Matching Parameters”</em>:\n          <ul>\n            <li><em>“Fragment ion mass tolerance”</em>: <code class=\"language-plaintext highlighter-rouge\">0.01</code></li>\n            <li><em>“Enzyme”</em>: <code class=\"language-plaintext highlighter-rouge\">Trypsin (no P rule)</code></li>\n            <li><em>“Fixed modifications as comma separated list”</em>: <code class=\"language-plaintext highlighter-rouge\">Carbamidomethylation of C</code> <code class=\"language-plaintext highlighter-rouge\">TMT 10-plex of K</code> <code class=\"language-plaintext highlighter-rouge\">TMT 10-plex of peptide N-term</code></li>\n            <li><em>“Variable modifications as comma separated list”</em>: <code class=\"language-plaintext highlighter-rouge\">Oxidation of M</code></li>\n            <li><em>“Maximal charge to search for”</em>: <code class=\"language-plaintext highlighter-rouge\">5</code></li>\n          </ul>\n        </li>\n        <li>In <em>“Import Filters”</em>:\n          <ul>\n            <li><em>“The maximal peptide length to consider when importing identification files”</em>: <code class=\"language-plaintext highlighter-rouge\">50</code></li>\n          </ul>\n        </li>\n      </ul>\n    </li>\n    <li>Rename as “MetaNovo Compact Database”.</li>\n  </ol>\n\n</blockquote>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <ol>\n    <li>Why are we reducing the size of the database?</li>\n    <li>Why is this running TMT10 plex modification when the data is 11-plex?</li>\n    <li>Regarding MetaNovo Spectrum Matching parameters, what are the most “important” parameters? Meaning, that if a user wants to reduce or increase the sensitivity/number of output sequences, what should they change?</li>\n  </ol>\n\n  <blockquote class=\"solution\">\n    <solution-title></solution-title>\n\n    <ol>\n      <li>Reducing the size of the database improves search speed, FDR, and sensitivity.</li>\n      <li>There is no option for 11-plex modifications in Metanovo, hence we use the TMT-10plex.</li>\n      <li>The most important parameters are the tolerance (MS1 and MS2) and any modifications introduced during the processing of the data.</li>\n    </ol>\n\n  </blockquote>\n\n</blockquote>\n\n<h2 id=\"merging-databases-to-obtain-reduced-metanovo-database-for-peptide-discovery-with-fasta-merge-files-and-filter-unique-sequences\">Merging databases to obtain reduced MetaNovo database for peptide discovery with <strong>FASTA Merge Files and Filter Unique Sequences</strong></h2>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title> FASTA Merge Files and Filter Unique Sequences</hands-on-title>\n\n  <ol>\n    <li><span class=\"tool\" data-tool=\"toolshed.g2.bx.psu.edu/repos/galaxyp/fasta_merge_files_and_filter_unique_sequences/fasta_merge_files_and_filter_unique_sequences/1.2.0\" title=\"FASTA Merge Files and Filter Unique Sequences tool\" aria-role=\"button\"><i class=\"fas fa-wrench\" aria-hidden=\"true\"></i> <strong>FASTA Merge Files and Filter Unique Sequences</strong> (<i class=\"fas fa-cubes\" aria-hidden=\"true\"></i> Galaxy version 1.2.0)</span> with the following parameters:\n      <ul>\n        <li><em>“Run in batch mode?”</em>: <code class=\"language-plaintext highlighter-rouge\">Merge individual FASTAs (output collection if input is collection)</code>\n          <ul>\n            <li>In <em>“Input FASTA File(s)”</em>:\n              <ul>\n                <li><i class=\"far fa-plus-square\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-repeat</span> <em>“Insert Input FASTA File(s)”</em>\n                  <ul>\n                    <li><i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> <em>“FASTA File”</em>: <code class=\"language-plaintext highlighter-rouge\">MetaNovo Compact Database</code> (output of <strong>MetaNovo</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span>)</li>\n                    <li><i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> <em>“FASTA File”</em>: <code class=\"language-plaintext highlighter-rouge\">Protein Database Human SwissProt</code> (output of <strong>Protein Database Downloader</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span>)</li>\n                    <li><i class=\"far fa-file\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">param-file</span> <em>“FASTA File”</em>: <code class=\"language-plaintext highlighter-rouge\">Protein Database Contaminants (cRAP)</code> (output of <strong>Protein Database Downloader</strong> <i class=\"fas fa-wrench\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">tool</span>)</li>\n                  </ul>\n                </li>\n              </ul>\n            </li>\n          </ul>\n        </li>\n      </ul>\n    </li>\n  </ol>\n\n</blockquote>\n\n<h1 id=\"conclusion\">Conclusion</h1>\n\n<p>The first step for the Clinical Metaproteomics study is database generation. As we didn’t have a reference database or information from 16srRNA-seq data, we generated a fasta database doing a literature survey, however, if 16S rRNA data is present, the taxon identified can be used for a customized database generation. As the size of the comprehensive database is generally  too large, we used the Metanovo tool to reduce the size of the database. This reduced database will be then used for clinical metaproteomics discovery workflow.</p>\n"],"ref_slides":[],"hands_on":true,"slides":false,"mod_date":"2024-02-12 12:37:40 +0000","pub_date":"2024-02-06 15:43:02 +0000","version":2,"api":"https://training.galaxyproject.org/training-material/api/topics/proteomics/tutorials/clinical-mp-1-database-generation/tutorial.json","tools":["toolshed.g2.bx.psu.edu/repos/galaxyp/dbbuilder/dbbuilder/0.3.4","toolshed.g2.bx.psu.edu/repos/galaxyp/fasta_merge_files_and_filter_unique_sequences/fasta_merge_files_and_filter_unique_sequences/1.2.0","toolshed.g2.bx.psu.edu/repos/galaxyp/metanovo/metanovo/1.9.4+galaxy4","toolshed.g2.bx.psu.edu/repos/galaxyp/uniprotxml_downloader/uniprotxml_downloader/2.3.0"],"supported_servers":{"exact":[{"url":"https://usegalaxy.cz/","name":"UseGalaxy.cz","usegalaxy":false},{"url":"https://usegalaxy.eu","name":"UseGalaxy.eu","usegalaxy":true}],"inexact":[]},"topic_name_human":"Proteomics","admin_install":{"install_tool_dependencies":true,"install_repository_dependencies":true,"install_resolver_dependencies":true,"tools":[{"name":"dbbuilder","owner":"galaxyp","revisions":"983bf725dfc2","tool_panel_section_label":"Get Data","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"fasta_merge_files_and_filter_unique_sequences","owner":"galaxyp","revisions":"f546e7278f04","tool_panel_section_label":"FASTA/FASTQ","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"metanovo","owner":"galaxyp","revisions":"d6dcd3173bdf","tool_panel_section_label":"Proteomics","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"uniprotxml_downloader","owner":"galaxyp","revisions":"265c35540faa","tool_panel_section_label":"Get Data","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"}]},"admin_install_yaml":"---\ninstall_tool_dependencies: true\ninstall_repository_dependencies: true\ninstall_resolver_dependencies: true\ntools:\n- name: dbbuilder\n  owner: galaxyp\n  revisions: 983bf725dfc2\n  tool_panel_section_label: Get Data\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: fasta_merge_files_and_filter_unique_sequences\n  owner: galaxyp\n  revisions: f546e7278f04\n  tool_panel_section_label: FASTA/FASTQ\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: metanovo\n  owner: galaxyp\n  revisions: d6dcd3173bdf\n  tool_panel_section_label: Proteomics\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: uniprotxml_downloader\n  owner: galaxyp\n  revisions: 265c35540faa\n  tool_panel_section_label: Get Data\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n","tours":false,"video":false,"slides_recordings":false,"translations":{"tutorial":[],"slides":[],"video":false},"license":"CC-BY-4.0","type":"tutorial","contributors":[{"name":"Subina Mehta","email":"subinamehta@gmail.com","twitter":"Subina_Mehta","linkedin":"subinamehta","matrix":"subinamehta:matrix.org","orcid":"0000-0001-9818-0537","joined":"2018-06","id":"subinamehta","url":"https://training.galaxyproject.org/training-material/api/contributors/subinamehta.json","page":"https://training.galaxyproject.org/training-material/hall-of-fame/subinamehta/"},{"name":"Katherine Do","joined":"2023-08","id":"katherine-d21","url":"https://training.galaxyproject.org/training-material/api/contributors/katherine-d21.json","page":"https://training.galaxyproject.org/training-material/hall-of-fame/katherine-d21/"},{"name":"Dechen Bhuming","joined":"2023-06","id":"dechendb","url":"https://training.galaxyproject.org/training-material/api/contributors/dechendb.json","page":"https://training.galaxyproject.org/training-material/hall-of-fame/dechendb/"},{"name":"Pratik Jagtap","email":"pjagtap@umn.edu","joined":"2017-09","orcid":"0000-0003-0984-0973","id":"pratikdjagtap","url":"https://training.galaxyproject.org/training-material/api/contributors/pratikdjagtap.json","page":"https://training.galaxyproject.org/training-material/hall-of-fame/pratikdjagtap/"},{"name":"Timothy J. Griffin","email":"tgriffin@umn.edu","github":false,"joined":"2017-09","orcid":"0000-0001-6801-2559","id":"timothygriffin","url":"https://training.galaxyproject.org/training-material/api/contributors/timothygriffin.json","page":"https://training.galaxyproject.org/training-material/hall-of-fame/timothygriffin/"}]}