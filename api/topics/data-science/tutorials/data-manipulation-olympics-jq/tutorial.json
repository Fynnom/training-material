{"layout":"tutorial_hands_on","title":"Data Manipulation Olympics - JQ","zenodo_link":"https://zenodo.org/record/6803028","tags":["cyoa","json"],"questions":["How can I do basic data manipulation with JQ?","Which functions are available to convert, reformat, filter, sort etc my JSON-based data?"],"objectives":["Familiarize yourself with data manipulation filters in JQ","Perform basic data manipulation tasks in JQ","Become comfortable converting JSON-based files in a variety of ways.","Reason about the expected outcome of tools"],"time_estimation":"1h","key_points":["There are a lot of functions available in JQ for performing basic data manipulation tasks","Basic data manipulation is often needed between steps in a larger scientific analysis in order to connect outputs from one tool to input of another.","There are often multiple ways/tools to achieve the same end result","Having a basic understanding of data manipulation tools will make it easier to do exploratory data analysis","Always read the help text of the tool before using it to get a full understanding of its workings","Always try to formulate the output you are expecting from a tool. This will make it easier to spot mistakes as soon as possible."],"contributions":{"authorship":["shiltemann","hexylena"],"funding":["gallantries"]},"level":"Introductory","priority":4,"subtopic":"next-steps","js_requirements":{"mathjax":28814,"mermaid":false},"short_id":"T00352","url":"/topics/data-science/tutorials/data-manipulation-olympics-jq/tutorial.html","topic_name":"data-science","tutorial_name":"data-manipulation-olympics-jq","dir":"topics/data-science/tutorials/data-manipulation-olympics-jq","symlink":null,"id":"data-science/data-manipulation-olympics-jq","ref_tutorials":["<p>Scientific analyses often consist of a number of tools that run one after the other, in order to go from the raw data to scientific insight. Between these specialized tools, simple data manipulation steps are often needed as a kind of “glue” between tools. For example, the output of tool A may produce a file that contains all the information needed as input for tool B, but tool B expects the columns in a different order. Or in genomic data analysis, some tools expect chromosome X to be listed as <code class=\"language-plaintext highlighter-rouge\">chrX</code>, while others simply expect <code class=\"language-plaintext highlighter-rouge\">X</code>. In these situations, extra data manipulation steps are needed to prepare files for input to analysis tools.</p>\n\n<!--\nNote to contributors: feel free to add sections here to include additional data manipulation options.\nMake sure each section is independent of each other, i.e. each section should start with the olympics.tsv file.\nAlso make sure to include many exercises (with answers) for your section!\n-->\n\n<p>Galaxy has a large collection of tools to perform such basic data manipulation tasks, and becoming familiar with these operations will allow to perform your analysis more easily in Galaxy (and outside).</p>\n\n<blockquote class=\"agenda\">\n  <agenda-title></agenda-title>\n\n  <p>In this tutorial, we will cover:</p>\n\n<ol id=\"markdown-toc\">\n  <li><a href=\"#cheatsheet\" id=\"markdown-toc-cheatsheet\">Cheatsheet</a></li>\n  <li><a href=\"#background\" id=\"markdown-toc-background\">Background</a></li>\n  <li><a href=\"#download-data\" id=\"markdown-toc-download-data\">Download Data</a>    <ol>\n      <li><a href=\"#about-this-dataset\" id=\"markdown-toc-about-this-dataset\">About this dataset</a></li>\n    </ol>\n  </li>\n  <li><a href=\"#choose-your-adventure\" id=\"markdown-toc-choose-your-adventure\">Choose your adventure!</a></li>\n  <li><a href=\"#file-format-conversion\" id=\"markdown-toc-file-format-conversion\">File Format Conversion</a>    <ol>\n      <li><a href=\"#pipes\" id=\"markdown-toc-pipes\">Pipes</a></li>\n    </ol>\n  </li>\n  <li><a href=\"#sorting\" id=\"markdown-toc-sorting\">Sorting</a>    <ol>\n      <li><a href=\"#sort-on-multiple-columns-at-once\" id=\"markdown-toc-sort-on-multiple-columns-at-once\">Sort on multiple columns at once</a></li>\n      <li><a href=\"#exercises\" id=\"markdown-toc-exercises\">Exercises</a></li>\n    </ol>\n  </li>\n  <li><a href=\"#filtering\" id=\"markdown-toc-filtering\">Filtering</a>    <ol>\n      <li><a href=\"#exercises-1\" id=\"markdown-toc-exercises-1\">Exercises</a></li>\n    </ol>\n  </li>\n  <li><a href=\"#counting\" id=\"markdown-toc-counting\">Counting</a>    <ol>\n      <li><a href=\"#exercises-2\" id=\"markdown-toc-exercises-2\">Exercises</a></li>\n    </ol>\n  </li>\n  <li><a href=\"#computing\" id=\"markdown-toc-computing\">Computing</a>    <ol>\n      <li><a href=\"#exercises-3\" id=\"markdown-toc-exercises-3\">Exercises</a></li>\n    </ol>\n  </li>\n  <li><a href=\"#find-and-replace\" id=\"markdown-toc-find-and-replace\">Find and Replace</a>    <ol>\n      <li><a href=\"#exercises-4\" id=\"markdown-toc-exercises-4\">Exercises</a></li>\n    </ol>\n  </li>\n  <li><a href=\"#removing-columns\" id=\"markdown-toc-removing-columns\">Removing Columns</a>    <ol>\n      <li><a href=\"#exercises-5\" id=\"markdown-toc-exercises-5\">Exercises</a></li>\n    </ol>\n  </li>\n  <li><a href=\"#unique\" id=\"markdown-toc-unique\">Unique</a></li>\n  <li><a href=\"#joining-files\" id=\"markdown-toc-joining-files\">Joining Files</a></li>\n  <li><a href=\"#concatenating\" id=\"markdown-toc-concatenating\">Concatenating</a></li>\n  <li><a href=\"#splitting-files\" id=\"markdown-toc-splitting-files\">Splitting Files</a>    <ol>\n      <li><a href=\"#exercises-6\" id=\"markdown-toc-exercises-6\">Exercises</a></li>\n    </ol>\n  </li>\n  <li><a href=\"#conclusion\" id=\"markdown-toc-conclusion\">Conclusion</a></li>\n  <li><a href=\"#exercises-putting-it-all-together\" id=\"markdown-toc-exercises-putting-it-all-together\">Exercises: Putting it all together!</a></li>\n</ol>\n\n</blockquote>\n\n<h1 id=\"cheatsheet\">Cheatsheet</h1>\n\n<p>Here is an overview table of the different data manipulations in this tutorial, with links to the tools in Galaxy.</p>\n\n<p>If you’ve opened this tutorial via the <i class=\"fas fa-graduation-cap\" aria-hidden=\"true\"></i><span class=\"visually-hidden\">level</span> icon in Galaxy (top menu bar), you can click on the tool names in the last column to quickly open them in Galaxy and start using them on your own!</p>\n\n<table>\n  <thead>\n    <tr>\n      <th>Operation</th>\n      <th>Description</th>\n      <th>Galaxy Tool</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>Compute an expression</td>\n      <td>Over each row, add it as a new column</td>\n      <td><code class=\"language-plaintext highlighter-rouge\">.key1 * .key2</code></td>\n    </tr>\n    <tr>\n      <td>Concatenate datasets</td>\n      <td>one after the other</td>\n      <td><code class=\"language-plaintext highlighter-rouge\">cat *.json | jq</code></td>\n    </tr>\n    <tr>\n      <td>Convert format</td>\n      <td>Change the file format</td>\n      <td>Often xsv, other tools.</td>\n    </tr>\n    <tr>\n      <td>Counting</td>\n      <td>Count the number of objects in an array</td>\n      <td><code class=\"language-plaintext highlighter-rouge\">length</code></td>\n    </tr>\n    <tr>\n      <td>Cut Columns</td>\n      <td>By header name</td>\n      <td><code class=\"language-plaintext highlighter-rouge\">.key</code></td>\n    </tr>\n    <tr>\n      <td>Filter</td>\n      <td>Remove objects based on values</td>\n      <td><code class=\"language-plaintext highlighter-rouge\">select(.key == \"value\")</code></td>\n    </tr>\n    <tr>\n      <td>Find and Replace</td>\n      <td>in a specific column</td>\n      <td><code class=\"language-plaintext highlighter-rouge\">gsub(\"(?&lt;a&gt;...)\", \"xyz\\\\(.a)abc\")</code></td>\n    </tr>\n    <tr>\n      <td>Group on a column</td>\n      <td>And perform simple operations (count, mean, min, max etc)</td>\n      <td><code class=\"language-plaintext highlighter-rouge\">group_by(.key1, -.key2)</code></td>\n    </tr>\n    <tr>\n      <td>Join two Datasets</td>\n      <td>side by side on a specified field</td>\n      <td><code class=\"language-plaintext highlighter-rouge\">[JOIN(INDEX(input[]; .right); .[]; .left; add)]</code></td>\n    </tr>\n    <tr>\n      <td>Paste</td>\n      <td>Two files side by side</td>\n      <td><code class=\"language-plaintext highlighter-rouge\">-s '[.[][]]'</code></td>\n    </tr>\n    <tr>\n      <td>Remove Beginning</td>\n      <td>Good for removing header lines</td>\n      <td><code class=\"language-plaintext highlighter-rouge\">last</code>, <code class=\"language-plaintext highlighter-rouge\">index</code></td>\n    </tr>\n    <tr>\n      <td>Select First lines</td>\n      <td>Good for finding top 10s or saving header lines</td>\n      <td><code class=\"language-plaintext highlighter-rouge\">first</code>, <code class=\"language-plaintext highlighter-rouge\">index</code></td>\n    </tr>\n    <tr>\n      <td>Sort on a column</td>\n      <td>Change the order of the rows based on values in one or more columns</td>\n      <td><code class=\"language-plaintext highlighter-rouge\">sort</code>, <code class=\"language-plaintext highlighter-rouge\">sort_by(.key)</code></td>\n    </tr>\n    <tr>\n      <td>Split file</td>\n      <td>Based on values of a column</td>\n      <td>n/a (requires bash/awk/etc.)</td>\n    </tr>\n    <tr>\n      <td>Unique</td>\n      <td>Remove duplicate rows</td>\n      <td><code class=\"language-plaintext highlighter-rouge\">unique</code></td>\n    </tr>\n  </tbody>\n</table>\n\n<p>In this tutorial, these functions are explained in more detail, and we provide some exercises for you to practice.</p>\n\n<h1 id=\"background\">Background</h1>\n\n<p>In this tutorial, we will use as our dataset a table with results from the Olympics, from the games in Athens in 1896 until Tokyo in 2020. The objective is to familiarize you with a large number of the most important data manipulation tools in Galaxy. Much like the Olympics, there are many different disciplines (types of operations), and for each operation there are often multiple techniques (tools) available to athletes (data analysts, you) that are great for achieving the goal.</p>\n\n<p><a href=\"/training-material/topics/introduction/tutorials/data-manipulation-olympics/images/cover.jpg\" rel=\"noopener noreferrer\"><img src=\"/training-material/topics/introduction/tutorials/data-manipulation-olympics/images/cover.jpg\" alt=\"image of olympic rings, logo and two athletes around the words &quot;Data Analysis Olympics&quot;. \" width=\"320\" height=\"180\" loading=\"lazy\" /></a></p>\n\n<p>We will show you many of these commonly needed data manipulation operations, and some examples of how to perform them in Galaxy. We also provide many exercises so that you can train your skills and become a data manipulation Olympian!</p>\n\n<h1 id=\"download-data\">Download Data</h1>\n\n<p>Before we can do any manipulation, we will need some data. Let’s download our table with Olympics results now.</p>\n\n<p>We can use <code class=\"language-plaintext highlighter-rouge\">jq</code> just by itself to pretty print the results:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">cat </span>olympics.json | jq <span class=\"nt\">-S</span> <span class=\"nb\">.</span> | <span class=\"nb\">head</span> <span class=\"nt\">-n</span> 20\n</code></pre></div></div>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <ol>\n    <li>What is the format of the file?</li>\n    <li>How is it structured?</li>\n    <li>How many lines are in the file? (Hint: <code class=\"language-plaintext highlighter-rouge\">wc</code>)</li>\n    <li>How many columns?</li>\n  </ol>\n\n  <blockquote class=\"solution\">\n    <solution-title></solution-title>\n\n    <ol>\n      <li>It is a JSON file, or a Javascript Object Notation</li>\n      <li>It is structured as an array (we can tell by the leading <code class=\"language-plaintext highlighter-rouge\">[</code>) with objects representing an athlete’s participation in an event. If an athlete competes in multiple events, there is an entry for each event.</li>\n      <li><code class=\"language-plaintext highlighter-rouge\">1</code>. The entire JSON file is on a single line, which makes it rather unpleasant to access via normal text editors. However it contains 234,522 records (<code class=\"language-plaintext highlighter-rouge\">cat olympics.json | jq -c '.[]' | wc -l</code>)</li>\n      <li>There are 17 columns in this file. There are multiple ways to find this answer:\n        <ul>\n          <li>Count the fields manually</li>\n          <li>Advanced JQ: <code class=\"language-plaintext highlighter-rouge\">cat olympics.json| jq '.[0] | keys | length'</code></li>\n        </ul>\n      </li>\n    </ol>\n  </blockquote>\n</blockquote>\n\n<h2 id=\"about-this-dataset\">About this dataset</h2>\n\n<p>The data was <a href=\"https://github.com/UOSCS/Olympic_Athletes\">obtained</a> from <a href=\"https://www.olympedia.org/\">Olympedia</a>. The file <code class=\"language-plaintext highlighter-rouge\">olympics.json</code> contains\n234,522 rows and 17 columns. Each row corresponds to an individual athlete competing in an individual Olympic event. The columns are:</p>\n\n<ul>\n  <li><strong>athlete_id</strong> - Unique number for each athlete</li>\n  <li><strong>name</strong> - Athlete’s name</li>\n  <li><strong>sex</strong> - M or F</li>\n  <li><strong>birth_year</strong> - 4-digit number</li>\n  <li><strong>birth_day</strong> - e.g. 24 July</li>\n  <li><strong>birth_place</strong> - town and/or country</li>\n  <li><strong>height</strong> - In centimeters (or <code class=\"language-plaintext highlighter-rouge\">NA</code> if data not known)</li>\n  <li><strong>weight</strong> - In kilograms (or <code class=\"language-plaintext highlighter-rouge\">NA</code> if data not known)</li>\n  <li><strong>team</strong> - Team name</li>\n  <li><strong>noc</strong> - National Olympic Committee 3-letter code</li>\n  <li><strong>games</strong> - Year and season</li>\n  <li><strong>year</strong> - Integer</li>\n  <li><strong>season</strong> - Summer or Winter</li>\n  <li><strong>city</strong> - Host city</li>\n  <li><strong>sport</strong> - Sport</li>\n  <li><strong>event</strong> - Event</li>\n  <li><strong>medal</strong> - Gold, Silver, Bronze (or <code class=\"language-plaintext highlighter-rouge\">NA</code> if no medal was won)</li>\n</ul>\n\n<p>We will use this dataset to practice our data manipulation skills in Galaxy.</p>\n\n<h1 id=\"choose-your-adventure\">Choose your adventure!</h1>\n\n<p>This tutorial is structured a bit differently than most. <strong>You do not have to do the steps in the order they are presented below.</strong> Every section in this tutorial uses the dataset you just uploaded (the <code class=\"language-plaintext highlighter-rouge\">olympics.json</code> file) as input, so you can jump to any section in this tutorial right now if you have a particular data manipulation operation in mind you want to learn more about.</p>\n\n<h1 id=\"file-format-conversion\">File Format Conversion</h1>\n\n<p>The file we uploaded is a <code class=\"language-plaintext highlighter-rouge\">.json</code> file. This stands for <em>JavaScript Object Notation</em>. This means that this is a file containing arrays (<code class=\"language-plaintext highlighter-rouge\">[]</code>) and objects (<code class=\"language-plaintext highlighter-rouge\">{}</code>).</p>\n\n<p>First we need to understand a bit about file structure, and how JQ can convert back and forth between different structures:</p>\n\n<p>The <code class=\"language-plaintext highlighter-rouge\">.</code> operator is the identity operator, it gives you back exactly the same structure</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">echo</span> <span class=\"s1\">'[{\"a\": 1}, {\"a\": 2}]'</span> | jq <span class=\"s1\">'.'</span>\n</code></pre></div></div>\n\n<p>You can use <code class=\"language-plaintext highlighter-rouge\">.[]</code> to loop over the items in an array:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">echo</span> <span class=\"s1\">'[{\"a\": 1}, {\"a\": 2}]'</span> | jq <span class=\"s1\">'.[]'</span>\n</code></pre></div></div>\n\n<p>And supply a number to access an individual array item:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">echo</span> <span class=\"s1\">'[{\"a\": 1}, {\"a\": 2}]'</span> | jq <span class=\"s1\">'.[0]'</span>\n</code></pre></div></div>\n\n<p>And <code class=\"language-plaintext highlighter-rouge\">.&lt;key&gt;</code> to access a specific key</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">echo</span> <span class=\"s1\">'[{\"a\": 1}, {\"a\": 2}]'</span> | jq <span class=\"s1\">'.[].a'</span>\n</code></pre></div></div>\n\n<p>But that’s not all! Sometimes you may want the resulting output to be back in an array, rather than by line:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">echo</span> <span class=\"s1\">'[{\"a\": 1}, {\"a\": 2}]'</span> | jq <span class=\"s1\">'[.[].a]'</span>\n</code></pre></div></div>\n\n<p>By wrapping the entire expression in <code class=\"language-plaintext highlighter-rouge\">[]</code> we say we want the output of that statement in an array. We can actually do the same to get each entry as a new object:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">echo</span> <span class=\"s1\">'[{\"a\": 1}, {\"a\": 2}]'</span> | jq <span class=\"s1\">'{\"results\": .[].a}'</span>\n</code></pre></div></div>\n\n<p>Or an object with an array:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">echo</span> <span class=\"s1\">'[{\"a\": 1}, {\"a\": 2}]'</span> | jq <span class=\"s1\">'{\"results\": [.[].a]}'</span>\n</code></pre></div></div>\n\n<p>Or an array of objects:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">echo</span> <span class=\"s1\">'[{\"a\": 1}, {\"a\": 2}]'</span> | jq <span class=\"s1\">'[{\"results\": .[].a}]'</span>\n</code></pre></div></div>\n\n<p>We’ll need to use these reshaping abilities as we go, to get data in the right shape to be worked with. Sometimes you’ll want an array of objects, or objects with items in their keys.</p>\n\n<h2 id=\"pipes\">Pipes</h2>\n\n<p>Lastly, pipes are incredibly important in JQ, we’ll use them to combine multiple filters, or make our pipelines more readable:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">echo</span> <span class=\"s1\">'[{\"a\": 1}, {\"a\": 2}]'</span> | jq <span class=\"s1\">'.'</span>\n</code></pre></div></div>\n\n<p>Here we pipe the entire incoming object (JQ operates on streams of JSON objects, so, there can be multiple), to the identity operator again but this time with <code class=\"language-plaintext highlighter-rouge\">[]</code> to loop over every object in that item. (Really this is the same as <code class=\"language-plaintext highlighter-rouge\">.[]</code> but we use a pipe for demonstration.)</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">echo</span> <span class=\"s1\">'[{\"a\": 1}, {\"a\": 2}]'</span> | jq <span class=\"s1\">'. | .[]'</span>\n</code></pre></div></div>\n\n<p>We can then pass that stream of individual items (no longer a single JSON object) on to another filter, one extracting an <code class=\"language-plaintext highlighter-rouge\">.a</code>:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">echo</span> <span class=\"s1\">'[{\"a\": 1}, {\"a\": 2}]'</span> | jq <span class=\"s1\">'. | .[] | .a'</span>\n</code></pre></div></div>\n\n<h1 id=\"sorting\">Sorting</h1>\n\n<p>We have a lot of data in this file, but it is ordered by the athlete ID number, which is a somewhat arbitrary and meaningless number. But we can sort the rows in this file to something more convenient, for example alphabetically by name of the athlete, or chronologically by year of the Olympics.</p>\n\n<p>In <code class=\"language-plaintext highlighter-rouge\">jq</code> we can use the <code class=\"language-plaintext highlighter-rouge\">sort</code> or <code class=\"language-plaintext highlighter-rouge\">sort_by</code> function. From the documentation:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">echo</span> <span class=\"s1\">'[8,3,null,6]'</span> | jq <span class=\"s1\">'.sort'</span>\n</code></pre></div></div>\n\n<p><code class=\"language-plaintext highlighter-rouge\">sort_by</code> however lets us sort multiple entries in an array, by a child key:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">echo</span> <span class=\"s1\">'[{\"foo\":4, \"bar\":10}, {\"foo\":3, \"bar\":100}, {\"foo\":2, \"bar\":1}]'</span> | jq <span class=\"s1\">'.sort_by(.foo)'</span>\n<span class=\"nb\">echo</span> <span class=\"s1\">'[{\"foo\":4, \"bar\":10}, {\"foo\":3, \"bar\":100}, {\"foo\":2, \"bar\":1}]'</span> | jq <span class=\"s1\">'.sort_by(.bar)'</span>\n</code></pre></div></div>\n\n<p>So let’s sort our file in chronological order, based on the year of the Olympic games:</p>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <ol>\n    <li>Which key contains the year?</li>\n    <li>Do we want ascending or descending order if we want the oldest games at the top?</li>\n  </ol>\n\n  <blockquote class=\"solution\">\n    <solution-title></solution-title>\n\n    <ol>\n      <li><code class=\"language-plaintext highlighter-rouge\">.year</code></li>\n      <li>The file should be sorted in ascending (increasing) order</li>\n    </ol>\n\n  </blockquote>\n</blockquote>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">cat </span>olympics.json | jq <span class=\"nt\">-c</span> <span class=\"s1\">'sort_by(.year) | .[]'</span>\n</code></pre></div></div>\n\n<blockquote class=\"tip\">\n  <tip-title>What does `.[]` do?</tip-title>\n  <p>We use this to first take the identity operator, taking exactly the array that was passed to us, and then <code class=\"language-plaintext highlighter-rouge\">[]</code> lets us loop over the array, returning a stream of multiple individual objects. The <code class=\"language-plaintext highlighter-rouge\">-c</code> flag lets us see that more easily, with one object per line.</p>\n</blockquote>\n\n<p>If we wanted to do it in reverse, we could just use the <code class=\"language-plaintext highlighter-rouge\">reverse</code> function, or just use <code class=\"language-plaintext highlighter-rouge\">-</code> prefixed to our sort factor.</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">cat </span>olympics.json | jq <span class=\"nt\">-c</span> <span class=\"s1\">'sort_by(.year) | reverse | .[]'</span>\n<span class=\"nb\">cat </span>olympics.json | jq <span class=\"nt\">-c</span> <span class=\"s1\">'sort_by(-.year) | .[]'</span>\n</code></pre></div></div>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <ol>\n    <li>Write a JQ command to access only the first entry.</li>\n    <li>Which athlete is listed at the top of the file now?</li>\n  </ol>\n\n  <blockquote class=\"solution\">\n    <solution-title></solution-title>\n    <ol>\n      <li>We can simply access the 0th element:\n        <div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">cat </span>olympics.json | jq <span class=\"nt\">-c</span> <span class=\"s1\">'sort_by(.year) | .[0]'</span>\n</code></pre></div>        </div>\n      </li>\n      <li>J. Defert. Who competed in a Tennis event 1896 Summer Olympics in Athens.</li>\n    </ol>\n\n  </blockquote>\n</blockquote>\n\n<p><strong>Rename</strong> the resulting file to somthing meaningful (e.g. <code class=\"language-plaintext highlighter-rouge\">olympics-chronological.json</code>)</p>\n\n<p>This is great, but maybe it would make more sense to sort alphabetically by athlete name <em>within each year</em>.</p>\n\n<h2 id=\"sort-on-multiple-columns-at-once\">Sort on multiple columns at once</h2>\n\n<p>So we want to sort twice, first by year, an then within each year, we sort again alphabetically by name. The <code class=\"language-plaintext highlighter-rouge\">sort_by</code> function can do this too!</p>\n\n<p>We will sort the file in chronological order based on the year of the Olympic games</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">cat </span>olympics.json | jq <span class=\"nt\">-c</span> <span class=\"s1\">'sort_by(.year, .name) | .[]'</span>\n</code></pre></div></div>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <p>Which athlete is listed at the top now? Which discipline (sport) did they compete in?</p>\n\n  <blockquote class=\"solution\">\n    <solution-title></solution-title>\n\n    <ol>\n      <li>A. Grigoriadis. He competed in the 500 meters freestyle swimming event.</li>\n    </ol>\n\n  </blockquote>\n</blockquote>\n\n<h2 id=\"exercises\">Exercises</h2>\n\n<p>Ok, time to train! Let’s see if you can use the sort tool to answer the following questions:</p>\n\n<blockquote class=\"question\">\n  <div class=\"box-title question-title\" id=\"question-exercise-reverse-the-sort\"><i class=\"far fa-question-circle\" aria-hidden=\"true\"></i> Exercise: Reverse the sort</div>\n\n  <p>Which athlete comes <em>last by alphabet</em>, in the <em>most recent</em> Olympics?</p>\n\n  <blockquote class=\"solution\">\n    <solution-title></solution-title>\n\n    <p><code class=\"language-plaintext highlighter-rouge\">Žolt Peto</code> who competed in table tennis at the 2020 Summer Olympics in Tokyo.\n<br />\nWe do this by repeating the previous sort (on year and then name), but changing the order to <em>descending</em> for both, to get the answer to the top of the file.</p>\n\n  </blockquote>\n</blockquote>\n\n<blockquote class=\"question\">\n  <div class=\"box-title question-title\" id=\"question-exercise-sort-by-height\"><i class=\"far fa-question-circle\" aria-hidden=\"true\"></i> Exercise: sort by height</div>\n\n  <ol>\n    <li>What is the height of the tallest competing athlete? Which athlete(s) are of this height?</li>\n    <li>What is the shortest?</li>\n    <li>Who was the tallest athlete from the most recent Olympics? How tall were they?</li>\n  </ol>\n\n  <blockquote class=\"tip\">\n    <tip-title>Removing null values</tip-title>\n    <p>This will be covered more during the Filtering section, but for now simply use this filter:</p>\n    <div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">cat </span>olympics.json | jq <span class=\"s1\">'[.[] | select(.height != null)] | ...your sort_by here...'</span>\n</code></pre></div>    </div>\n  </blockquote>\n\n  <blockquote class=\"solution\">\n    <div class=\"box-title solution-title\" id=\"solution-hints\"><button class=\"gtn-boxify-button solution\" type=\"button\" aria-controls=\"solution-hints\" aria-expanded=\"true\"><i class=\"far fa-eye\" aria-hidden=\"true\"></i> <span>Hints</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>\n\n    <ol>\n      <li>We can use <code class=\"language-plaintext highlighter-rouge\">.height</code>, and because we want the tallest on top, we will need to sort in <em>descending</em> (decreasing) order. Unfortunately you might discover there are null values.</li>\n      <li>Rerun the same query as step 1, but change the order to <em>ascending</em></li>\n      <li>First sort by year (descending), then by height (descending)</li>\n    </ol>\n\n  </blockquote>\n\n  <blockquote class=\"solution\">\n    <div class=\"box-title solution-title\" id=\"solution-answers\"><button class=\"gtn-boxify-button solution\" type=\"button\" aria-controls=\"solution-answers\" aria-expanded=\"true\"><i class=\"far fa-eye\" aria-hidden=\"true\"></i> <span>Answers</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>\n\n    <ol>\n      <li>Adam Sandurski from Poland is the tallest athlete in the file, at 214 cm tall.</li>\n      <li>Lyton Mphande from Seol is the shortest at 127 cm.</li>\n      <li>Gennaro Di Mauro, 210 cm. (2020 Summer Olympics in Tokyo)</li>\n    </ol>\n\n  </blockquote>\n\n  <blockquote class=\"solution\">\n    <div class=\"box-title solution-title\" id=\"solution-full-solutions\"><button class=\"gtn-boxify-button solution\" type=\"button\" aria-controls=\"solution-full-solutions\" aria-expanded=\"true\"><i class=\"far fa-eye\" aria-hidden=\"true\"></i> <span>Full Solutions</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>\n    <ol>\n      <li><code class=\"language-plaintext highlighter-rouge\">jq -c '[.[] | select(.height != null)] | sort_by(-.height) | .[0]' &lt; olympics.json</code></li>\n      <li><code class=\"language-plaintext highlighter-rouge\">jq -c '[.[] | select(.height != null)] | sort_by(.height) | .[0]' &lt; olympics.json</code></li>\n      <li><code class=\"language-plaintext highlighter-rouge\">jq -c '[.[] | select(.height != null)] | sort_by(-.year, -.height) | .[0]' &lt; olympics.json</code></li>\n    </ol>\n  </blockquote>\n\n</blockquote>\n\n<h1 id=\"filtering\">Filtering</h1>\n\n<p>This file contains a lot of data, but we may only be interested in a subset of this data. For example, we may only want to look at one particular Olympics, or one particular sport. In such cases we can filter the dataset. This will create a new dataset, removing any rows that are not of interest to us (i.e. that don’t meet the criteria we provide).</p>\n\n<p>We will filter the file to show only winter Olympics\nLook at the <code class=\"language-plaintext highlighter-rouge\">olympics.json</code> file and answer the following questions</p>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <ol>\n    <li>Which key contains this information?</li>\n    <li>Which values can this column have? (make sure to notice capitalisation, ‘Winter’ is not the same as ‘winter’ to these tools)</li>\n  </ol>\n\n  <blockquote class=\"solution\">\n    <solution-title></solution-title>\n\n    <ol>\n      <li><code class=\"language-plaintext highlighter-rouge\">.season</code></li>\n      <li>The values can be <code class=\"language-plaintext highlighter-rouge\">Summer</code> or <code class=\"language-plaintext highlighter-rouge\">Winter</code> (<code class=\"language-plaintext highlighter-rouge\">jq -c '[.[].season] | sort | unique' &lt; olympics.json</code>)</li>\n    </ol>\n\n  </blockquote>\n</blockquote>\n\n<p>We’ll be using the <code class=\"language-plaintext highlighter-rouge\">select()</code> filter to select entries matching specific conditions:</p>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <ol>\n    <li>How would you write the expressions for the following conditions:\n      <ol>\n        <li><code class=\"language-plaintext highlighter-rouge\">enrolled</code> must be ‘Yes’</li>\n        <li><code class=\"language-plaintext highlighter-rouge\">age</code> must be smaller than 75</li>\n        <li><code class=\"language-plaintext highlighter-rouge\">height</code> cannot be null</li>\n        <li><code class=\"language-plaintext highlighter-rouge\">birthplace</code> cannot be empty</li>\n      </ol>\n    </li>\n    <li>It is also possible to combine multiple conditions, using <code class=\"language-plaintext highlighter-rouge\">and</code>, <code class=\"language-plaintext highlighter-rouge\">or</code>, <code class=\"language-plaintext highlighter-rouge\">not</code> and parentheses\nHow would you write expressions for the following filtering conditions:\n      <ol>\n        <li><code class=\"language-plaintext highlighter-rouge\">height</code> is larger than 200 or smaller than 160</li>\n        <li><code class=\"language-plaintext highlighter-rouge\">height</code> is larger than 200 and smaller than 210</li>\n      </ol>\n    </li>\n  </ol>\n\n  <blockquote class=\"solution\">\n    <solution-title></solution-title>\n\n    <ol>\n      <li>The answers are:\n        <ol>\n          <li><code class=\"language-plaintext highlighter-rouge\">select(.enrolled == \"Yes\")</code></li>\n          <li><code class=\"language-plaintext highlighter-rouge\">select(.age &lt; 75)</code></li>\n          <li><code class=\"language-plaintext highlighter-rouge\">select(.height != null)</code>`</li>\n          <li><code class=\"language-plaintext highlighter-rouge\">select(.birthplace != \"\")</code></li>\n        </ol>\n      </li>\n      <li>The answers are:\n        <ol>\n          <li><code class=\"language-plaintext highlighter-rouge\">select(.height &gt; 200 or .height &lt; 160)</code></li>\n          <li><code class=\"language-plaintext highlighter-rouge\">select(.height &gt; 200 and .height &lt; 210)</code></li>\n        </ol>\n      </li>\n    </ol>\n\n  </blockquote>\n</blockquote>\n\n<p>Ok, great, now that you’ve got the hang of writing expressions for this tool, let’s create a file with only Winter Olympics. Make sure it is contained in an array, in case we want to do further sorting.</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"nt\">-c</span> <span class=\"s1\">'[.[] | select(.season == \"Winter\")]'</span> &lt; olympics.json <span class=\"o\">&gt;</span> winter.json\n</code></pre></div></div>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <p>How many lines are in this file? (Hint: use the <code class=\"language-plaintext highlighter-rouge\">length</code> filter.)</p>\n\n  <blockquote class=\"solution\">\n    <solution-title></solution-title>\n\n    <p>44,680</p>\n\n  </blockquote>\n</blockquote>\n\n<p><strong>Repeat</strong> the step for the Summer Olympics</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"nt\">-c</span> <span class=\"s1\">'[.[] | select(.season == \"Summer\")]'</span> &lt; olympics.json <span class=\"o\">&gt;</span> summer.json\n</code></pre></div></div>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <ol>\n    <li>How many lines do you expect in the this file?</li>\n    <li>How many lines are in this file? Were you right?</li>\n  </ol>\n\n  <blockquote class=\"solution\">\n    <div class=\"box-title solution-title\" id=\"solution-hints-1\"><button class=\"gtn-boxify-button solution\" type=\"button\" aria-controls=\"solution-hints-1\" aria-expanded=\"true\"><i class=\"far fa-eye\" aria-hidden=\"true\"></i> <span>Hints</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>\n\n    <ol>\n      <li>Use the <code class=\"language-plaintext highlighter-rouge\">length</code> filter, assuming your data is in an array, per the original prompt.</li>\n      <li>Be careful to consider whether these counts include the header line of the file or not</li>\n    </ol>\n\n  </blockquote>\n\n  <blockquote class=\"solution\">\n    <div class=\"box-title solution-title\" id=\"solution-answers-1\"><button class=\"gtn-boxify-button solution\" type=\"button\" aria-controls=\"solution-answers-1\" aria-expanded=\"true\"><i class=\"far fa-eye\" aria-hidden=\"true\"></i> <span>Answers</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>\n\n    <ol>\n      <li>The original file has 234,522 lines, and the Winter Olympics had 44,680 lines. So we would expect 234,522 - 44,680 = 189,842 rows of data.\nIt is always useful to take a moment to think about the expected outcome, this makes it easier to spot mistakes and will save you time in the long run.</li>\n    </ol>\n\n  </blockquote>\n</blockquote>\n\n<h2 id=\"exercises-1\">Exercises</h2>\n\n<p>Ok, time to train! let’s see if you can use the <code class=\"language-plaintext highlighter-rouge\">select</code> filter to answer the following questions:</p>\n\n<blockquote class=\"question\">\n  <div class=\"box-title question-title\" id=\"question-exercise-medal-winners\"><i class=\"far fa-question-circle\" aria-hidden=\"true\"></i> Exercise: Medal winners</div>\n\n  <ol>\n    <li>How many gold medals were handed out?</li>\n    <li>How many total medals?</li>\n    <li>How many medals were handed out during the 2018 Olympics?</li>\n    <li>How many medals were won by individuals with a height between 170 and 180 cm? (inclusive)</li>\n    <li>How many gold medals were won by individuals shorter than 160cm or taller than 190?</li>\n  </ol>\n\n  <blockquote class=\"solution\">\n    <div class=\"box-title solution-title\" id=\"solution-hints-2\"><button class=\"gtn-boxify-button solution\" type=\"button\" aria-controls=\"solution-hints-2\" aria-expanded=\"true\"><i class=\"far fa-eye\" aria-hidden=\"true\"></i> <span>Hints</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>\n\n    <ul>\n      <li>Column 17 contains information about medals</li>\n      <li>The possible values are <code class=\"language-plaintext highlighter-rouge\">Gold</code>, <code class=\"language-plaintext highlighter-rouge\">Silver</code>, <code class=\"language-plaintext highlighter-rouge\">Bronze</code>, and `` (empty).</li>\n      <li>Don’t forget that the output (and line count) may include the header line</li>\n      <li>Do not use quotes on number columns (e.g. year)</li>\n      <li>You may need parentheses for complex conditions</li>\n      <li>You may want to <code class=\"language-plaintext highlighter-rouge\">[ ... query ...] | length</code> to get a nice length</li>\n    </ul>\n\n  </blockquote>\n\n  <blockquote class=\"solution\">\n    <div class=\"box-title solution-title\" id=\"solution-answers-2\"><button class=\"gtn-boxify-button solution\" type=\"button\" aria-controls=\"solution-answers-2\" aria-expanded=\"true\"><i class=\"far fa-eye\" aria-hidden=\"true\"></i> <span>Answers</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>\n\n    <ol>\n      <li>8,110   (Expression: <code class=\"language-plaintext highlighter-rouge\">select(.medal == \"Gold\")</code>)</li>\n      <li>24,633  (Expression: <code class=\"language-plaintext highlighter-rouge\">select(.medal == \"Gold\" or .medal == \"Silver\" or .medal == \"Bronze\")</code>, or <code class=\"language-plaintext highlighter-rouge\">select(.medal != null)</code>)</li>\n      <li>131     (Expression: <code class=\"language-plaintext highlighter-rouge\">select(.medal == \"Gold\" and .year == 2018)</code> (note: do not use quotes around <code class=\"language-plaintext highlighter-rouge\">2018</code>, as it is a numerical value))</li>\n      <li>8,086   (Expression: <code class=\"language-plaintext highlighter-rouge\">select(.medal != null and .height &gt;= 170 and .height &lt;=180)</code>)</li>\n      <li>2,333   (Expression: <code class=\"language-plaintext highlighter-rouge\">select(.medal != null and (.height &lt; 160 or .height &gt; 190))</code> (note: parentheses are important here))</li>\n    </ol>\n\n    <p>Note: these numbers are found by determining the number of lines in the file after each filtering step, and subtracting 1 for the header line.</p>\n\n  </blockquote>\n</blockquote>\n\n<h1 id=\"counting\">Counting</h1>\n\n<p>A common operation we might want to perform on tables of data, is simple counting. How many times does a certain value appear? For our dataset for instance, we might want to know how many countries participated in each Olympics, how many women, etc; any column that has categorical data that we can count.</p>\n\n<p>Let’s start by simply counting how many different Olympic Games we have in our dataset, and how many times it appears (so how many participations there were each year)</p>\n\n<p>We’ll need to use the <code class=\"language-plaintext highlighter-rouge\">group_by</code> filter which takes a key, and then emits arrays with objects with those matching keys:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">echo</span> <span class=\"s1\">'[{\"foo\":1, \"bar\":10}, {\"foo\":3, \"bar\":100}, {\"foo\":1, \"bar\":1}]'</span> | jq <span class=\"s1\">'group_by(.foo)\n</span></code></pre></div></div>\n\n<p>So let’s try that with ours:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'. | group_by(.year)'</span> &lt; olympics.json\n</code></pre></div></div>\n\n<p>We now have a structure like</p>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>[\n    [\n        {\"year\" 1896, ...},\n        {\"year\" 1896, ...},\n        {\"year\" 1896, ...}\n    ],\n    [\n        {\"year\" 1900, ...},\n        {\"year\" 1900, ...},\n        {\"year\" 1900, ...}\n    ],\n    ...\n]\n</code></pre></div></div>\n\n<p>We’ll re-structure to one “year group” per line:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'. | group_by(.year) | .[]'</span> &lt; olympics.json\n</code></pre></div></div>\n\n<p>So we can again use the <code class=\"language-plaintext highlighter-rouge\">length</code> function to determine how many items are in each via</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'. | group_by(.year) | .[] | [. | length]'</span> &lt; olympics.json\n</code></pre></div></div>\n\n<p>And all that’s left is to include the game name:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'. | group_by(.year) | .[] | [. | length, .[0].games]'</span> &lt; olympics.json\n</code></pre></div></div>\n\n<p>But the output format is not so nice, so let’s introduce the <code class=\"language-plaintext highlighter-rouge\">@tsv</code> filter to turn the resulting data into a table:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'. | group_by(.year) | .[] | [. | length, .[0].games] | @tsv'</span> &lt; olympics.json\n</code></pre></div></div>\n\n<p>Where did the “ and <code class=\"language-plaintext highlighter-rouge\">\\t</code> come from? We don’t want those! That is a result of the resulting data being in a JSON string, so we can tell jq to use <code class=\"language-plaintext highlighter-rouge\">raw</code> mode with <code class=\"language-plaintext highlighter-rouge\">-r</code></p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"nt\">-r</span> <span class=\"s1\">'. | group_by(.year) | .[] | [. | length, .[0].games] | @tsv'</span> &lt; olympics.json\n</code></pre></div></div>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <ol>\n    <li>How many different Olympic games are in our file?</li>\n    <li>Which Olympic games had the most participations? (Tip: set the parameter <em>“How should the results be sorted?”</em> to <code class=\"language-plaintext highlighter-rouge\">most common values first</code>)</li>\n  </ol>\n\n  <blockquote class=\"solution\">\n    <solution-title></solution-title>\n\n    <ol>\n      <li>\n        <p>52 games (<code class=\"language-plaintext highlighter-rouge\">[. | group_by(.games) | .[] | [. | length, .[0].games]] | length</code>)</p>\n\n        <p>The resulting file looks something like:</p>\n\n        <div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code> 615\t1896 Summer Olympics\n 2503\t1900 Summer Olympics\n 2643\t1904 Summer Olympics\n 3213\t1908 Summer Olympics\n 4610\t1912 Summer Olympics\n 3448\t1920 Summer Olympics\n 5242\t1924 Summer Olympics\n 358\t1924 Winter Olympics\n 4493\t1928 Summer Olympics\n ...\n</code></pre></div>        </div>\n      </li>\n      <li>\n        <p>1996 Summer Olympics. (10501 participations)</p>\n      </li>\n    </ol>\n\n  </blockquote>\n</blockquote>\n\n<p>You may have guessed that like <code class=\"language-plaintext highlighter-rouge\">sort_by</code>, that we could have selected multiple columns in the <code class=\"language-plaintext highlighter-rouge\">group_by</code> step. This lets us count on combinations of columns.</p>\n\n<p>Let’s try counting the number of men and women in each olympic games.</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'. | group_by(.games, .sex) | .[] | [. | length, .[0].games, .[0].sex] | @tsv'</span> <span class=\"nt\">-r</span> &lt; olympics.json\n</code></pre></div></div>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <p>You see the resulting file has a line for every combination of the two columns (games and sex), providing the count for each.</p>\n\n  <ol>\n    <li>\n      <p>How many women were in the first Olympic games?</p>\n    </li>\n    <li>\n      <p>Which Olympic games had the most women participants?</p>\n    </li>\n  </ol>\n\n  <blockquote class=\"solution\">\n    <solution-title></solution-title>\n\n    <ol>\n      <li>2 women participated in the 1896 Olympics. (note that we cannot be sure if this is two different women, or 1 woman participating twice).\nThe file looks something like this:\n        <div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>2\tF\t1896 Summer Olympics\n43\tF\t1900 Summer Olympics\n17\tF\t1904 Summer Olympics\n55\tF\t1908 Summer Olympics\n97\tF\t1912 Summer Olympics\n132\tF\t1920 Summer Olympics\n269\tF\t1924 Summer Olympics\n</code></pre></div>        </div>\n      </li>\n      <li>2020 Summer Olympics (4652)</li>\n    </ol>\n\n  </blockquote>\n</blockquote>\n\n<p>Let’s say we wanted to know how many different sports there were in each Olympics. If we used the counting tool above, we would get a results file for each combination of sport and olympics, with the number of lines (participations) of each. But we don’t really care about the number of lines that have this combination, just the total number of unique sports in each games.</p>\n\n<p>We can use the <code class=\"language-plaintext highlighter-rouge\">unique</code> filter in our pipeline to discover this. First let’s do our group by and iterate over each resulting group:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'. | group_by(.games) | .[]'</span> &lt; olympics.json\n</code></pre></div></div>\n\n<p>For fun this time let’s organise the output as an object. We know one value we want is the games:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'. | group_by(.games) | .[] | {\"games\": .[0].games}'</span> &lt; olympics.json\n</code></pre></div></div>\n\n<p>But the other we want is the list of sports. We can use our <code class=\"language-plaintext highlighter-rouge\">.[]</code> to loop over every sport item in that group</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'. | group_by(.games) | .[] | {\"games\": .[0].games, \"sports\": [.[].sport] }'</span> &lt; olympics.json\n</code></pre></div></div>\n\n<p>We’re almost there! We just need to unique this list and determine it’s length:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'. | group_by(.games) | .[] | {\"games\": .[0].games, \"sports\": [.[].sport] | unique | length }'</span> &lt; olympics.json\n</code></pre></div></div>\n\n<p>Or if you preferred as a table. But here it seems we can wrap it in <code class=\"language-plaintext highlighter-rouge\">()</code> to make the parsing clearer:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'. | group_by(.games) | .[] | [.[0].games, ([.[].sport] | unique | length)] | @tsv'</span> <span class=\"nt\">-r</span> &lt; olympics.json\n</code></pre></div></div>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <ol>\n    <li>How many sport were in the first Olympics? How many in the latest?</li>\n    <li>Which Olympics had the most different sports?</li>\n  </ol>\n\n  <blockquote class=\"solution\">\n    <solution-title></solution-title>\n\n    <ol>\n      <li>10 and 38.</li>\n      <li>The 2020 Summer Olympics had the most different sports (38)</li>\n    </ol>\n\n  </blockquote>\n</blockquote>\n\n<p>Save the output as something descriptive.</p>\n\n<h2 id=\"exercises-2\">Exercises</h2>\n\n<p>Ok, let’s practice!</p>\n\n<blockquote class=\"question\">\n  <div class=\"box-title question-title\" id=\"question-exercise-number-of-participations-per-country\"><i class=\"far fa-question-circle\" aria-hidden=\"true\"></i> Exercise: Number of participations per country</div>\n\n  <ol>\n    <li>Which country has had the most participations in the Olympics?</li>\n    <li>How many countries participated in the first Olympics? How many in the last?</li>\n  </ol>\n\n  <blockquote class=\"solution\">\n    <div class=\"box-title solution-title\" id=\"solution-hints-3\"><button class=\"gtn-boxify-button solution\" type=\"button\" aria-controls=\"solution-hints-3\" aria-expanded=\"true\"><i class=\"far fa-eye\" aria-hidden=\"true\"></i> <span>Hints</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>\n\n    <ol>\n      <li>Since we are counting instances of a key, we can use <code class=\"language-plaintext highlighter-rouge\">group_by(.team)</code> and then loop over that to print out the length, and the team name of each of those items.</li>\n      <li>This is basically the same question as “how many women” participated, try modifying that query.</li>\n    </ol>\n\n  </blockquote>\n\n  <blockquote class=\"solution\">\n    <div class=\"box-title solution-title\" id=\"solution-answers-3\"><button class=\"gtn-boxify-button solution\" type=\"button\" aria-controls=\"solution-answers-3\" aria-expanded=\"true\"><i class=\"far fa-eye\" aria-hidden=\"true\"></i> <span>Answers</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>\n\n    <ol>\n      <li>The United States with 17,286 participations (<code class=\"language-plaintext highlighter-rouge\">cat olympics.json | jq '. | group_by(.team) | .[] |  [. | length, .[0].team] | @tsv' -r</code>)</li>\n      <li>15 and 250. (<code class=\"language-plaintext highlighter-rouge\">cat olympics.json | jq '. | group_by(.games) | .[] | [.[0].games, ([.[].team] | unique | length)] | @tsv' -r</code>)</li>\n    </ol>\n\n  </blockquote>\n</blockquote>\n\n<h1 id=\"computing\">Computing</h1>\n\n<p>Sometimes we want to use the data in our column to compute a new value, and add that to the table. For instance, for our dataset we could caluclate athtletes BMI (using height and weight columns), or their age at time of participation (from year of birth and year of the Olymics). By adding these computed values as a new colum to our datset, we can more easily query the dataset for these values. We can do these types of operations using the <code class=\"language-plaintext highlighter-rouge\">+=</code> operation on a given object.</p>\n\n<p>As an example, let’s calculate the age of each athlete at the time of participation, and add this as a new column to our dataset.</p>\n\n<p>First let’s structure our query to loop over every object in the array:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'.[]'</span> &lt; olympics.json\n</code></pre></div></div>\n\n<p>Then let’s try adding a static value to it:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'.[] | . += {\"marco\": \"polo\"}'</span> &lt; olympics.json\n</code></pre></div></div>\n\n<p>Do you see the resulting key in the new file? Ok, let’s replace it with a computed value:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'.[] | . += {\"age\": .year - .birth_year}'</span> &lt; olympics.json\n</code></pre></div></div>\n\n<p>This errors, but JQ is a bit sensitive to syntax, so we can add some <code class=\"language-plaintext highlighter-rouge\">()</code> to make things more explicit</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'.[] | . += {\"age\": (.year - .birth_year)}'</span> &lt; olympics.json\n</code></pre></div></div>\n\n<p>Ah and then we discover null values!</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'.[] | select(.birth_year != null) | . += {\"age\": (.year - .birth_year)}'</span> &lt; olympics.json\n</code></pre></div></div>\n\n<p>And there we go! But this is structured as a stream of objects, maybe we want it again as an array <code class=\"language-plaintext highlighter-rouge\">[]</code> to ensure it remains in the same shape as our input dataset.</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'[.[] | select(.birth_year != null) | . += {\"age\": (.year - .birth_year)}]'</span> &lt; olympics.json <span class=\"o\">&gt;</span> olympics-with-age.json\n</code></pre></div></div>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <ol>\n    <li>How old was Arnaud Boetsch during his Olympic tennis participation?</li>\n  </ol>\n\n  <blockquote class=\"solution\">\n    <solution-title></solution-title>\n\n    <ol>\n      <li>Arnaud Boetsch is listed on the first two lines, who turned 27 the year of their Olympics.</li>\n    </ol>\n\n  </blockquote>\n</blockquote>\n\n<p>This was a simple computation, but much more complex mathematical expressions can be computed with this tool. See the help section at the bottom of the tool for a list of all supported operations. In the exercise below, we will compute the BMI for each athlete as an example.</p>\n\n<h2 id=\"exercises-3\">Exercises</h2>\n\n<p>BMI stands for Body Mass Index, is a metric to provide a very crude measure of how healthy your weight is. The formula to compute BMI is:</p>\n\n\\[BMI = weight / (height^2)\\]\n\n<p>(with weight in kilograms and height in meters).</p>\n\n<blockquote class=\"tip\">\n  <tip-title>BMI is problematic</tip-title>\n  <p><a href=\"https://en.wikipedia.org/wiki/Adolphe_Quetelet\">Adolphe Quetelet</a>, who invented <a href=\"https://en.wikipedia.org/wiki/Body_mass_index\">BMI</a>, was not a doctor of medicine, instead he was a Belgian astronomer, mathematician, statistician, and sociologist. His data consisted probably entirely of cisgender, white, european men and women <span class=\"citation\"><a href=\"#Eknoyan_2007\">Eknoyan 2007</a></span>.\nIn his defense, he did argue it should not be used at individual levels, however it came to be used as such due to simplicity. (See <a href=\"https://en.wikipedia.org/wiki/Body_mass_index#History\">Wikipedia’s History section</a>). BMI is a poor measure of health, especially for populations with high muscle content, and cannot be simply re-used as-is with anyone other than Anglo Saxons <span class=\"citation\"><a href=\"#Caleyachetty_2021\">Caleyachetty <i>et al.</i> 2021</a></span>, <a href=\"https://en.wikipedia.org/wiki/Body_mass_index#Limitations\">Wikipedia:Limitations</a>.</p>\n\n  <p>However as it is an easy to calculate metric, we include the calculation here.</p>\n</blockquote>\n\n<p>Let’s compute this data for all athletes and add it as a new column!</p>\n\n<blockquote class=\"question\">\n  <div class=\"box-title question-title\" id=\"question-exercise-calculating-bmi\"><i class=\"far fa-question-circle\" aria-hidden=\"true\"></i> Exercise: Calculating BMI</div>\n\n  <ol>\n    <li>How would you express this calculation in jq?\n      <ul>\n        <li>Remember that our height is in cm, and the formula expects height in meters</li>\n        <li>And that we have null values we must filter out</li>\n      </ul>\n    </li>\n    <li>What is the BMI for Arnaud Boetsch?</li>\n  </ol>\n\n  <blockquote class=\"solution\">\n    <div class=\"box-title solution-title\" id=\"solution-hints-4\"><button class=\"gtn-boxify-button solution\" type=\"button\" aria-controls=\"solution-hints-4\" aria-expanded=\"true\"><i class=\"far fa-eye\" aria-hidden=\"true\"></i> <span>Hints</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>\n\n    <ul>\n      <li>division is <code class=\"language-plaintext highlighter-rouge\">/</code> and multiplication is ` * ` .</li>\n      <li>Generally we cannot use <code class=\"language-plaintext highlighter-rouge\">^</code></li>\n      <li>Parentheses may be required.</li>\n      <li>use <code class=\"language-plaintext highlighter-rouge\">select(.value != null)</code> to remove nulls.</li>\n      <li>If that isn’t eough, you can check that the type is a number with <code class=\"language-plaintext highlighter-rouge\">(.value|type) == \"number\"</code> to ensure it really is a number and not e.g. a string.</li>\n      <li>remember to wrap everything in <code class=\"language-plaintext highlighter-rouge\">[...]</code> to retain the data shape</li>\n    </ul>\n\n  </blockquote>\n\n  <blockquote class=\"solution\">\n    <div class=\"box-title solution-title\" id=\"solution-answers-4\"><button class=\"gtn-boxify-button solution\" type=\"button\" aria-controls=\"solution-answers-4\" aria-expanded=\"true\"><i class=\"far fa-eye\" aria-hidden=\"true\"></i> <span>Answers</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>\n    <ol>\n      <li>other variations are possible:\n        <div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'[.[] | select((.height|type) == \"number\" and (.weight|type) == \"number\") | . + {\"bmi\": (.weight / (.height/100 * .height/100))}]'</span> &lt; olympics.json <span class=\"o\">&gt;</span> olympics-bmi.json\n</code></pre></div>        </div>\n      </li>\n      <li>22.69\n        <div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'.[] | select(.name==\"Arnaud Boetsch\") | .bmi'</span> &lt; olympics-bmi.json\n</code></pre></div>        </div>\n      </li>\n    </ol>\n  </blockquote>\n</blockquote>\n\n<h1 id=\"find-and-replace\">Find and Replace</h1>\n\n<p>Often you may need to change the contents of a file a bit to fit the expectations of an analysis tool. For instance, our file uses <code class=\"language-plaintext highlighter-rouge\">NA</code> for missing values, but other conventions included leaving the cell empty, or using <code class=\"language-plaintext highlighter-rouge\">NaN</code> (not a number) instead. Or, when working with chromosomal data, you may need to add or remove the <code class=\"language-plaintext highlighter-rouge\">chr</code> prefix from a column before using it as input to a certain tool. In such situations, we can find all occurrences of a certain pattern in our file, and replace it with another value.</p>\n\n<p>If we want to perform such a replacement on a single column in our data, we can use the <code class=\"language-plaintext highlighter-rouge\">gsub</code> function.</p>\n\n<p>A few of the basics of regular expression, plus some links to further resources are given in the box below:</p>\n\n<!--SNIPPET-->\n<blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-regular-expressions-101\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-regular-expressions-101\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Regular Expressions 101</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <p>Regular expressions are a standardized way of describing patterns in textual data. They can be extremely useful for tasks such as finding and replacing data. They can be a bit tricky to master, but learning even just a few of the basics can help you get the most out of Galaxy.</p>   <p><strong>Finding</strong></p>   <p>Below are just a few examples of basic expressions:</p>   <table>   <thead>     <tr>       <th>Regular expression</th>       <th>Matches</th>     </tr>   </thead>   <tbody>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">abc</code></td>       <td>an occurrence of <code class=\"language-plaintext highlighter-rouge\">abc</code> within your data</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">(abc|def)</code></td>       <td><code class=\"language-plaintext highlighter-rouge\">abc</code> <em>or</em> <code class=\"language-plaintext highlighter-rouge\">def</code></td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">[abc]</code></td>       <td>a single character which is either <code class=\"language-plaintext highlighter-rouge\">a</code>, <code class=\"language-plaintext highlighter-rouge\">b</code>, or <code class=\"language-plaintext highlighter-rouge\">c</code></td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">[^abc]</code></td>       <td>a character that is NOT <code class=\"language-plaintext highlighter-rouge\">a</code>, <code class=\"language-plaintext highlighter-rouge\">b</code>, nor <code class=\"language-plaintext highlighter-rouge\">c</code></td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">[a-z]</code></td>       <td>any lowercase letter</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">[a-zA-Z]</code></td>       <td>any letter (upper or lower case)</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">[0-9]</code></td>       <td>numbers 0-9</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">\\d</code></td>       <td>any digit (same as <code class=\"language-plaintext highlighter-rouge\">[0-9]</code>)</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">\\D</code></td>       <td>any non-digit character</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">\\w</code></td>       <td>any alphanumeric character</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">\\W</code></td>       <td>any non-alphanumeric character</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">\\s</code></td>       <td>any whitespace</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">\\S</code></td>       <td>any non-whitespace character</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">.</code></td>       <td><em>any</em> character</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">\\.</code></td>       <td> </td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">{x,y}</code></td>       <td>between <em>x</em> and <em>y</em> repetitions</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">^</code></td>       <td>the beginning of the line</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">$</code></td>       <td>the end of the line</td>     </tr>   </tbody> </table>   <p><strong>Note:</strong> you see that characters such as <code class=\"language-plaintext highlighter-rouge\">*</code>, <code class=\"language-plaintext highlighter-rouge\">?</code>, <code class=\"language-plaintext highlighter-rouge\">.</code>, <code class=\"language-plaintext highlighter-rouge\">+</code> etc have a special meaning in a regular expression. If you want to match on those characters, you can escape them with a backslash. So <code class=\"language-plaintext highlighter-rouge\">\\?</code> matches the question mark character exactly.</p>   <p><strong>Examples</strong></p>   <table>   <thead>     <tr>       <th>Regular expression</th>       <th>matches</th>     </tr>   </thead>   <tbody>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">\\d{4}</code></td>       <td>4 digits (e.g. a year)</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">chr\\d{1,2}</code></td>       <td><code class=\"language-plaintext highlighter-rouge\">chr</code> followed by 1 or 2 digits</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">.*abc$</code></td>       <td>anything with <code class=\"language-plaintext highlighter-rouge\">abc</code> at the end of the line</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">^$</code></td>       <td>empty line</td>     </tr>   </tbody> </table>   <p><strong>Replacing</strong></p>   <p>Sometimes you need to capture the exact value you matched on, in order to use it in your replacement, we do this using capture groups <code class=\"language-plaintext highlighter-rouge\">(...)</code>, which we can refer to using <code class=\"language-plaintext highlighter-rouge\">\\1</code>, <code class=\"language-plaintext highlighter-rouge\">\\2</code> etc for the first and second captured values.</p>   <table>   <thead>     <tr>       <th>Regular expression</th>       <th>Input</th>       <th>Captures</th>     </tr>   </thead>   <tbody>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">chr(\\d{1,2})</code></td>       <td><code class=\"language-plaintext highlighter-rouge\">chr14</code></td>       <td><code class=\"language-plaintext highlighter-rouge\">\\1 = 14</code></td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">(\\d{2}) July (\\d{4})</code></td>       <td>24 July 1984</td>       <td><code class=\"language-plaintext highlighter-rouge\">\\1 = 24</code>, <code class=\"language-plaintext highlighter-rouge\">\\2 = 1984</code></td>     </tr>   </tbody> </table>   <p>An expression like <code class=\"language-plaintext highlighter-rouge\">s/find/replacement/g</code> indicates a replacement expression, this will search (<code class=\"language-plaintext highlighter-rouge\">s</code>) for any occurrence of <code class=\"language-plaintext highlighter-rouge\">find</code>, and replace it with <code class=\"language-plaintext highlighter-rouge\">replacement</code>. It will do this globally (<code class=\"language-plaintext highlighter-rouge\">g</code>) which means it doesn’t stop after the first match.</p>   <p>Example: <code class=\"language-plaintext highlighter-rouge\">s/chr(\\d{1,2})/CHR\\1/g</code> will replace <code class=\"language-plaintext highlighter-rouge\">chr14</code> with <code class=\"language-plaintext highlighter-rouge\">CHR14</code> etc.</p>   <p>Note: In Galaxy, you are often asked to provide the find and replacement expressions separately, so you don’t have to use the <code class=\"language-plaintext highlighter-rouge\">s/../../g</code> structure.</p>   <p>There is a lot more you can do with regular expressions, and there are a few different flavours in different tools/programming languages, but these are the most important basics that will already allow you to do many of the tasks you might need in your analysis.</p>   <p><strong>Tip:</strong> <a href=\"https://regexone.com/\">RegexOne</a> is a nice interactive tutorial to learn the basics of regular expressions.</p>   <p><strong>Tip:</strong> <a href=\"https://regex101.com/\">Regex101.com</a> is a great resource for interactively testing and constructing your regular expressions, it even provides an explanation of a regular expression if you provide one.</p>   <p><strong>Tip:</strong> <a href=\"https://extendsclass.com/regex-tester.html\">Cyrilex</a> is a visual regular expression tester.</p> </blockquote>\n<p><!--END_SNIPPET--></p>\n\n<p>Let’s start with a simple example:\nOur file uses a mix of <code class=\"language-plaintext highlighter-rouge\">Athina</code> and <code class=\"language-plaintext highlighter-rouge\">Athens</code> to indicate the Capital City of Greece in the <code class=\"language-plaintext highlighter-rouge\">city</code> column.\nLet’s standardize this by replacing occurrences of <code class=\"language-plaintext highlighter-rouge\">Athina</code> with <code class=\"language-plaintext highlighter-rouge\">Athens</code>.</p>\n\n<p>Let’s start by filtering out the old spelling:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'.[] | select(.city == \"Athina\")'</span> &lt; olympics.json\n</code></pre></div></div>\n\n<p>We can access just the .city and try out our gsub next:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'.[] | select(.city == \"Athina\") | .city | gsub(\"Athina\"; \"Athens\")'</span> &lt; olympics.json\n</code></pre></div></div>\n\n<p>Looks good! Let’s use the technique we learned in <a href=\"#computing\">Computing</a> to update the key with a new key.</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'.[] | select(.city == \"Athina\") | . += {\"city\": (.city | gsub(\"Athina\"; \"Athens\"))}'</span> &lt; olympics.json\n</code></pre></div></div>\n\n<p>Also looks good, ok, that’s it!</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'[.[] | . += {\"city\": (.city | gsub(\"Athina\"; \"Athens\"))}]'</span> &lt; olympics.json\n</code></pre></div></div>\n\n<p>Look at the file before and after. Athlete 7 (Patrick Chila) near the top of the <code class=\"language-plaintext highlighter-rouge\">olympics.tsv</code> file, had a value of Athina in the city column. Verify that it has been changed to Athens.</p>\n\n<p>This was rather simple example, so let’s try a few more examples with slightly more complex expressions.</p>\n\n<h2 id=\"exercises-4\">Exercises</h2>\n\n<p>You may have noticed that our file has a lot of missing data. Especially for the earlier years, things like height, weight and birthday of athletes was not registered, or simply not known. In some columns you see these missing values have been replaced with an <code class=\"language-plaintext highlighter-rouge\">NA</code> (not available) value. In other columns (for example birth place), the cells have simply been left empty.</p>\n\n<p>Different tools may expect different ways of handling missing data. So you may have to change your missing data from empty to <code class=\"language-plaintext highlighter-rouge\">NA</code>, <code class=\"language-plaintext highlighter-rouge\">NaN</code>, or something else, between analysis steps</p>\n\n<blockquote class=\"hands_on\">\n  <hands-on-title>Fill empty cells</hands-on-title>\n\n  <p>We will now replace empty cells in the <code class=\"language-plaintext highlighter-rouge\">birth_place</code> column, to use <code class=\"language-plaintext highlighter-rouge\">null</code> instead.\nRead the <a href=\"https://stedolan.github.io/jq/manual/#RegularexpressionsPCRE\">documentation for PCRE and gsub</a></p>\n\n  <blockquote class=\"question\">\n    <question-title></question-title>\n\n    <ol>\n      <li>Should we use gsub?</li>\n      <li>What is the expression for a line with just whitespace?</li>\n    </ol>\n\n    <blockquote class=\"solution\">\n      <div class=\"box-title solution-title\" id=\"solution-answer\"><button class=\"gtn-boxify-button solution\" type=\"button\" aria-controls=\"solution-answer\" aria-expanded=\"true\"><i class=\"far fa-eye\" aria-hidden=\"true\"></i> <span>Answer</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>\n\n      <ol>\n        <li>Yes, definitely</li>\n        <li><code class=\"language-plaintext highlighter-rouge\">^ *$</code> indicates an empty line, potentially with spaces. (<code class=\"language-plaintext highlighter-rouge\">^</code> indicated the beginning, zero or more spaces, and <code class=\"language-plaintext highlighter-rouge\">$</code> the end). The value in the column is treated as the line, since we are looking only in 1 column.</li>\n      </ol>\n\n    </blockquote>\n\n    <blockquote class=\"solution\">\n      <div class=\"box-title solution-title\" id=\"solution-hints-5\"><button class=\"gtn-boxify-button solution\" type=\"button\" aria-controls=\"solution-hints-5\" aria-expanded=\"true\"><i class=\"far fa-eye\" aria-hidden=\"true\"></i> <span>Hints</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>\n      <p>Note that you cannot use <code class=\"language-plaintext highlighter-rouge\">gsub</code> to replace something with null. Instead you’ll need to use <code class=\"language-plaintext highlighter-rouge\">(if ... then \"value\" else \"other\" end)</code>.\nYou might want to use the gsub instead to ensure lines with single blank characters, and empty lines, all map to the same null result.</p>\n    </blockquote>\n\n    <blockquote class=\"solution\">\n      <div class=\"box-title solution-title\" id=\"solution-full-solution\"><button class=\"gtn-boxify-button solution\" type=\"button\" aria-controls=\"solution-full-solution\" aria-expanded=\"true\"><i class=\"far fa-eye\" aria-hidden=\"true\"></i> <span>Full Solution</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>\n      <p>other variations are possible:</p>\n      <div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">cat </span>olympics.json | jq <span class=\"s1\">'.[] | (if (.birth_place|gsub(\"^ *$\"; \"\")) == \"\" then null else .birth_place end)'</span>\n</code></pre></div>      </div>\n    </blockquote>\n  </blockquote>\n\n</blockquote>\n\n<p>Let’s do another example, this one using capture groups.</p>\n\n<p>Look at the <code class=\"language-plaintext highlighter-rouge\">birth_day</code> column. It has values in a format like <code class=\"language-plaintext highlighter-rouge\">12 December</code>. Suppose we have a tool that expects this data to be in the reverse format, <code class=\"language-plaintext highlighter-rouge\">December 12</code>. The file is too big to change this manually in every column. But with regular expression tools we can make this replacement easily</p>\n\n<p>We will now change the format in birthday column from <code class=\"language-plaintext highlighter-rouge\">day month</code> to <code class=\"language-plaintext highlighter-rouge\">month day</code>, as our boss is American and requested the silly format.</p>\n\n<p>Read the <a href=\"https://stedolan.github.io/jq/manual/#RegularexpressionsPCRE\">documentation for PCRE and gsub</a></p>\n<ul>\n  <li>Read the text, what settings do you think we need to use?</li>\n  <li>\n    <p>Read the Regular expressions 101 FAQ below</p>\n\n    <!--SNIPPET-->\n    <blockquote class=\"tip\">   <div class=\"box-title tip-title\" id=\"tip-regular-expressions-101-1\"><button class=\"gtn-boxify-button tip\" type=\"button\" aria-controls=\"tip-regular-expressions-101-1\" aria-expanded=\"true\"><i class=\"far fa-lightbulb\" aria-hidden=\"true\"></i> <span>Tip: Regular Expressions 101</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>   <p>Regular expressions are a standardized way of describing patterns in textual data. They can be extremely useful for tasks such as finding and replacing data. They can be a bit tricky to master, but learning even just a few of the basics can help you get the most out of Galaxy.</p>   <p><strong>Finding</strong></p>   <p>Below are just a few examples of basic expressions:</p>   <table>   <thead>     <tr>       <th>Regular expression</th>       <th>Matches</th>     </tr>   </thead>   <tbody>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">abc</code></td>       <td>an occurrence of <code class=\"language-plaintext highlighter-rouge\">abc</code> within your data</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">(abc|def)</code></td>       <td><code class=\"language-plaintext highlighter-rouge\">abc</code> <em>or</em> <code class=\"language-plaintext highlighter-rouge\">def</code></td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">[abc]</code></td>       <td>a single character which is either <code class=\"language-plaintext highlighter-rouge\">a</code>, <code class=\"language-plaintext highlighter-rouge\">b</code>, or <code class=\"language-plaintext highlighter-rouge\">c</code></td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">[^abc]</code></td>       <td>a character that is NOT <code class=\"language-plaintext highlighter-rouge\">a</code>, <code class=\"language-plaintext highlighter-rouge\">b</code>, nor <code class=\"language-plaintext highlighter-rouge\">c</code></td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">[a-z]</code></td>       <td>any lowercase letter</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">[a-zA-Z]</code></td>       <td>any letter (upper or lower case)</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">[0-9]</code></td>       <td>numbers 0-9</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">\\d</code></td>       <td>any digit (same as <code class=\"language-plaintext highlighter-rouge\">[0-9]</code>)</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">\\D</code></td>       <td>any non-digit character</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">\\w</code></td>       <td>any alphanumeric character</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">\\W</code></td>       <td>any non-alphanumeric character</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">\\s</code></td>       <td>any whitespace</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">\\S</code></td>       <td>any non-whitespace character</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">.</code></td>       <td><em>any</em> character</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">\\.</code></td>       <td> </td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">{x,y}</code></td>       <td>between <em>x</em> and <em>y</em> repetitions</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">^</code></td>       <td>the beginning of the line</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">$</code></td>       <td>the end of the line</td>     </tr>   </tbody> </table>   <p><strong>Note:</strong> you see that characters such as <code class=\"language-plaintext highlighter-rouge\">*</code>, <code class=\"language-plaintext highlighter-rouge\">?</code>, <code class=\"language-plaintext highlighter-rouge\">.</code>, <code class=\"language-plaintext highlighter-rouge\">+</code> etc have a special meaning in a regular expression. If you want to match on those characters, you can escape them with a backslash. So <code class=\"language-plaintext highlighter-rouge\">\\?</code> matches the question mark character exactly.</p>   <p><strong>Examples</strong></p>   <table>   <thead>     <tr>       <th>Regular expression</th>       <th>matches</th>     </tr>   </thead>   <tbody>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">\\d{4}</code></td>       <td>4 digits (e.g. a year)</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">chr\\d{1,2}</code></td>       <td><code class=\"language-plaintext highlighter-rouge\">chr</code> followed by 1 or 2 digits</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">.*abc$</code></td>       <td>anything with <code class=\"language-plaintext highlighter-rouge\">abc</code> at the end of the line</td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">^$</code></td>       <td>empty line</td>     </tr>   </tbody> </table>   <p><strong>Replacing</strong></p>   <p>Sometimes you need to capture the exact value you matched on, in order to use it in your replacement, we do this using capture groups <code class=\"language-plaintext highlighter-rouge\">(...)</code>, which we can refer to using <code class=\"language-plaintext highlighter-rouge\">\\1</code>, <code class=\"language-plaintext highlighter-rouge\">\\2</code> etc for the first and second captured values.</p>   <table>   <thead>     <tr>       <th>Regular expression</th>       <th>Input</th>       <th>Captures</th>     </tr>   </thead>   <tbody>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">chr(\\d{1,2})</code></td>       <td><code class=\"language-plaintext highlighter-rouge\">chr14</code></td>       <td><code class=\"language-plaintext highlighter-rouge\">\\1 = 14</code></td>     </tr>     <tr>       <td><code class=\"language-plaintext highlighter-rouge\">(\\d{2}) July (\\d{4})</code></td>       <td>24 July 1984</td>       <td><code class=\"language-plaintext highlighter-rouge\">\\1 = 24</code>, <code class=\"language-plaintext highlighter-rouge\">\\2 = 1984</code></td>     </tr>   </tbody> </table>   <p>An expression like <code class=\"language-plaintext highlighter-rouge\">s/find/replacement/g</code> indicates a replacement expression, this will search (<code class=\"language-plaintext highlighter-rouge\">s</code>) for any occurrence of <code class=\"language-plaintext highlighter-rouge\">find</code>, and replace it with <code class=\"language-plaintext highlighter-rouge\">replacement</code>. It will do this globally (<code class=\"language-plaintext highlighter-rouge\">g</code>) which means it doesn’t stop after the first match.</p>   <p>Example: <code class=\"language-plaintext highlighter-rouge\">s/chr(\\d{1,2})/CHR\\1/g</code> will replace <code class=\"language-plaintext highlighter-rouge\">chr14</code> with <code class=\"language-plaintext highlighter-rouge\">CHR14</code> etc.</p>   <p>Note: In Galaxy, you are often asked to provide the find and replacement expressions separately, so you don’t have to use the <code class=\"language-plaintext highlighter-rouge\">s/../../g</code> structure.</p>   <p>There is a lot more you can do with regular expressions, and there are a few different flavours in different tools/programming languages, but these are the most important basics that will already allow you to do many of the tasks you might need in your analysis.</p>   <p><strong>Tip:</strong> <a href=\"https://regexone.com/\">RegexOne</a> is a nice interactive tutorial to learn the basics of regular expressions.</p>   <p><strong>Tip:</strong> <a href=\"https://regex101.com/\">Regex101.com</a> is a great resource for interactively testing and constructing your regular expressions, it even provides an explanation of a regular expression if you provide one.</p>   <p><strong>Tip:</strong> <a href=\"https://extendsclass.com/regex-tester.html\">Cyrilex</a> is a visual regular expression tester.</p> </blockquote>\n    <p><!--END_SNIPPET--></p>\n  </li>\n</ul>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <ol>\n    <li>How do we match on the birthday format? How strict/exact shoule we be here?</li>\n    <li>How do we captures both the day and the month?</li>\n    <li>How do we refer to the values we captured (for the replacement value)</li>\n  </ol>\n\n  <blockquote class=\"solution\">\n    <div class=\"box-title solution-title\" id=\"solution-hints-6\"><button class=\"gtn-boxify-button solution\" type=\"button\" aria-controls=\"solution-hints-6\" aria-expanded=\"true\"><i class=\"far fa-eye\" aria-hidden=\"true\"></i> <span>Hints</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>\n\n    <ol>\n      <li>Birthday is one or more digits, followed by a space, followed by one or more letters.</li>\n      <li>Remember that you can capture values using parentheses <code class=\"language-plaintext highlighter-rouge\">(..)</code></li>\n      <li>We can name our capturing groups for easier referencing, by providing a name. <code class=\"language-plaintext highlighter-rouge\">(?&lt;day&gt;...)</code> can be later referred to as <code class=\"language-plaintext highlighter-rouge\">\\(.day)</code>.</li>\n    </ol>\n\n  </blockquote>\n\n  <blockquote class=\"solution\">\n    <div class=\"box-title solution-title\" id=\"solution-answers-5\"><button class=\"gtn-boxify-button solution\" type=\"button\" aria-controls=\"solution-answers-5\" aria-expanded=\"true\"><i class=\"far fa-eye\" aria-hidden=\"true\"></i> <span>Answers</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>\n\n    <ol>\n      <li>There are multiple solutions here, depending on how strict you want to be\n        <ul>\n          <li><code class=\"language-plaintext highlighter-rouge\">\\d+ ([a-zA-Z]+)</code> (not strict, would also match on <code class=\"language-plaintext highlighter-rouge\">142 Septober</code></li>\n          <li><code class=\"language-plaintext highlighter-rouge\">[0-9]{1,2} (January|February|March|April|May|June|July|August|September|October|November|December)</code> (this is much more strict, only matches on 1 or 2 digits, followed by a space, followed by one of the months. But this would still match on 42 April, and may miss it if one month names didn’t start with a capital letter)</li>\n          <li><code class=\"language-plaintext highlighter-rouge\">[123]?[0-9] [a-zA-Z]+</code> this will only allow dates below 40</li>\n        </ul>\n\n        <p>There are different ways to express this, and there is no one perfect solution. If you know your data is clean, and you do not have to worry about values like 42 Septober,\nthen you can be less strict. If your data is less clean, you may be more worried about capturing things that aren’t valid birthdays and might want to be a bit stricter.\nIt all depends on your data and use case.</p>\n      </li>\n      <li><code class=\"language-plaintext highlighter-rouge\">(?&lt;day&gt;[\\d]{1,2}) (?&lt;mon&gt;[a-zA-Z]+)</code> captures both the day and the month</li>\n      <li>We can use <code class=\"language-plaintext highlighter-rouge\">\\(.day)</code> to refer to the day we captured, and <code class=\"language-plaintext highlighter-rouge\">\\(.mon)</code> for the month in our replacement.</li>\n    </ol>\n\n    <p>If you’d like to be fancier than just using <code class=\"language-plaintext highlighter-rouge\">gsub</code>, you can also try the other capturing functions. E.g. <code class=\"language-plaintext highlighter-rouge\">capture</code> returns an object with the named matches, which you can add back directly in to the original object:</p>\n\n    <div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'.[] | . += (.birth_day | capture(\"(?&lt;birth_day&gt;[0-9]+) (?&lt;birth_month&gt;[A-Z][a-z]+)\\\\s*\"))'</span> &lt; olympics.json\n</code></pre></div>    </div>\n\n  </blockquote>\n</blockquote>\n\n<h1 id=\"removing-columns\">Removing Columns</h1>\n\n<p>We can remove columns from a table using either <code class=\"language-plaintext highlighter-rouge\">del(.key)</code> if we just want to remove a few values, or otherwise by selecting, if we just want to keep a few values.</p>\n\n<p>Suppose we want to simplify our file a bit. All we want is file with 4 columns: athlete name, sport, olympic games, and medals.</p>\n\n<p>We can most easily do this by returning an array:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'.[] | [.name, .sport, .games, .medal]'</span> &lt; olympics.json\n</code></pre></div></div>\n\n<p>But perhaps we want something a bit more structured:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'.[] | {\"name\": .name, \"sport\": .sport, \"games\": .games, \"medal\": .medal}'</span> &lt; olympics.json\n</code></pre></div></div>\n\n<p>And of course we’ll keep our list shape:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'[.[] | {\"name\": .name, \"sport\": .sport, \"games\": .games, \"medal\": .medal}]'</span> &lt; olympics.json <span class=\"o\">&gt;</span> subset.json\n</code></pre></div></div>\n\n<p>Notice that during this step, we also changed the order of the keys. This tool can also be used to re-arrange keys, if you supply all key names but in a different order.</p>\n\n<h2 id=\"exercises-5\">Exercises</h2>\n\n<blockquote class=\"question\">\n  <div class=\"box-title question-title\" id=\"question-exercise-removing-columns\"><i class=\"far fa-question-circle\" aria-hidden=\"true\"></i> Exercise: Removing Columns</div>\n\n  <ol>\n    <li>Create a file that is similar to <code class=\"language-plaintext highlighter-rouge\">olympics.json</code>, but without the first column (athlete_id column)</li>\n    <li>Which of the two methods would be easier to use and when? (this can be a personal preference, but think about whether you would subtract or add)</li>\n  </ol>\n\n  <blockquote class=\"solution\">\n    <div class=\"box-title solution-title\" id=\"solution-hints-7\"><button class=\"gtn-boxify-button solution\" type=\"button\" aria-controls=\"solution-hints-7\" aria-expanded=\"true\"><i class=\"far fa-eye\" aria-hidden=\"true\"></i> <span>Hints</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>\n\n    <ol>\n      <li>Try the <code class=\"language-plaintext highlighter-rouge\">del(.key)</code> function</li>\n    </ol>\n\n  </blockquote>\n\n  <blockquote class=\"solution\">\n    <div class=\"box-title solution-title\" id=\"solution-full-solutions-1\"><button class=\"gtn-boxify-button solution\" type=\"button\" aria-controls=\"solution-full-solutions-1\" aria-expanded=\"true\"><i class=\"far fa-eye\" aria-hidden=\"true\"></i> <span>Full Solutions</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>\n    <ol>\n      <li><code class=\"language-plaintext highlighter-rouge\">jq '[.[] | del(.athlete_id)]' &lt; olympics.json</code></li>\n      <li>The <code class=\"language-plaintext highlighter-rouge\">del()</code> function is significantly easier if you are just removing keys, but may be cumbersome if you have a lot of key and only want a few. In that case it may be faster to type those out instead.</li>\n    </ol>\n  </blockquote>\n</blockquote>\n\n<h1 id=\"unique\">Unique</h1>\n\n<p>Sometimes, in the course of our data manipulations, we may end up with a file that has duplicate values. In order to filter these out, we can use the <code class=\"language-plaintext highlighter-rouge\">unique</code> filter.</p>\n\n<p>Let’s say we would like to create a list of all unique athletes (id and name).</p>\n\n<p>First we will cut just the <code class=\"language-plaintext highlighter-rouge\">athlete_id</code> and <code class=\"language-plaintext highlighter-rouge\">name</code> columns from our dataset</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'.[] | {\"name\": .name, \"athlete_id\": .athlete_id}'</span> &lt; olympics.json\n</code></pre></div></div>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <ol>\n    <li>Do you see duplication? Why is that?</li>\n  </ol>\n\n  <blockquote class=\"solution\">\n    <solution-title></solution-title>\n\n    <ol>\n      <li>Yes. For all athletes who participated more than once, the row will be identical.</li>\n    </ol>\n\n  </blockquote>\n</blockquote>\n\n<p>Now let’s remove those duplicates. For this filter to work, it needs to be passed an array, not individual values in a stream:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'[.[] | {\"name\": .name, \"athlete_id\": .athlete_id}] | unique'</span> &lt; olympics.json\n</code></pre></div></div>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <p>How many unique athletes do we have?</p>\n\n  <blockquote class=\"solution\">\n    <solution-title></solution-title>\n    <p>94,733</p>\n\n    <div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'[.[] | {\"name\": .name, \"athlete_id\": .athlete_id}] | unique | length'</span> &lt; olympics.json\n</code></pre></div>    </div>\n\n  </blockquote>\n</blockquote>\n\n<h1 id=\"joining-files\">Joining Files</h1>\n\n<p>This file contains a lot of information, but we may want to add more information. For example if we had a file with information about each country (population, capital city, etc), we could join that information with our Olympics data, to get a single file with all information in every row.</p>\n\n<p>For example, if we would like to be able to group by continent, to e.g. count athletes, medals etc per continent, we will have to add a <code class=\"language-plaintext highlighter-rouge\">continent</code> column to our file. To do this we would need a second file that maps each country to the corresponding continent. This is what we will do in the next hands-on section.</p>\n\n<p>We obtained country information data from <a href=\"https://datahub.io/core/country-codes\">DataHub</a>. More information about this file can be found in the description there. It has 56 columns with a wide variety of data about each country (from country codes, to capital city, languages spoken, etc)</p>\n\n<p>Download</p>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>https://zenodo.org/record/6803028/files/country-information.json\n</code></pre></div></div>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <ol>\n    <li>How many keys does this file have?</li>\n    <li>Which keys(s) in this file are the same as in the <code class=\"language-plaintext highlighter-rouge\">olympics.tsv</code> file?</li>\n  </ol>\n\n  <blockquote class=\"solution\">\n    <solution-title></solution-title>\n\n    <ol>\n      <li>The country information file has 56 columns (see <a href=\"https://datahub.io/core/country-codes\">DataHub</a> for more details).</li>\n      <li>Both files have a <code class=\"language-plaintext highlighter-rouge\">NOC</code> column with the 3-letter country code (<code class=\"language-plaintext highlighter-rouge\">NOC</code> stands for National Olympic Committee). However, one is lowercase.</li>\n    </ol>\n  </blockquote>\n</blockquote>\n\n<p>We would now like to take our Olympics dataset as the basis, and add columns to every row of this file with some information about the country. In order to join, we will need to have one column that is shared between the two files, on which we can match. The <code class=\"language-plaintext highlighter-rouge\">NOC</code> column is perfect for this because it is a defined standard. Both files also contain a column with the country name in it, which is also a possible candidate to use for joining, but because it is less standardised, it is safer to use the NOC column. For example, if one file uses “Netherlands”, while the other uses “The Netherlands” to indicate the same country, the joining will fail for these rows. So always make sure the columns you join on are compatible!</p>\n\n<p>We can use the join and index commands, per <a href=\"https://stedolan.github.io/jq/manual/#SQL-StyleOperators\">SQL Style Operators</a> documentation and <a href=\"https://stackoverflow.com/a/72609410\">this stack overflow answer</a></p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'[JOIN(INDEX(input[]; .NOC); .[]; .noc; add)]'</span> olympics.json country-information.json\n</code></pre></div></div>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <ol>\n    <li>What do you expect the output to look like? Were you right?</li>\n    <li>How many columns are in the resulting file? What about the NOC column?</li>\n    <li>What is a possible downside to this approach?</li>\n  </ol>\n\n  <blockquote class=\"solution\">\n    <solution-title></solution-title>\n\n    <ol>\n      <li>All the columns from the country information file are added to the end of each row of our olympics dataset</li>\n      <li>Our olympics datset had 17 columns, the country information file has 56 columns. Therefore we have 17+56=73 columns columns in our resulting file. This also means the NOC column\nwe joined on appears twice in our output.</li>\n      <li>There is a lot of data duplication in this file now. The exact same country information is added to every line of every athlete from a certain country.\nThis means much larger file size.\nIf you do not need all these columns, it could save you a lot of space to remove unneeded columns from the <code class=\"language-plaintext highlighter-rouge\">country-information.json</code> file, before joining.</li>\n    </ol>\n\n  </blockquote>\n</blockquote>\n\n<h1 id=\"concatenating\">Concatenating</h1>\n\n<p>Concatenation of two files simple means putting the contents of the two files together, one after the other. Our dataset was created in 2021, but since then we’ve had another Olympic event, the 2022 Winter Olympics in Beijing. If we have the same data for this latest Olympics, we could simply add the rows from the 2022 games to our current file with data, in order to create a single file with all data from 1896 to 2022.</p>\n\n<p>First, let’s get this data for the 2022 Olympics</p>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>wget https://zenodo.org/record/6803028/files/olympics_2022.json\n</code></pre></div></div>\n\n<p>View the new dataset, does it have the same structure as our original <code class=\"language-plaintext highlighter-rouge\">olympics.json</code> file?</p>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <ol>\n    <li>Does the new file have the same structure?</li>\n    <li>Can we simply add the lines of the new files to the end of our existing olympics dataset?</li>\n  </ol>\n\n  <blockquote class=\"solution\">\n    <solution-title></solution-title>\n\n    <ol>\n      <li>Yes, this file has all the same columns, in the same order, so concatenation should be relatively straightforward.</li>\n      <li>If we simply put the contents of this file after our existing dataset, we will have a second header line in the middle of our data rows. It is best to remove the header line from the second dataset after we have verified it is compatible. This way we will only add the real data rows to our dataset.</li>\n    </ol>\n\n  </blockquote>\n</blockquote>\n\n<p>Since this new dataset has the exact same structure (number and order of columns), we can simple add the lines from this file to the end of our existing <code class=\"language-plaintext highlighter-rouge\">olympics.json</code> file.\nFor this, we’ll need to use a new argument to <code class=\"language-plaintext highlighter-rouge\">jq</code>, namely <code class=\"language-plaintext highlighter-rouge\">-s</code> or <code class=\"language-plaintext highlighter-rouge\">--slurp</code> which allows us to access all files as if they were one big indexed array.</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">cat </span>olympics.json olympics_2022.json | jq <span class=\"nt\">-s</span> <span class=\"s1\">'.[0] + .[1]'</span> <span class=\"o\">&gt;</span> olympics-combined.json\n</code></pre></div></div>\n\n<p>Alternatively we could loop over every array in the parent, and combine them. This would support more than two files:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">cat </span>olympics.json olympics_2022.json | jq <span class=\"nt\">-s</span> <span class=\"s1\">'[.[][]]'</span> <span class=\"o\">&gt;</span> olympics-combined.json\n</code></pre></div></div>\n\n<p>Now this only works so simply because our two datasets had the same structure; two arrays. If your data comes from different sources, you may have to do some additional data manipulation before you can concatenate, e.g. to make sure the columns match, or how each file deals with missing data (empty cells, <code class=\"language-plaintext highlighter-rouge\">NA</code>, <code class=\"language-plaintext highlighter-rouge\">NaN</code> or something else).</p>\n\n<h1 id=\"splitting-files\">Splitting Files</h1>\n\n<p>This dataset contains a lot of data, we might want to split the data into one file per Olympic games, or have one file for all the winter games, and another file for all the summer games. In these situtations, where we want to create new, smaller files, based on the values in a column, we can use the tool.</p>\n\n<blockquote class=\"tip\">\n  <tip-title>Not generically possible with only JQ</tip-title>\n  <p>It is not generically possible to e.g. split a file by value, with only jq. We need to use other tools, e.g. for loops, in addition to accomplish this.</p>\n</blockquote>\n\n<p>We would like to create a separate file for each Olympic event. First let’s get a list of every event.</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'[.[] | .games] | unique[]'</span> <span class=\"nt\">-r</span> &lt; olympics.json\n</code></pre></div></div>\n\n<p>Easily done. Now we’ll construct a loop over these results</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'[.[] | .games] | unique[]'</span> <span class=\"nt\">-r</span> &lt; olympics.json | <span class=\"k\">while </span><span class=\"nb\">read</span> <span class=\"nt\">-r</span> game<span class=\"p\">;</span> <span class=\"k\">do\n    </span><span class=\"nb\">echo</span> <span class=\"s2\">\"Game: </span><span class=\"nv\">$game</span><span class=\"s2\">\"</span><span class=\"p\">;</span>\n<span class=\"k\">done</span>\n</code></pre></div></div>\n\n<p>Here we can then use this to create a new file per the game identifier:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>jq <span class=\"s1\">'[.[] | .games] | unique[]'</span> <span class=\"nt\">-r</span> &lt; olympics.json | <span class=\"k\">while </span><span class=\"nb\">read</span> <span class=\"nt\">-r</span> game<span class=\"p\">;</span> <span class=\"k\">do\n    </span><span class=\"nb\">echo</span> <span class=\"s2\">\"Selecting: </span><span class=\"nv\">$game</span><span class=\"s2\">\"</span><span class=\"p\">;</span>\n    jq <span class=\"s1\">'[.[] | select(.games == \"'</span><span class=\"nv\">$game</span><span class=\"s1\">'\")]'</span> &lt; olympics.json <span class=\"o\">&gt;</span> olympics-<span class=\"s2\">\"</span><span class=\"nv\">$game</span><span class=\"s2\">\"</span>.json\n<span class=\"k\">done</span>\n</code></pre></div></div>\n\n<blockquote class=\"question\">\n  <question-title></question-title>\n\n  <ol>\n    <li>How many different files do we get?</li>\n    <li>How many lines are in the file for the 1908 Summer Olympics?</li>\n  </ol>\n\n  <blockquote class=\"solution\">\n    <solution-title></solution-title>\n\n    <ol>\n      <li>We get 1 collection with 52 files in it, one per Olympic games:</li>\n      <li>61049 lines, 3213 entries.</li>\n    </ol>\n  </blockquote>\n</blockquote>\n\n<h2 id=\"exercises-6\">Exercises</h2>\n\n<p>Let’s practice this a bit more, see if you can use the split file to answer the following questions:</p>\n\n<blockquote class=\"question\">\n  <div class=\"box-title question-title\" id=\"question-exercise-sort-by-height-1\"><i class=\"far fa-question-circle\" aria-hidden=\"true\"></i> Exercise: sort by height</div>\n\n  <ol>\n    <li>Create two files, one for Summer Olympics, one for Winter Olympics. Which has more lines?</li>\n    <li>Split the file by sport, how many sports have there been at the Olympics?</li>\n    <li>Split the file by medal, would you expect the output files to be equal sizes?</li>\n  </ol>\n\n  <blockquote class=\"solution\">\n    <div class=\"box-title solution-title\" id=\"solution-answers-6\"><button class=\"gtn-boxify-button solution\" type=\"button\" aria-controls=\"solution-answers-6\" aria-expanded=\"true\"><i class=\"far fa-eye\" aria-hidden=\"true\"></i> <span>Answers</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>\n\n    <ol>\n      <li>The summer olympics file has more lines than the winter olympics file (the first winter Olympics wasn’t held until 1924)</li>\n      <li>Each file in the resulting collection represents a sport, there are 91 datasets, representing 91 different sports in the history of the Olympics.</li>\n      <li>The files for gold silver and bronze are roughly equal, but not exactly (think of situations like shared second place, then 2 silver medals are handed out and no bronze medal)</li>\n    </ol>\n  </blockquote>\n\n</blockquote>\n\n<h1 id=\"conclusion\">Conclusion</h1>\n\n<p>These tools and operations covered in the tutorial are just a few examples of some of the most common operations. There are many more tools available in Galaxy that perform other data manipulations. We encourage you to look around the <code class=\"language-plaintext highlighter-rouge\">General Text Tools</code> section in the Galaxy toolbox (left panel) to find and explore more data manipulation tools. The more comfortable you are performing these kinds of steps, the more you can get out of Galaxy!</p>\n\n<h1 id=\"exercises-putting-it-all-together\">Exercises: Putting it all together!</h1>\n\n<p>This section provides a number of exercises that require you to combine two or more of the techniques you learned in this tutorial. This is a great way to practice your data manipulation skills. Full solutions are provided for every exercise (i.e. all tools and settings), but for many of these exercises there will be multiple solutions, so if you obtained the same results in a different way, that is correct too!</p>\n\n<blockquote class=\"question\">\n  <div class=\"box-title question-title\" id=\"question-exercise-1-finding-shortest-lightest-athlete\"><i class=\"far fa-question-circle\" aria-hidden=\"true\"></i> Exercise 1: Finding shortest/lightest athlete</div>\n\n  <p>If you have done exercises in the <a href=\"#sorting\">sorting</a> section, you noticed that finding the shortest athlete ever to compete was not easy,\nbecause all the rows with missing height data (<code class=\"language-plaintext highlighter-rouge\">NA</code>) in the column were sorted to the top. We need to filter out these values first, then\nperform our sort, so that our answer is on top.</p>\n\n  <ol>\n    <li>Find the shortest athlete ever to compete in the Olympics</li>\n    <li>Find the shortest athlete of the Winter Olympics</li>\n    <li>Find the lightest athlete of the <em>most recent</em> Summer Olympics</li>\n  </ol>\n\n  <blockquote class=\"solution\">\n    <div class=\"box-title solution-title\" id=\"solution-hints-8\"><button class=\"gtn-boxify-button solution\" type=\"button\" aria-controls=\"solution-hints-8\" aria-expanded=\"true\"><i class=\"far fa-eye\" aria-hidden=\"true\"></i> <span>Hints</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>\n\n    <ol>\n      <li>You will need to filter out the columns with (<code class=\"language-plaintext highlighter-rouge\">NA</code>) in the height column first</li>\n      <li>You will need to filter by season as well</li>\n      <li>You will need to filter out missing data in the weight column, filter out Summer Olympics, then sort (by 2 columns)</li>\n      <li>Does the order in which you perform these steps matter?</li>\n    </ol>\n\n  </blockquote>\n\n  <blockquote class=\"solution\">\n    <div class=\"box-title solution-title\" id=\"solution-answers-7\"><button class=\"gtn-boxify-button solution\" type=\"button\" aria-controls=\"solution-answers-7\" aria-expanded=\"true\"><i class=\"far fa-eye\" aria-hidden=\"true\"></i> <span>Answers</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>\n\n    <ol>\n      <li>Lyton Mphande and  Rosario Briones were both 127 cm tall, competing in boxing and gymnastics respectively</li>\n      <li>Carolyn Krau was a 137 cm tall figure skater.</li>\n      <li>Flávia Saraiva was the lightest athlete (31kg), she was a Artistic Gymnast from Brazil.</li>\n    </ol>\n\n  </blockquote>\n\n  <blockquote class=\"solution\">\n    <div class=\"box-title solution-title\" id=\"solution-full-solution-1\"><button class=\"gtn-boxify-button solution\" type=\"button\" aria-controls=\"solution-full-solution-1\" aria-expanded=\"true\"><i class=\"far fa-eye\" aria-hidden=\"true\"></i> <span>Full solution</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>\n\n    <ol>\n      <li>\n        <p>First we filter out the NA values from the height column:</p>\n\n        <div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">cat </span>olympics.json | jq <span class=\"s1\">'[.[] | select(.height != null)]'</span>\n</code></pre></div>        </div>\n\n        <p>Then we can sort by height, in ascending order to get the shortest athletes on top:</p>\n\n        <div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">cat </span>olympics.json | jq <span class=\"s1\">'[.[] | select(.height != null)] | sort_by(.height) | .[0]'</span>\n</code></pre></div>        </div>\n      </li>\n      <li>\n        <p>We can take the output from the first exercise, and filter for only Winter Olympics:</p>\n\n        <div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">cat </span>olympics.json | jq <span class=\"s1\">'[.[] | select(.height != null and .season == \"Winter\")] | sort_by(.height) | .[0]'</span>\n</code></pre></div>        </div>\n      </li>\n      <li>\n        <p>First we filter out the NA values from the weight column:</p>\n\n        <div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">cat </span>olympics.json | jq <span class=\"s1\">'[.[] | select(.weight != null and .games == \"2020 Summer Olympics\")] | sort_by(.weight) | .[0]'</span>\n</code></pre></div>        </div>\n      </li>\n      <li>\n        <p>In this case, changing the order of these operations will still have led to the same answer. However, sorting takes more time than filtering,\nso it is usually faster to filter first, then do the sorting on a smaller file. Especially noticeable if you have large dataset.</p>\n      </li>\n    </ol>\n\n  </blockquote>\n\n</blockquote>\n\n<p>Ok, let’s try another exercise! You might have noticed that some of the values in the weight column were classes, e.g. <code class=\"language-plaintext highlighter-rouge\">63-78</code> (kg).\nIn this exercise, we will first clean up this weight column to avoid ranges (by taking the lower number in the range for every\nrow a weight range is used), and then answering the question a couple of questions around the weight of athletes.</p>\n\n<blockquote class=\"question\">\n  <div class=\"box-title question-title\" id=\"question-exercise-2-data-cleaning-and-computations-of-the-weight-column\"><i class=\"far fa-question-circle\" aria-hidden=\"true\"></i> Exercise 2: Data cleaning and computations of the weight column</div>\n\n  <ol>\n    <li>Get a list of all the values that occur in the weight value, take note of all the values that are not a single number or <code class=\"language-plaintext highlighter-rouge\">NA</code>; anything else should be cleaned up</li>\n    <li>Clean up the weight value so that we only have single numbers; weight classes (e.g. <code class=\"language-plaintext highlighter-rouge\">63-78</code>) should be replace by the lower bound (<code class=\"language-plaintext highlighter-rouge\">63</code>) of that class</li>\n    <li>How heavy was the lightest woman competing in the Biathlon? And the heaviest?</li>\n  </ol>\n\n  <blockquote class=\"solution\">\n    <div class=\"box-title solution-title\" id=\"solution-hints-9\"><button class=\"gtn-boxify-button solution\" type=\"button\" aria-controls=\"solution-hints-9\" aria-expanded=\"true\"><i class=\"far fa-eye\" aria-hidden=\"true\"></i> <span>Hints</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>\n\n    <ol>\n      <li>\n        <table>\n          <tbody>\n            <tr>\n              <td>You can use `</td>\n              <td>sort</td>\n              <td>uniq -c` (the unix tools) to simplify some of the counting.</td>\n            </tr>\n          </tbody>\n        </table>\n      </li>\n      <li>You can use the <code class=\"language-plaintext highlighter-rouge\">gsub</code> filter to clean up the weight.\nThis tool is a bit complex, if you haven’t done so yet, we strongly recommend you work through the <a href=\"#find-and-replace\">Find and Replace section</a> first.\nTo check if your cleaning worked, re-run the counting from step 1.</li>\n    </ol>\n\n  </blockquote>\n\n  <blockquote class=\"solution\">\n    <div class=\"box-title solution-title\" id=\"solution-answers-8\"><button class=\"gtn-boxify-button solution\" type=\"button\" aria-controls=\"solution-answers-8\" aria-expanded=\"true\"><i class=\"far fa-eye\" aria-hidden=\"true\"></i> <span>Answers</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>\n\n    <ol>\n      <li>\n        <p>We see values such as <code class=\"language-plaintext highlighter-rouge\">100-105</code>, but also <code class=\"language-plaintext highlighter-rouge\">77,5</code>, <code class=\"language-plaintext highlighter-rouge\">100, 104</code> (notice the space!) and even <code class=\"language-plaintext highlighter-rouge\">76, 77, 79</code> to indicate weight ranges or other unexpected weight values.\nAll these variations must be converted to single numbers. For this example we will simply convert these ranges to their lower number, and remove the rest when we\nclean the column (taking the upper or median value would be equally valid,  but for our solution we will remove everything after the first number.</p>\n      </li>\n      <li>\n        <p>There are many possible regular expression that will clean this column. You can use a single check to catch all the exceptions, or use multiple, there is no one right answer.\nCheck if your cleaning is successful using the select/sort -u/uniq -c pipeline again. Make sure you only have single number values in the weight column before\nproceeding to question 3 in this exercise. Also make sure the weights you have make sense (e.g. if you end up with columns having a weight of <code class=\"language-plaintext highlighter-rouge\">0</code>, something went wrong somewhere!)</p>\n      </li>\n      <li>\n        <p>lightest woman weighed 45 kilograms, the heaviest 82.</p>\n      </li>\n    </ol>\n\n  </blockquote>\n\n  <blockquote class=\"solution\">\n    <div class=\"box-title solution-title\" id=\"solution-full-solutions-2\"><button class=\"gtn-boxify-button solution\" type=\"button\" aria-controls=\"solution-full-solutions-2\" aria-expanded=\"true\"><i class=\"far fa-eye\" aria-hidden=\"true\"></i> <span>Full Solutions</span><span class=\"fold-unfold fa fa-minus-square\"></span></button></div>\n\n    <ol>\n      <li>\n        <p><code class=\"language-plaintext highlighter-rouge\">cat olympics.json | jq '.[] | select(.weight != null) | .weight' | sort | uniq -c</code></p>\n\n        <p>This should output a file like:</p>\n\n        <div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>2 \"100, 104\"\n2 \"100, 107\"\n2 \"100-105\"\n1 \"100-106\"\n...\n</code></pre></div>        </div>\n\n        <p>We will want to change weight ranges to single numbers in the next step</p>\n      </li>\n      <li>\n        <p>We can use the <code class=\"language-plaintext highlighter-rouge\">tonumber</code> filter here to convert the output of <code class=\"language-plaintext highlighter-rouge\">gsub</code> into a proper number.</p>\n\n        <div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">cat </span>olympics.json | jq <span class=\"s1\">'[.[] | select(.weight != null) | . + {\"weight_fixed\": (if (.weight|type) == \"string\" then (.weight |gsub(\"[-,].*\"; \"\") | tonumber) else .weight end)}]'</span>\n</code></pre></div>        </div>\n\n        <p><strong>NOTE:</strong> there will be a lot of valid answers here, you could do it all in one check like the solution above, or in multiple checks (e.g. one for each different kind of way to\ndenote a weight range you found in step 1). As long as a re-run of the counting step shows only single numbers in the\ncolumn after your find &amp; replace step, then your answer was correct! Also make sure the weights make sense (e.g. if your resulting column has weights of <code class=\"language-plaintext highlighter-rouge\">0</code> or other small numbers, this\ndoesn’t make sense and you will have to tweak your expression. Don’t feel bad if this takes a bit of trial and error, that is expected!</p>\n      </li>\n      <li>\n        <p>Doing this in two steps is a bit easier to read/cleaner:</p>\n\n        <div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">cat </span>olympics.json | jq <span class=\"s1\">'[.[] | select(.weight != null) | . + {\"weight_fixed\": (if (.weight|type) == \"string\" then (.weight |gsub(\"[-,].*\"; \"\") | tonumber) else .weight end)}]'</span> <span class=\"o\">&gt;</span> olympics-fixed-weights.json\n<span class=\"nb\">cat </span>olympics-fixed-weights.json | jq <span class=\"s1\">'. | group_by(.sport, .sex) | .[] | {\"sport\": .[0].sport, \"sex\": .[0].sex, \"weight_min\": ([.[] | .weight_fixed] | min), \"weight_max\": ([.[] | .weight_fixed] | max)}'</span> <span class=\"nt\">-c</span>\n</code></pre></div>        </div>\n\n        <p>Your resulting file should look something like:</p>\n\n        <div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>{\"sport\":\"Alpine Skiing\",\"sex\":\"F\",\"weight_min\":45,\"weight_max\":90}\n{\"sport\":\"Alpine Skiing\",\"sex\":\"M\",\"weight_min\":50,\"weight_max\":138}\n{\"sport\":\"Archery\",\"sex\":\"F\",\"weight_min\":42,\"weight_max\":95}\n{\"sport\":\"Archery\",\"sex\":\"M\",\"weight_min\":46,\"weight_max\":130}\n{\"sport\":\"Art Competitions\",\"sex\":\"M\",\"weight_min\":59,\"weight_max\":93}\n</code></pre></div>        </div>\n      </li>\n    </ol>\n\n  </blockquote>\n</blockquote>\n\n<p>Congratulations! You have now mastered the basics of data manipulation! There are a lot more data manipulation operations available in Galaxy that you may need.\nPlease explore the tools for yourself, and check back with this tutorial often, we plan to add more sections and exercises over time!</p>\n"],"ref_slides":[],"hands_on":true,"slides":false,"mod_date":"2024-05-03 12:23:06 +0000","pub_date":"2023-06-16 10:00:11 +0000","version":13,"api":"https://training.galaxyproject.org/training-material/api/topics/data-science/tutorials/data-manipulation-olympics-jq/tutorial.json","tools":[],"supported_servers":{"exact":[],"inexact":[{"name":"UseGalaxy.eu","url":"https://usegalaxy.eu","id":"eu","human":"Galaxy Europe","usegalaxy":true},{"name":"UseGalaxy.org","url":"https://usegalaxy.org","id":"us","human":"Galaxy Main","usegalaxy":true},{"name":"UseGalaxy.org.au","url":"https://usegalaxy.org.au","id":"au","human":"Galaxy Australia","usegalaxy":true},{"name":"UseGalaxy.fr","url":"https://usegalaxy.fr","id":"fr","human":"Galaxy France","usegalaxy":true}]},"topic_name_human":"Foundations of Data Science","admin_install":{"install_tool_dependencies":true,"install_repository_dependencies":true,"install_resolver_dependencies":true,"tools":[]},"admin_install_yaml":"---\ninstall_tool_dependencies: true\ninstall_repository_dependencies: true\ninstall_resolver_dependencies: true\ntools: []\n","tours":false,"video":false,"slides_recordings":false,"translations":{"tutorial":[],"slides":[],"video":false},"license":"CC-BY-4.0","type":"tutorial","contributors":[{"name":"Saskia Hiltemann","maintainer_contact":"gitter","email":"saskia.hiltemann@gmail.com","fediverse":"https://mstdn.science/@shiltemann","fediverse_flavor":"mastodon","bluesky":"shiltemann.bsky.social","linkedin":"shiltemann","matrix":"shiltemann:matrix.org","orcid":"0000-0003-3803-468X","joined":"2017-09","bio":"Researcher at Erasmus Medical Center","elixir_node":"nl","contact_for_training":true,"affiliations":["CINECA-Project","gallantries","erasmusmc","elixir-europe","uni-freiburg"],"location":{"country":"NL","lat":51.912,"lon":4.462},"id":"shiltemann","url":"https://training.galaxyproject.org/training-material/api/contributors/shiltemann.json","page":"https://training.galaxyproject.org/training-material/hall-of-fame/shiltemann/"},{"name":"Helena Rasche","orcid":"0000-0001-9760-8992","maintainer_contact":"gitter","matrix":"hexylena:matrix.org","joined":"2017-09","elixir_node":"nl","affiliations":["gallantries","by-covid","erasmusmc","elixir-europe","elixir-converge"],"former_affiliations":["deNBI","avans-atgm","uni-freiburg"],"contact_for_training":false,"location":{"country":"NL","lat":51.91,"lon":4.46},"id":"hexylena","url":"https://training.galaxyproject.org/training-material/api/contributors/hexylena.json","page":"https://training.galaxyproject.org/training-material/hall-of-fame/hexylena/"},{"name":"Gallantries: Bridging Training Communities in Life Science, Environment and Health","short_name":"Gallantries","start_date":"2020-09-01","end_date":"2023-09-30","joined":"2020-09","avatar":"https://gallantries.github.io/assets/images/gallantries-logo.png","github":false,"funder":true,"url":"https://training.galaxyproject.org/training-material/api/funders/gallantries.json","funder_name":"Erasmus+ Programme","funding_id":"2020-1-NL01-KA203-064717","funding_system":"erasmusplus","funding_statement":"This project (<a href=\"https://erasmus-plus.ec.europa.eu/projects/search/details/2020-1-NL01-KA203-064717\"><code class=\"language-plaintext highlighter-rouge\">2020-1-NL01-KA203-064717</code></a>) is funded with the support of the Erasmus+ programme of the European Union. Their funding has supported a large number of tutorials within the GTN across a wide array of topics.\n<img src=\"https://gallantries.github.io/assets/images/logosbeneficaireserasmusright_en.jpg\" alt=\"eu flag with the text: with the support of the erasmus programme of the european union\" />\n<img src=\"https://www.erasmusplus.nl/assets/images/logo.png\" alt=\"erasmus plus logo\" />","members":["abretaud","bebatut","colineroyaux","fpsom","hexylena","shiltemann","yvanlebras"],"id":"gallantries","page":"https://training.galaxyproject.org/training-material/hall-of-fame/gallantries/"}]}