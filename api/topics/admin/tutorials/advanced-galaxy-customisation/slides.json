{"layout":"tutorial_slides","logo":"assets/images/gat.png","title":"Advanced customisation of a Galaxy instance","contributors":["bgruening","hexylena","martenson"],"subtopic":"deprecated","js_requirements":{"mathjax":null,"mermaid":false},"short_id":"S00000","url":"/topics/admin/tutorials/advanced-galaxy-customisation/slides.html","topic_name":"admin","tutorial_name":"advanced-galaxy-customisation","dir":"topics/admin/tutorials/advanced-galaxy-customisation","symlink":null,"id":"admin/advanced-galaxy-customisation","ref_tutorials":[],"ref_slides":["### Setup\n\nWe are going to use a prebuilt virtual machine image for this session.\n\nFrom the given USB stick, please:\n\n* Copy and install VirtualBox (or [download](https://www.virtualbox.org/wiki/Downloads)) if you do not have it already.\n* Copy the Planemo machine image - file `latest.ova` or [download](https://images.galaxyproject.org/planemo/).\n\n---\n\n## Galaxy's frontend\n\nJavaScript sources and CSS sources are in the `$GALAXY_ROOT/client` folder.\n\nWhenever you make changes there, you will need to re-build Galaxy's frontend with:\n\n```console\n$ cd $GALAXY_ROOT\n$ make client\n```\n\nThis requires [Node](https://nodejs.org/).\n\n---\n\n### Translation and localisation 1/2\n\nThe language for labels used in the JS source code is English, but can be wrapped in `l()` which makes it translatable.\n\n```javascript\n_l( 'Help' )\n```\n\n--\n\n* There is a script [client/galaxy/scripts/nls/locale.js](https://github.com/galaxyproject/galaxy/blob/dev/client/galaxy/scripts/nls/locale.js) that defines all translatable labels. By default without a translation.\n\n```javascript\n\"Analyze Data\" :\n    false,\n```\n\n--\n\n* There is a folder [client/galaxy/scripts/nls/](https://github.com/galaxyproject/galaxy/tree/dev/client/galaxy/scripts/nls) that contains all available localisations.\n```\n\"Analyze Data\" :\n    \"Analyse de donn√©es\",\n```\n\n---\n\n### Translation and localisation 2/2\n\nWhen a user's browser locale or language is set to a known translation, it will be used instead of the default. If a translation is not available for a string, it will appear in English.\n\n---\n\n### How to modify the menu\n\nOpen the [client/galaxy/scripts/layout/menu.js](https://github.com/galaxyproject/galaxy/blob/dev/client/galaxy/scripts/layout/menu.js)\n\n```javascript\nvar helpTab = {\n          id              : 'help',\n          title           : _l('Help'),\n          tooltip         : _l('Support, contact, and community'),\n          menu            : [{\n                  title   : _l('Support'),\n                  url     : options.support_url,\n                  target  : '_blank'\n              },{\n                  title   : _l('Search'),\n                  url     : options.search_url,\n                  target  : '_blank'\n```\n\n---\n\n## Configuration tweaks\n\nPlenty of customisation can be achieved using settings in the main configuration file [galaxy.yml](https://github.com/galaxyproject/galaxy/blob/dev/config/galaxy.yml.sample)\n\n---\n\n### Tool Panel configuration\n\n* How the tool panel looks like is decided in a file called `integrated_tool_panel.xml`.\n* By default it resides in Galaxy's root folder.\n* If missing it is generated from all other tool config files during startup.\n* Modify it if you want to reorder tools or move sections.\n\n---\n\n### Tool panel labels\n\nYou can add `<tool labels=\"updated\" />` to achieve:\n\n![tool panel labels](../../images/toolpanel_labels.png)\n\n---\n\n### Tool Panel search configuration 1/2\n\nThe tool panel search uses a pre-built index that is compiled during Galaxy\nboot. You can tweak tool panel search by configuring boosts in `galaxy.yml`.\n\n```ini\ntool_name_boost: 9\ntool_section_boost: 3\ntool_description_boost: 2\ntool_label_boost: 1\ntool_stub_boost: 5\ntool_help_boost: 0.5\n```\n\nYou can also manipulate the number of tools returned for any query by changing\nthe `tool_search_limit`. This will display more or fewer tools for any given\nquery.\n\n---\n\n### Tool Panel search configuration 2/2\n\n```ini\n# Enable/ disable Ngram-search for tools. It makes tool\n# search results tolerant for spelling mistakes in the query\n# by dividing the query into multiple ngrams and search for\n# each ngram\ntool_enable_ngram_search: true\n\n# Set minimum and maximum sizes of ngrams\ntool_ngram_minsize: 3\ntool_ngram_maxsize: 5\n```\n\n---\n\n### Log level configuration\n\n```ini\n# Verbosity of console log messages.\nlog_level: DEBUG\n```\n\nThese are [python logging levels](https://docs.python.org/2/library/logging.html#logging-levels).\n\n![log levels](../../images/log_levels.png)\n\n---\n\n### Help menu\n\n```ini\n# The URL linked by the \"Wiki\" link in the \"Help\" menu.\nwiki_url: https://galaxyproject.org/\n\n# The URL linked by the \"Support\" link in the \"Help\" menu.\nsupport_url: https://galaxyproject.org/support\n\n# The URL linked by the \"How to Cite Galaxy\" link in the \"Help\" menu.\n#citation_url: https://galaxyproject.org/citing-galaxy\n\n# The URL linked by the \"Search\" link in the \"Help\" menu.\n#search_url: https://galaxyproject.org/search/\n\n# The URL linked by the \"Mailing Lists\" link in the \"Help\" menu.\n#mailing_lists_url: https://galaxyproject.org/mailing-lists\n\n# The URL linked by the \"Videos\" link in the \"Help\" menu.\n#screencasts_url: https://vimeo.com/galaxyproject\n\n# The URL linked by the \"Terms and Conditions\" link in the \"Help\" menu, as well\n# as on the user registration and login forms and in the activation emails.\n#terms_url: None\n```\n\n---\n\n### Brand and welcome\n\n```ini\n# Append \"/{brand}\" to the \"Galaxy\" text in the masthead.\nbrand: GenOuest\n```\n\n![brand](../../images/brand.png)\n\n```ini\n# The URL linked by the \"Galaxy/brand\" text.\nlogo_url: /\n\n# The URL of the page to display in Galaxy's middle pane when loaded.  This can\n# be an absolute or relative URL.\nwelcome_url: /static/welcome.html\n```\n\n---\n\n### Email configuration\n\n```ini\nerror_email_to: marten+error@bx.psu.edu\nactivation_email: marten+activation@bx.psu.edu\n\nblacklist_file: config/disposable_email_blacklist.conf\nregistration_warning_message: Please only register one account\n\nuser_activation_on: False\nactivation_grace_period: 6\n```\n\n---\n\n### Galaxy Tours\n\nHave their own [tutorial](/training-material/topics/dev//tutorials/interactive-tours/slides.html#1).\n\n---\n\n### Galaxy Webhooks\n\nHave their own [slides](/training-material/topics/dev//tutorials/webhooks/slides.html#1) and [tutorial](/training-material/topics/dev//tutorials/webhooks/tutorial.html).\n\nAnd also a [documentation](https://docs.galaxyproject.org/en/master/admin/special_topics/webhooks.html)\n\n\n---\n\n### Adjusting styles\n\nWe use SCSS to build our CSS. Among other features it allows defining [variables](https://github.com/galaxyproject/galaxy/blob/release_19.01/client/galaxy/style/scss/theme/blue.scss).\n\n```diff\n--- a/client/galaxy/style/scss/theme/blue.scss\n+++ b/client/galaxy/style/scss/theme/blue.scss\n@@ -2,7 +2,7 @@\n-@base-color-1: #2c3143;\n+@base-color-1: blue;\n ```\n\n![blue base color](../../images/blue_base.png)\n\n---\n\n## Dynamic Welcome Page\n\n* Customizing the welcome page is quite easy, just edit `$GALAXY_ROOT/static/welcome.html`\n\n--\n\n* Embedding [twitter feeds](https://publish.twitter.com) is popular, e.g. [usegalaxy.org](https://usegalaxy.org)\n\n--\n\n* IFrame to embed a blog hosted on the same domain\n```html\n<!-- Header -->\n<h3>News</h3>\n<!-- Iframe contents go here -->\n<div id=\"test-rss\">\n</div>\n<!-- Load JQuery -->\n<script src=\"https://fqdn/galaxy/static/scripts/libs/jquery/jquery.js\">\n</script>\n<!-- Load contents into div -->\n<script type=\"text/javascript\">\n\t$('#test-rss').load('https://fqdn/category/dev/ #content');\n</script>\n```\n\n---\n\n## Toolbox filtering\n\n```\n# -- ToolBox filtering\n\n# Modules from lib/galaxy/tools/toolbox/filters/ can be specified in\n# the following lines.  tool_* filters will be applied for all users\n# and can not be changed by them.  user_tool_* filters will be shown\n# under user preferences and can be toggled on and off at\n# runtime.  Example shown below are not real defaults (no custom\n# filters are applied by default), but can be enabled by renaming the\n# examples.py.sample in the filters directory to examples.py.\n\n#tool_filters =\n#tool_label_filters =\n#tool_section_filters =\n#user_tool_filters: examples:restrict_upload_to_admins, examples:restrict_encode\n#user_tool_section_filters: examples:restrict_text\n#user_tool_label_filters: examples:restrict_upload_to_admins, examples:restrict_encode\n\n# The base modules that are searched for modules as described above\n# can be modified and modules external to Galaxy can be searched by\n# modifying the following option.\n#toolbox_filter_base_modules: galaxy.tools.toolbox.filters,galaxy.tools.filters\n```\n\n---\n\n## Quotas\n\nUsed to control user disk usage.\n\nTo turn on the use of quotas: In `galaxy.yml`:\n* `enable_quotas` Enable enforcement of quotas.  Quotas can be set from the Admin interface (under Data).\n* must create quotas in admin interface before any quota will be enforced, otherwise 'unlimited'\n\nAmounts:\n - Examples: \"10000MB\", \"99 gb\", \"0.2T\", \"unlimited\"\n - = / + / -\n\nDefault for user class:\n - None (No)\n - Unregistered Users\n - Registered Users\n\nor associated with Groups or Users\n\n---\n\n## Exercise: Creating Quotas\n\n* Create quotas for Unregistered (1b) and Registered Users (1mb)\n* Create a quota that adds 1GB\n* Create a quota that decreases by 1GB\n* Create a quota that grants unlimited\n"],"video_library":{"tutorial":null,"slides":null,"demo":null,"both":null,"session":null},"hands_on":false,"slides":true,"mod_date":"2023-04-17 15:03:19 +0000","pub_date":"2017-06-27 19:49:22 +0000","version":30,"api":"https://training.galaxyproject.org/training-material/api/topics/admin/tutorials/advanced-galaxy-customisation/tutorial.json","tools":[],"supported_servers":[],"topic_name_human":"Galaxy Server administration","admin_install":{"install_tool_dependencies":true,"install_repository_dependencies":true,"install_resolver_dependencies":true,"tools":[]},"admin_install_yaml":"---\ninstall_tool_dependencies: true\ninstall_repository_dependencies: true\ninstall_resolver_dependencies: true\ntools: []\n","tours":false,"video":false,"translations":{"tutorial":[],"slides":[],"video":false},"license":"CC-BY-4.0","type":"tutorial","redirect_from":["/short/admin/advanced-galaxy-customisation/slides","/short/S00000"]}